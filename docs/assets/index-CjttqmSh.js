import{g as fe}from"./gsap-C8pce-KX.js";import{C as _t,r as ds}from"./chartjs-BR_H7_9u.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const it="phonicsquest_v2",Le={xp:0,level:1,hearts:5,streak:0,bestStreak:0,lastPlayDate:null,dailyGoal:10,dailyDone:0,theme:"default",difficulty:1,sfxEnabled:!0,autoplay:!0,voiceSpeed:.8,parentPin:null,wordStats:{},groupMastery:{},currentMode:"blend",currentGroup:"short-a",wordHistory:[],mascotName:"Ollie"};class ps{constructor(){this._state=this._load(),this._listeners=new Map}_load(){try{const e=localStorage.getItem(it);if(e){const t=JSON.parse(e);return{...Le,...t}}}catch{}return{...Le}}_save(){try{localStorage.setItem(it,JSON.stringify(this._state))}catch{}}get(e){return this._state[e]}set(e,t){this._state[e]=t,this._notify(e,t),this._save()}patch(e){Object.assign(this._state,e);for(const[t,s]of Object.entries(e))this._notify(t,s);this._save()}subscribe(e,t){return this._listeners.has(e)||this._listeners.set(e,new Set),this._listeners.get(e).add(t),()=>{var s;return(s=this._listeners.get(e))==null?void 0:s.delete(t)}}_notify(e,t){var s,r;(s=this._listeners.get(e))==null||s.forEach(n=>n(t,e)),(r=this._listeners.get("*"))==null||r.forEach(n=>n(t,e))}reset(){const e=this._state.parentPin;this._state={...Le,parentPin:e},this._save(),this._notify("*",this._state)}snapshot(){return{...this._state}}recordWordAttempt(e,t){const s={...this._state.wordStats},r=s[e]??{attempts:0,correct:0};s[e]={attempts:r.attempts+1,correct:r.correct+(t?1:0),lastSeen:new Date().toISOString()},this.set("wordStats",s)}addWordHistory(e){const t=[e,...this._state.wordHistory].slice(0,100);this.set("wordHistory",t)}updateGroupMastery(e,t){const s={...this._state.groupMastery,[e]:t};this.set("groupMastery",s)}checkDailyReset(){const e=new Date().toDateString();this._state.lastPlayDate!==e&&this.patch({dailyDone:0,lastPlayDate:e})}incrementDailyDone(){this.set("dailyDone",this._state.dailyDone+1)}}const u=new ps,kt="/blending/",lt=`${kt}audio/phonemes/`,hs=`${kt}audio/sfx/`,ct={b:"b",c:"c",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",m:"m",n:"n",p:"p",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",y:"y",z:"z",sh:"sh",ch:"ch",th:"th",ng:"ng",a:"a",e:"e",i:"i",o:"o",u:"u",long_a:"long_a",long_e:"long_e",long_i:"long_i",long_o:"long_o",long_u:"long_u",oi:"oi",ow:"ow",aw:"aw"},us={b:"buh",c:"kuh",d:"duh",f:"fff",g:"guh",h:"huh",j:"juh",k:"kuh",l:"lll",m:"mmm",n:"nnn",p:"puh",r:"rrr",s:"sss",t:"tuh",v:"vvv",w:"wuh",x:"ks",y:"yuh",z:"zzz",sh:"shh",ch:"chuh",th:"thuh",ng:"ing",a:"ah",e:"eh",i:"ih",o:"aw",u:"uh",long_a:"ay",long_e:"ee",long_i:"eye",long_o:"oh",long_u:"you",oi:"oy",ow:"ow",aw:"aw"};class gs{constructor(){this._ctx=null,this._buffers=new Map,this._elements=new Map,this._ttsVoice=null,this._initTTS()}_ensureCtx(){return this._ctx||(this._ctx=new(window.AudioContext||window.webkitAudioContext)),this._ctx.state==="suspended"&&this._ctx.resume().catch(()=>{}),this._ctx}_initTTS(){const e=()=>{const t=speechSynthesis.getVoices(),s=["Google US English","Microsoft Aria Online","Karen","Samantha","Daniel"];for(const r of s){const n=t.find(a=>a.name.includes(r));if(n){this._ttsVoice=n;return}}this._ttsVoice=t.find(r=>r.lang==="en-US")??t[0]??null};speechSynthesis.getVoices().length?e():speechSynthesis.addEventListener("voiceschanged",e,{once:!0})}async speakPhoneme(e,t){if(!u.get("sfxEnabled"))return;let s=e.toLowerCase();if(t==="lv"&&(s=`long_${e.toLowerCase().replace("ee","e").replace("ay","a")}`),t!=="se"){if(t==="dp")return s={oy:"oi",ou:"ow",au:"aw"}[e.toLowerCase()]??e.toLowerCase(),this._playPhonemeAudio(s);if(t==="sf")return this._speak(e.replace(/^-/,""),.9);if(t==="bl"&&e.length===2){await this._playPhonemeAudio(e[0]),await this._delay(80),await this._playPhonemeAudio(e[1]);return}return this._playPhonemeAudio(s)}}async _playPhonemeAudio(e){if(this._buffers.has(e))return this._playBuffer(this._buffers.get(e));const t=ct[e];if(t)try{const r=await this._loadBuffer(`${lt}${t}.mp3`);return this._buffers.set(e,r),this._playBuffer(r)}catch{}const s=us[e]??e;return this._speak(s,.9)}speakWord(e){return u.get("sfxEnabled")?this._speak(e,u.get("voiceSpeed")??.8):Promise.resolve()}async revealPhonemes(e,t){for(let s=0;s<e.graphemes.length;s++){const r=e.graphemes[s],n=e.types[s];t==null||t(s),await this.speakPhoneme(r,n),await this._delay(350)}await this._delay(200),await this.speakWord(e.word)}async playSfx(e){if(!u.get("sfxEnabled"))return;const t=this._ensureCtx();switch(e){case"correct":this._playTone(t,880,.15,"sine"),await this._delay(80),this._playTone(t,1108,.12,"sine");break;case"wrong":this._playTone(t,200,.2,"sawtooth");break;case"pop":this._playTone(t,660,.08,"sine",.05);break;case"levelUp":for(const[s,r]of[[523,0],[659,.1],[784,.2],[1047,.3]])setTimeout(()=>this._playTone(t,s,.15,"sine"),r*1e3);break;case"spin":this._playTone(t,440,.05,"triangle",.08);break;case"reveal":try{const s=await this._loadBuffer(`${hs}reveal-sound.mp3`);this._playBuffer(s,.4)}catch{this._playTone(t,523,.1,"sine")}break}}_speak(e,t=.8){return new Promise(s=>{if(!window.speechSynthesis){s();return}speechSynthesis.cancel();const r=new SpeechSynthesisUtterance(e);r.rate=t,r.pitch=1.1,r.volume=1,this._ttsVoice&&(r.voice=this._ttsVoice);let n=!1;const a=()=>{n||(n=!0,clearTimeout(c),clearInterval(p),s())};r.onend=a,r.onerror=a;const i=Math.max(1500,Math.ceil(e.length*80/t))+800,c=setTimeout(a,i),p=setInterval(()=>{if(n){clearInterval(p);return}window.speechSynthesis.paused&&window.speechSynthesis.resume()},250);speechSynthesis.speak(r)})}async _loadBuffer(e){const t=this._ensureCtx(),s=await fetch(e);if(!s.ok)throw new Error(`Failed to fetch ${e}`);const r=await s.arrayBuffer();return t.decodeAudioData(r)}_playBuffer(e,t=.8){return new Promise(s=>{const r=this._ensureCtx(),n=r.createBufferSource(),a=r.createGain();n.buffer=e,a.gain.value=t,n.connect(a),a.connect(r.destination),n.onended=()=>s(),n.start(0)})}_playTone(e,t,s=.1,r="sine",n=.15){const a=e.createOscillator(),i=e.createGain();a.type=r,a.frequency.value=t,i.gain.setValueAtTime(s,e.currentTime),i.gain.exponentialRampToValueAtTime(.001,e.currentTime+n),a.connect(i),i.connect(e.destination),a.start(e.currentTime),a.stop(e.currentTime+n)}_delay(e){return new Promise(t=>setTimeout(t,e))}preloadWord(e){for(let t=0;t<e.graphemes.length;t++){const s=e.graphemes[t],r=e.types[t];let n=s.toLowerCase();if(r==="lv"&&(n=`long_${s.toLowerCase()}`),r==="dp"&&(n={oy:"oi",ou:"ow",au:"aw"}[s.toLowerCase()]??s.toLowerCase()),r==="se"||this._buffers.has(n))continue;const a=ct[n];a&&this._loadBuffer(`${lt}${a}.mp3`).then(i=>this._buffers.set(n,i)).catch(()=>{})}}}const S=new gs,ms=.8,dt=6,Ve=[{id:"stage-1",name:"Starter Sounds",description:"Short vowels A, E, I",icon:"ğŸŒ±",groups:["short-a","short-e","short-i"],level:1,requiredMastery:0},{id:"stage-2",name:"More Vowels",description:"Short vowels O and U",icon:"ğŸŒ¿",groups:["short-o","short-u"],level:1,requiredMastery:.7,prerequisite:"stage-1"},{id:"stage-3",name:"Magic E",description:"Long vowels A and I with silent e",icon:"âœ¨",groups:["long-a","long-i"],level:2,requiredMastery:.75,prerequisite:"stage-2"},{id:"stage-4",name:"More Magic E",description:"Long vowels E, O and U",icon:"ğŸŒŸ",groups:["long-e","long-o","long-u"],level:2,requiredMastery:.75,prerequisite:"stage-3"},{id:"stage-5",name:"Team Sounds",description:"Digraphs: sh, ch, th, wh",icon:"ğŸ¤",groups:["digraphs"],level:2,requiredMastery:.7,prerequisite:"stage-2"},{id:"stage-6",name:"Sound Blends",description:"Consonant blends: fl, bl, tr, cr, and more",icon:"ğŸš€",groups:["blends"],level:3,requiredMastery:.75,prerequisite:"stage-5"}];function fs(o){const e=[];for(const t of Ve){if(!t.prerequisite){e.push(t.id);continue}const s=Ve.find(n=>n.id===t.prerequisite);if(!s||!e.includes(s.id))continue;ys(s,o)>=t.requiredMastery&&e.push(t.id)}return e}function ys(o,e){if(!o.groups.length)return 0;const t=o.groups.map(s=>e[s]??0);return t.reduce((s,r)=>s+r,0)/t.length}const ee={correct:10,correct_fast:15,streak_5:20,streak_10:40,daily_goal:50,new_word:5},te=[0,100,250,450,700,1e3,1400,1900,2500,3200];function pt(o){let e=1;for(let n=0;n<te.length&&o>=te[n];n++)e=n+1;const t=te[e-1]??0,s=te[e]??te[te.length-1],r=s>t?(o-t)/(s-t):1;return{level:Math.min(e,te.length),progress:r,nextXP:s}}class vs{constructor(){this._sessionCorrect=0,this._sessionWrong=0}init(){u.checkDailyReset(),this._checkStreak(),this._updateUI()}_checkStreak(){const e=new Date().toDateString(),t=u.get("lastPlayDate");if(!t||t===e)return;const s=new Date(Date.now()-864e5).toDateString();t!==s&&u.set("streak",0)}recordCorrect(e=5e3,t=!1){this._sessionCorrect++;const s=[];let r=0;e<3e3?(r+=ee.correct_fast,s.push("Quick answer!")):(r+=ee.correct,s.push("Correct!")),t&&(r+=ee.new_word,s.push("New word!"));const n=this._sessionCorrect;n===5?(r+=ee.streak_5,s.push("5 in a row!")):n===10&&(r+=ee.streak_10,s.push("10 in a row!"));const a=u.get("xp")+r,i=u.get("level"),{level:c,progress:p}=pt(a);u.patch({xp:a,level:c}),u.incrementDailyDone();const h=u.get("dailyDone"),g=u.get("dailyGoal");h===g&&(r+=ee.daily_goal,u.set("xp",u.get("xp")+ee.daily_goal),s.push("Daily goal complete!"));const _=new Date().toDateString();if(u.get("lastPlayDate")!==_){u.patch({lastPlayDate:_,streak:u.get("streak")+1});const k=u.get("streak");k>u.get("bestStreak")&&u.set("bestStreak",k)}return this._updateUI(),{xpEarned:r,reasons:s,levelUp:c>i,newLevel:c,progress:p,dailyComplete:h===g}}recordWrong(){this._sessionCorrect=0,this._sessionWrong++;let e=u.get("hearts");return e=Math.max(0,e-1),u.set("hearts",e),this._updateUI(),{heartsLeft:e,gameOver:e<=0}}refillHearts(){u.set("hearts",5),this._updateUI()}getSessionStats(){return{correct:this._sessionCorrect,wrong:this._sessionWrong,total:this._sessionCorrect+this._sessionWrong,accuracy:this._sessionCorrect+this._sessionWrong>0?this._sessionCorrect/(this._sessionCorrect+this._sessionWrong):0}}resetSession(){this._sessionCorrect=0,this._sessionWrong=0}_updateUI(){const e=document.getElementById("hearts-val"),t=document.getElementById("streak-val"),s=document.getElementById("xp-val"),r=document.getElementById("level-val"),n=document.getElementById("level-next-val"),a=document.getElementById("level-bar-fill"),i=document.getElementById("goal-fill"),c=document.getElementById("goal-done"),p=document.getElementById("goal-total");e&&(e.textContent=u.get("hearts")),t&&(t.textContent=u.get("streak")),s&&(s.textContent=u.get("xp"));const{level:h,progress:g}=pt(u.get("xp"));r&&(r.textContent=h),n&&(n.textContent=h+1),a&&(a.style.width=`${Math.round(g*100)}%`);const _=u.get("dailyDone"),k=u.get("dailyGoal");i&&(i.style.width=`${Math.min(100,Math.round(_/k*100))}%`),c&&(c.textContent=_),p&&(p.textContent=k)}}const ne=new vs,bs={a:{sv:"Äƒ",lv:"Ä"},e:{sv:"Ä•",lv:"Ä“"},i:{sv:"Ä­",lv:"Ä«"},o:{sv:"Å",lv:"Å"},u:{sv:"Å­",lv:"Å«"}},Z={"short-a":{label:"Short A",color:"#ef4444",bg:"#fee2e2",icon:"ğŸ",audioFile:"a"},"short-e":{label:"Short E",color:"#f97316",bg:"#ffedd5",icon:"ğŸ¥š",audioFile:"e"},"short-i":{label:"Short I",color:"#eab308",bg:"#fef9c3",icon:"ğŸŸ",audioFile:"i"},"short-o":{label:"Short O",color:"#22c55e",bg:"#dcfce7",icon:"ğŸ™",audioFile:"o"},"short-u":{label:"Short U",color:"#3b82f6",bg:"#dbeafe",icon:"â˜‚ï¸",audioFile:"u"},"long-a":{label:"Long A",color:"#a855f7",bg:"#f3e8ff",icon:"ğŸ‚",audioFile:"long_a"},"long-e":{label:"Long E",color:"#ec4899",bg:"#fce7f3",icon:"ğŸ¦",audioFile:"long_e"},"long-i":{label:"Long I",color:"#14b8a6",bg:"#ccfbf1",icon:"ğŸª",audioFile:"long_i"},"long-o":{label:"Long O",color:"#f59e0b",bg:"#fef3c7",icon:"ğŸ ",audioFile:"long_o"},"long-u":{label:"Long U",color:"#6366f1",bg:"#e0e7ff",icon:"ğŸµ",audioFile:"long_u"},digraphs:{label:"Digraphs",color:"#8b5cf6",bg:"#ede9fe",icon:"â­",audioFile:null},blends:{label:"Blends",color:"#f97316",bg:"#ffedd5",icon:"ğŸš€",audioFile:null},diphthongs:{label:"Diphthongs",color:"#0d9488",bg:"#ccfbf1",icon:"ğŸŒ€",audioFile:null},"struct-cvc":{label:"CVC",color:"#64748b",bg:"#f1f5f9",icon:"ğŸ”¤",audioFile:null},"struct-ccvc":{label:"CCVC",color:"#0ea5e9",bg:"#e0f2fe",icon:"ğŸ“˜",audioFile:null},"struct-cvcc":{label:"CVCC",color:"#7c3aed",bg:"#ede9fe",icon:"ğŸ“—",audioFile:null},"struct-ccvcc":{label:"CCVCC",color:"#db2777",bg:"#fce7f3",icon:"ğŸ“™",audioFile:null},"suffix-ing":{label:"-ing Words",color:"#059669",bg:"#d1fae5",icon:"ğŸƒ",audioFile:null},"suffix-ed":{label:"-ed Words",color:"#d97706",bg:"#fef3c7",icon:"âœ…",audioFile:null},"suffix-er":{label:"-er Words",color:"#dc2626",bg:"#fee2e2",icon:"ğŸ“ˆ",audioFile:null},"suffix-est":{label:"-est Words",color:"#7c3aed",bg:"#f3e8ff",icon:"ğŸ†",audioFile:null}},V=[{id:"cat",word:"cat",graphemes:["c","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ±"},{id:"hat",word:"hat",graphemes:["h","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ©"},{id:"bat",word:"bat",graphemes:["b","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ¦‡"},{id:"mat",word:"mat",graphemes:["m","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ§˜"},{id:"sat",word:"sat",graphemes:["s","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ’º"},{id:"rat",word:"rat",graphemes:["r","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ€"},{id:"can",word:"can",graphemes:["c","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ¥«"},{id:"fan",word:"fan",graphemes:["f","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ’¨"},{id:"man",word:"man",graphemes:["m","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ‘¨"},{id:"pan",word:"pan",graphemes:["p","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ³"},{id:"ran",word:"ran",graphemes:["r","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸƒ"},{id:"van",word:"van",graphemes:["v","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸš"},{id:"bag",word:"bag",graphemes:["b","a","g"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ‘œ"},{id:"tag",word:"tag",graphemes:["t","a","g"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ·ï¸"},{id:"cap",word:"cap",graphemes:["c","a","p"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ§¢"},{id:"map",word:"map",graphemes:["m","a","p"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ—ºï¸"},{id:"tap",word:"tap",graphemes:["t","a","p"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸš¿"},{id:"dad",word:"dad",graphemes:["d","a","d"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ‘¨â€ğŸ‘§"},{id:"had",word:"had",graphemes:["h","a","d"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"âœ‹"},{id:"sad",word:"sad",graphemes:["s","a","d"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ğŸ˜¢"},{id:"bed",word:"bed",graphemes:["b","e","d"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ›ï¸"},{id:"fed",word:"fed",graphemes:["f","e","d"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ½ï¸"},{id:"red",word:"red",graphemes:["r","e","d"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ”´"},{id:"beg",word:"beg",graphemes:["b","e","g"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ™"},{id:"leg",word:"leg",graphemes:["l","e","g"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ¦µ"},{id:"peg",word:"peg",graphemes:["p","e","g"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ“Œ"},{id:"den",word:"den",graphemes:["d","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ¦Š"},{id:"hen",word:"hen",graphemes:["h","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ”"},{id:"men",word:"men",graphemes:["m","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦"},{id:"pen",word:"pen",graphemes:["p","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"âœ’ï¸"},{id:"ten",word:"ten",graphemes:["t","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ”Ÿ"},{id:"bet",word:"bet",graphemes:["b","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ²"},{id:"get",word:"get",graphemes:["g","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ¤²"},{id:"jet",word:"jet",graphemes:["j","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"âœˆï¸"},{id:"let",word:"let",graphemes:["l","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ¤"},{id:"net",word:"net",graphemes:["n","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ¾"},{id:"pet",word:"pet",graphemes:["p","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ•"},{id:"set",word:"set",graphemes:["s","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ¯"},{id:"wet",word:"wet",graphemes:["w","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ğŸ’§"},{id:"big",word:"big",graphemes:["b","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ˜"},{id:"dig",word:"dig",graphemes:["d","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"â›ï¸"},{id:"fig",word:"fig",graphemes:["f","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ‡"},{id:"jig",word:"jig",graphemes:["j","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ’ƒ"},{id:"pig",word:"pig",graphemes:["p","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ·"},{id:"wig",word:"wig",graphemes:["w","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ‘±"},{id:"bin",word:"bin",graphemes:["b","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ—‘ï¸"},{id:"fin",word:"fin",graphemes:["f","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ¦ˆ"},{id:"pin",word:"pin",graphemes:["p","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ“"},{id:"tin",word:"tin",graphemes:["t","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ¥«"},{id:"win",word:"win",graphemes:["w","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ†"},{id:"bit",word:"bit",graphemes:["b","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸª²"},{id:"fit",word:"fit",graphemes:["f","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ’ª"},{id:"hit",word:"hit",graphemes:["h","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ¯"},{id:"kit",word:"kit",graphemes:["k","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ§°"},{id:"pit",word:"pit",graphemes:["p","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ”ï¸"},{id:"sit",word:"sit",graphemes:["s","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ’º"},{id:"lid",word:"lid",graphemes:["l","i","d"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ«™"},{id:"lip",word:"lip",graphemes:["l","i","p"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ğŸ’‹"},{id:"dog",word:"dog",graphemes:["d","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ¶"},{id:"fog",word:"fog",graphemes:["f","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸŒ«ï¸"},{id:"hog",word:"hog",graphemes:["h","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ—"},{id:"jog",word:"jog",graphemes:["j","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸƒ"},{id:"log",word:"log",graphemes:["l","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸªµ"},{id:"cob",word:"cob",graphemes:["c","o","b"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸŒ½"},{id:"mob",word:"mob",graphemes:["m","o","b"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ‘¥"},{id:"rob",word:"rob",graphemes:["r","o","b"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ´â€â˜ ï¸"},{id:"cod",word:"cod",graphemes:["c","o","d"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸŸ"},{id:"nod",word:"nod",graphemes:["n","o","d"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ˜Š"},{id:"rod",word:"rod",graphemes:["r","o","d"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ£"},{id:"cot",word:"cot",graphemes:["c","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ›ï¸"},{id:"dot",word:"dot",graphemes:["d","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"âš«"},{id:"got",word:"got",graphemes:["g","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ"},{id:"hot",word:"hot",graphemes:["h","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸŒ¶ï¸"},{id:"lot",word:"lot",graphemes:["l","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ°"},{id:"pot",word:"pot",graphemes:["p","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ²"},{id:"box",word:"box",graphemes:["b","o","x"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ“¦"},{id:"fox",word:"fox",graphemes:["f","o","x"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ğŸ¦Š"},{id:"bug",word:"bug",graphemes:["b","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ›"},{id:"dug",word:"dug",graphemes:["d","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â›ï¸"},{id:"hug",word:"hug",graphemes:["h","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ¤—"},{id:"jug",word:"jug",graphemes:["j","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ«—"},{id:"mug",word:"mug",graphemes:["m","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â˜•"},{id:"rug",word:"rug",graphemes:["r","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ¡"},{id:"tug",word:"tug",graphemes:["t","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ›¥ï¸"},{id:"bun",word:"bun",graphemes:["b","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ"},{id:"fun",word:"fun",graphemes:["f","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ‰"},{id:"gun",word:"gun",graphemes:["g","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ”«"},{id:"run",word:"run",graphemes:["r","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸƒ"},{id:"sun",word:"sun",graphemes:["s","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â˜€ï¸"},{id:"but",word:"but",graphemes:["b","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â†•ï¸"},{id:"cut",word:"cut",graphemes:["c","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"âœ‚ï¸"},{id:"gut",word:"gut",graphemes:["g","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ’ª"},{id:"hut",word:"hut",graphemes:["h","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ›–"},{id:"nut",word:"nut",graphemes:["n","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ¥œ"},{id:"rut",word:"rut",graphemes:["r","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ›¤ï¸"},{id:"cub",word:"cub",graphemes:["c","u","b"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ»"},{id:"tub",word:"tub",graphemes:["t","u","b"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ğŸ›"},{id:"cake",word:"cake",graphemes:["c","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ‚"},{id:"lake",word:"lake",graphemes:["l","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸï¸"},{id:"make",word:"make",graphemes:["m","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ”¨"},{id:"take",word:"take",graphemes:["t","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ¤²"},{id:"bake",word:"bake",graphemes:["b","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ°"},{id:"came",word:"came",graphemes:["c","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ‘‹"},{id:"game",word:"game",graphemes:["g","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ®"},{id:"name",word:"name",graphemes:["n","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ“›"},{id:"same",word:"same",graphemes:["s","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ”"},{id:"tame",word:"tame",graphemes:["t","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ¦"},{id:"cape",word:"cape",graphemes:["c","a","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ¦¸"},{id:"tape",word:"tape",graphemes:["t","a","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ©¹"},{id:"cave",word:"cave",graphemes:["c","a","v","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ•³ï¸"},{id:"gave",word:"gave",graphemes:["g","a","v","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸ"},{id:"wave",word:"wave",graphemes:["w","a","v","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸŒŠ"},{id:"race",word:"race",graphemes:["r","a","c","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ğŸï¸"},{id:"bee",word:"bee",graphemes:["b","ee"],types:["c","lv"],pattern:"other",group:"long-e",level:2,emoji:"ğŸ"},{id:"see",word:"see",graphemes:["s","ee"],types:["c","lv"],pattern:"other",group:"long-e",level:2,emoji:"ğŸ‘€"},{id:"tree",word:"tree",graphemes:["tr","ee"],types:["bl","lv"],pattern:"blend",group:"long-e",level:2,emoji:"ğŸŒ²"},{id:"feet",word:"feet",graphemes:["f","ee","t"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸ¦¶"},{id:"meet",word:"meet",graphemes:["m","ee","t"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸ¤"},{id:"seed",word:"seed",graphemes:["s","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸŒ±"},{id:"feed",word:"feed",graphemes:["f","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸ¼"},{id:"need",word:"need",graphemes:["n","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"â¤ï¸"},{id:"weed",word:"weed",graphemes:["w","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸŒ¿"},{id:"week",word:"week",graphemes:["w","ee","k"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸ“…"},{id:"peek",word:"peek",graphemes:["p","ee","k"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸ‘ï¸"},{id:"jeep",word:"jeep",graphemes:["j","ee","p"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸš™"},{id:"deep",word:"deep",graphemes:["d","ee","p"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ğŸŒŠ"},{id:"bike",word:"bike",graphemes:["b","i","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸš²"},{id:"hike",word:"hike",graphemes:["h","i","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸ¥¾"},{id:"like",word:"like",graphemes:["l","i","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â¤ï¸"},{id:"pine",word:"pine",graphemes:["p","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸŒ²"},{id:"mine",word:"mine",graphemes:["m","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â›ï¸"},{id:"vine",word:"vine",graphemes:["v","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸ‡"},{id:"line",word:"line",graphemes:["l","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸ“"},{id:"fine",word:"fine",graphemes:["f","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸ‘"},{id:"kite",word:"kite",graphemes:["k","i","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸª"},{id:"mite",word:"mite",graphemes:["m","i","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸœ"},{id:"hide",word:"hide",graphemes:["h","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸ™ˆ"},{id:"ride",word:"ride",graphemes:["r","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ğŸ‡"},{id:"side",word:"side",graphemes:["s","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â¬…ï¸"},{id:"wide",word:"wide",graphemes:["w","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â†”ï¸"},{id:"bone",word:"bone",graphemes:["b","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ¦´"},{id:"cone",word:"cone",graphemes:["c","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ¦"},{id:"tone",word:"tone",graphemes:["t","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸµ"},{id:"zone",word:"zone",graphemes:["z","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸš«"},{id:"home",word:"home",graphemes:["h","o","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ "},{id:"hope",word:"hope",graphemes:["h","o","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ¤"},{id:"rope",word:"rope",graphemes:["r","o","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸª¢"},{id:"note",word:"note",graphemes:["n","o","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ“"},{id:"vote",word:"vote",graphemes:["v","o","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ—³ï¸"},{id:"hole",word:"hole",graphemes:["h","o","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ•³ï¸"},{id:"mole",word:"mole",graphemes:["m","o","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ¦”"},{id:"pole",word:"pole",graphemes:["p","o","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ğŸ£"},{id:"cube",word:"cube",graphemes:["c","u","b","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ğŸ§Š"},{id:"tube",word:"tube",graphemes:["t","u","b","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ğŸ§ª"},{id:"tune",word:"tune",graphemes:["t","u","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ğŸµ"},{id:"cute",word:"cute",graphemes:["c","u","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ğŸ¥°"},{id:"mule",word:"mule",graphemes:["m","u","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ğŸ«"},{id:"rule",word:"rule",graphemes:["r","u","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ğŸ“"},{id:"huge",word:"huge",graphemes:["h","u","g","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ğŸ‹"},{id:"ship",word:"ship",graphemes:["sh","i","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸš¢"},{id:"chip",word:"chip",graphemes:["ch","i","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸŸ"},{id:"chop",word:"chop",graphemes:["ch","o","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ”ª"},{id:"chat",word:"chat",graphemes:["ch","a","t"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ’¬"},{id:"chin",word:"chin",graphemes:["ch","i","n"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ‘¶"},{id:"shut",word:"shut",graphemes:["sh","u","t"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸšª"},{id:"shop",word:"shop",graphemes:["sh","o","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ›ï¸"},{id:"shed",word:"shed",graphemes:["sh","e","d"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸšï¸"},{id:"them",word:"them",graphemes:["th","e","m"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ‘¥"},{id:"then",word:"then",graphemes:["th","e","n"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"â­ï¸"},{id:"thin",word:"thin",graphemes:["th","i","n"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ’ª"},{id:"that",word:"that",graphemes:["th","a","t"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ‘†"},{id:"math",word:"math",graphemes:["m","a","th"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"â•"},{id:"bath",word:"bath",graphemes:["b","a","th"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ›"},{id:"rich",word:"rich",graphemes:["r","i","ch"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ’°"},{id:"much",word:"much",graphemes:["m","u","ch"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ“"},{id:"fish",word:"fish",graphemes:["f","i","sh"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸŸ"},{id:"dish",word:"dish",graphemes:["d","i","sh"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ğŸ½ï¸"},{id:"wish",word:"wish",graphemes:["w","i","sh"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"â­"},{id:"flat",word:"flat",graphemes:["fl","a","t"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ“„"},{id:"flag",word:"flag",graphemes:["fl","a","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ"},{id:"flip",word:"flip",graphemes:["fl","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ”„"},{id:"flop",word:"flop",graphemes:["fl","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸŸ"},{id:"slam",word:"slam",graphemes:["sl","a","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸšª"},{id:"slim",word:"slim",graphemes:["sl","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ’ª"},{id:"slap",word:"slap",graphemes:["sl","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ‘‹"},{id:"plan",word:"plan",graphemes:["pl","a","n"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ“‹"},{id:"play",word:"play",graphemes:["pl","ay"],types:["bl","lv"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ®"},{id:"clap",word:"clap",graphemes:["cl","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ‘"},{id:"clip",word:"clip",graphemes:["cl","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ“"},{id:"clog",word:"clog",graphemes:["cl","o","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸš§"},{id:"glad",word:"glad",graphemes:["gl","a","d"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ˜Š"},{id:"glob",word:"glob",graphemes:["gl","o","b"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ’§"},{id:"trip",word:"trip",graphemes:["tr","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"âœˆï¸"},{id:"trim",word:"trim",graphemes:["tr","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"âœ‚ï¸"},{id:"trap",word:"trap",graphemes:["tr","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸª¤"},{id:"drip",word:"drip",graphemes:["dr","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ’§"},{id:"drop",word:"drop",graphemes:["dr","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ’§"},{id:"drum",word:"drum",graphemes:["dr","u","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ¥"},{id:"grip",word:"grip",graphemes:["gr","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ¤"},{id:"grin",word:"grin",graphemes:["gr","i","n"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ˜"},{id:"crab",word:"crab",graphemes:["cr","a","b"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ¦€"},{id:"crop",word:"crop",graphemes:["cr","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸŒ¾"},{id:"frog",word:"frog",graphemes:["fr","o","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ¸"},{id:"fret",word:"fret",graphemes:["fr","e","t"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ˜Ÿ"},{id:"brag",word:"brag",graphemes:["br","a","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ’¬"},{id:"brim",word:"brim",graphemes:["br","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ©"},{id:"spin",word:"spin",graphemes:["sp","i","n"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸŒ€"},{id:"spot",word:"spot",graphemes:["sp","o","t"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ”µ"},{id:"step",word:"step",graphemes:["st","e","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ‘Ÿ"},{id:"stop",word:"stop",graphemes:["st","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ›‘"},{id:"stem",word:"stem",graphemes:["st","e","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸŒ¹"},{id:"snap",word:"snap",graphemes:["sn","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ“¸"},{id:"snip",word:"snip",graphemes:["sn","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"âœ‚ï¸"},{id:"swim",word:"swim",graphemes:["sw","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸŠ"},{id:"sled",word:"sled",graphemes:["sl","e","d"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸ›·"},{id:"slug",word:"slug",graphemes:["sl","u","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ğŸŒ"},{id:"oil",word:"oil",graphemes:["oi","l"],types:["dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ›¢ï¸"},{id:"coin",word:"coin",graphemes:["c","oi","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸª™"},{id:"foil",word:"foil",graphemes:["f","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ³"},{id:"soil",word:"soil",graphemes:["s","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸŒ±"},{id:"coil",word:"coil",graphemes:["c","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸŒ€"},{id:"boil",word:"boil",graphemes:["b","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"â™¨ï¸"},{id:"boy",word:"boy",graphemes:["b","oy"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ‘¦"},{id:"toy",word:"toy",graphemes:["t","oy"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸª€"},{id:"joy",word:"joy",graphemes:["j","oy"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ˜„"},{id:"cow",word:"cow",graphemes:["c","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ„"},{id:"now",word:"now",graphemes:["n","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"â°"},{id:"how",word:"how",graphemes:["h","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"â“"},{id:"bow_dip",word:"bow",graphemes:["b","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ€"},{id:"town",word:"town",graphemes:["t","ow","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ˜ï¸"},{id:"gown",word:"gown",graphemes:["g","ow","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ‘—"},{id:"down",word:"down",graphemes:["d","ow","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"â¬‡ï¸"},{id:"out",word:"out",graphemes:["ou","t"],types:["dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸšª"},{id:"shout",word:"shout",graphemes:["sh","ou","t"],types:["d","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ“¢"},{id:"loud",word:"loud",graphemes:["l","ou","d"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ”Š"},{id:"cloud",word:"cloud",graphemes:["cl","ou","d"],types:["bl","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"â˜ï¸"},{id:"mouth",word:"mouth",graphemes:["m","ou","th"],types:["c","dp","d"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ‘„"},{id:"south",word:"south",graphemes:["s","ou","th"],types:["c","dp","d"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ§­"},{id:"saw",word:"saw",graphemes:["s","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ”¨"},{id:"jaw",word:"jaw",graphemes:["j","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ’ª"},{id:"paw",word:"paw",graphemes:["p","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ¾"},{id:"raw",word:"raw",graphemes:["r","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ¥©"},{id:"law",word:"law",graphemes:["l","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"âš–ï¸"},{id:"yawn",word:"yawn",graphemes:["y","aw","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ˜´"},{id:"dawn",word:"dawn",graphemes:["d","aw","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸŒ…"},{id:"hawk",word:"hawk",graphemes:["h","aw","k"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ¦…"},{id:"draw",word:"draw",graphemes:["dr","aw"],types:["bl","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ¨"},{id:"claw",word:"claw",graphemes:["cl","aw"],types:["bl","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ğŸ¦"},{id:"band",word:"band",graphemes:["b","a","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ¸"},{id:"hand",word:"hand",graphemes:["h","a","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"âœ‹"},{id:"land",word:"land",graphemes:["l","a","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸŒ"},{id:"sand",word:"sand",graphemes:["s","a","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ–ï¸"},{id:"bend",word:"bend",graphemes:["b","e","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"â†©ï¸"},{id:"lend",word:"lend",graphemes:["l","e","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ¤"},{id:"mend",word:"mend",graphemes:["m","e","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸª¡"},{id:"send",word:"send",graphemes:["s","e","nd"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ“¨"},{id:"tent",word:"tent",graphemes:["t","e","nt"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"â›º"},{id:"dent",word:"dent",graphemes:["d","e","nt"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ”¨"},{id:"went",word:"went",graphemes:["w","e","nt"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸš¶"},{id:"best",word:"best",graphemes:["b","e","st"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ¥‡"},{id:"rest",word:"rest",graphemes:["r","e","st"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ˜´"},{id:"nest",word:"nest",graphemes:["n","e","st"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸªº"},{id:"vest",word:"vest",graphemes:["v","e","st"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ¦º"},{id:"fast",word:"fast",graphemes:["f","a","st"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"âš¡"},{id:"last",word:"last",graphemes:["l","a","st"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ"},{id:"mast",word:"mast",graphemes:["m","a","st"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"â›µ"},{id:"camp",word:"camp",graphemes:["c","a","mp"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ•ï¸"},{id:"lamp",word:"lamp",graphemes:["l","a","mp"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ’¡"},{id:"damp",word:"damp",graphemes:["d","a","mp"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ’§"},{id:"jump",word:"jump",graphemes:["j","u","mp"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ¦˜"},{id:"bump",word:"bump",graphemes:["b","u","mp"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ¤›"},{id:"dump",word:"dump",graphemes:["d","u","mp"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ—‘ï¸"},{id:"felt",word:"felt",graphemes:["f","e","lt"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ§¤"},{id:"melt",word:"melt",graphemes:["m","e","lt"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ•¯ï¸"},{id:"belt",word:"belt",graphemes:["b","e","lt"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ‘–"},{id:"link",word:"link",graphemes:["l","i","nk"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸ”—"},{id:"sink",word:"sink",graphemes:["s","i","nk"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸš¿"},{id:"pink",word:"pink",graphemes:["p","i","nk"],types:["c","sv","bl"],pattern:"CVCC",group:"struct-cvcc",level:2,emoji:"ğŸŒ¸"},{id:"stamp",word:"stamp",graphemes:["st","a","mp"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ“®"},{id:"clamp",word:"clamp",graphemes:["cl","a","mp"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ—œï¸"},{id:"bland",word:"bland",graphemes:["bl","a","nd"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ˜‘"},{id:"grand",word:"grand",graphemes:["gr","a","nd"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ°"},{id:"plant",word:"plant",graphemes:["pl","a","nt"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸŒ±"},{id:"blend",word:"blend",graphemes:["bl","e","nd"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ¨"},{id:"spend",word:"spend",graphemes:["sp","e","nd"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ’¸"},{id:"trend",word:"trend",graphemes:["tr","e","nd"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ“ˆ"},{id:"crest",word:"crest",graphemes:["cr","e","st"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸŒŠ"},{id:"chest",word:"chest",graphemes:["ch","e","st"],types:["d","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ“¦"},{id:"crisp",word:"crisp",graphemes:["cr","i","sp"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸŸ"},{id:"swift",word:"swift",graphemes:["sw","i","ft"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ¦…"},{id:"draft",word:"draft",graphemes:["dr","a","ft"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ“"},{id:"blast",word:"blast",graphemes:["bl","a","st"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ’¥"},{id:"trust",word:"trust",graphemes:["tr","u","st"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ¤"},{id:"grunt",word:"grunt",graphemes:["gr","u","nt"],types:["bl","sv","bl"],pattern:"CCVCC",group:"struct-ccvcc",level:3,emoji:"ğŸ·"},{id:"sitting",word:"sitting",graphemes:["s","i","t","-ing"],types:["c","sv","c","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ’º"},{id:"running",word:"running",graphemes:["r","u","n","-ing"],types:["c","sv","c","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸƒ"},{id:"jumping",word:"jumping",graphemes:["j","u","mp","-ing"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ¦˜"},{id:"fishing",word:"fishing",graphemes:["f","i","sh","-ing"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ£"},{id:"wishing",word:"wishing",graphemes:["w","i","sh","-ing"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"â­"},{id:"singing",word:"singing",graphemes:["s","i","ng","-ing"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ¤"},{id:"ringing",word:"ringing",graphemes:["r","i","ng","-ing"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ””"},{id:"landing",word:"landing",graphemes:["l","a","nd","-ing"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"âœˆï¸"},{id:"camping",word:"camping",graphemes:["c","a","mp","-ing"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ•ï¸"},{id:"melting",word:"melting",graphemes:["m","e","lt","-ing"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ•¯ï¸"},{id:"resting",word:"resting",graphemes:["r","e","st","-ing"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ˜´"},{id:"blending",word:"blending",graphemes:["bl","e","nd","-ing"],types:["bl","sv","bl","sf"],pattern:"suffix",group:"suffix-ing",level:3,emoji:"ğŸ¨"},{id:"jumped",word:"jumped",graphemes:["j","u","mp","-ed"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ¦˜"},{id:"fished",word:"fished",graphemes:["f","i","sh","-ed"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ£"},{id:"wished",word:"wished",graphemes:["w","i","sh","-ed"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"â­"},{id:"landed",word:"landed",graphemes:["l","a","nd","-ed"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"âœˆï¸"},{id:"camped",word:"camped",graphemes:["c","a","mp","-ed"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ•ï¸"},{id:"melted",word:"melted",graphemes:["m","e","lt","-ed"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ•¯ï¸"},{id:"rested",word:"rested",graphemes:["r","e","st","-ed"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ˜´"},{id:"blended",word:"blended",graphemes:["bl","e","nd","-ed"],types:["bl","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ¨"},{id:"lifted",word:"lifted",graphemes:["l","i","ft","-ed"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ’ª"},{id:"hunted",word:"hunted",graphemes:["h","u","nt","-ed"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-ed",level:3,emoji:"ğŸ¹"},{id:"runner",word:"runner",graphemes:["r","u","n","-er"],types:["c","sv","c","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"ğŸƒ"},{id:"jumper",word:"jumper",graphemes:["j","u","mp","-er"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"ğŸ¦˜"},{id:"fisher",word:"fisher",graphemes:["f","i","sh","-er"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"ğŸ£"},{id:"singer",word:"singer",graphemes:["s","i","ng","-er"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"ğŸ¤"},{id:"faster",word:"faster",graphemes:["f","a","st","-er"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"âš¡"},{id:"longer",word:"longer",graphemes:["l","o","ng","-er"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"ğŸ“"},{id:"bigger",word:"bigger",graphemes:["b","i","g","-er"],types:["c","sv","c","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"ğŸ˜"},{id:"winner",word:"winner",graphemes:["w","i","n","-er"],types:["c","sv","c","sf"],pattern:"suffix",group:"suffix-er",level:3,emoji:"ğŸ†"},{id:"fastest",word:"fastest",graphemes:["f","a","st","-est"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"âš¡"},{id:"longest",word:"longest",graphemes:["l","o","ng","-est"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"ğŸ“"},{id:"richest",word:"richest",graphemes:["r","i","ch","-est"],types:["c","sv","d","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"ğŸ’°"},{id:"biggest",word:"biggest",graphemes:["b","i","g","-est"],types:["c","sv","c","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"ğŸ˜"},{id:"coldest",word:"coldest",graphemes:["c","o","ld","-est"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"ğŸ§Š"},{id:"boldest",word:"boldest",graphemes:["b","o","ld","-est"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"ğŸ’ª"},{id:"kindest",word:"kindest",graphemes:["k","i","nd","-est"],types:["c","sv","bl","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"ğŸ’›"},{id:"oldest",word:"oldest",graphemes:["o","ld","-est"],types:["sv","bl","sf"],pattern:"suffix",group:"suffix-est",level:3,emoji:"ğŸ§“"}];function ws(o){return V.filter(e=>e.level<=o)}function Cs(o,e=3){let t=V.filter(s=>s.id!==o.id&&s.group===o.group);return t.length<e&&(t=V.filter(s=>s.id!==o.id&&s.level===o.level)),F(t).slice(0,e)}function F(o){const e=[...o];for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const je=["short-a","short-e","short-i","short-o","short-u","long-a","long-e","long-i","long-o","long-u","digraphs","blends","diphthongs"],xs=["struct-cvc","struct-ccvc","struct-cvcc","struct-ccvcc"],Ss=["suffix-ing","suffix-ed","suffix-er","suffix-est"];class js{getAdaptivePool(e=10,t={}){const s=t.maxLevel??u.get("difficulty")??1;let r=t.group?V:ws(s);t.group&&(t.group==="struct-cvc"?r=V.filter(i=>i.pattern==="CVC"):t.group==="struct-ccvc"?r=V.filter(i=>i.pattern==="blend"):r=r.filter(i=>i.group===t.group)),r.length===0&&(r=V.slice(0,20));const n=u.get("wordStats")||{},a=r.map(i=>{const c=n[i.id];if(!c||c.attempts===0)return{word:i,weight:3};const p=c.correct/c.attempts;return p<.5?{word:i,weight:5}:p<.7?{word:i,weight:3}:p>.9&&c.attempts>=dt?{word:i,weight:.5}:{word:i,weight:1}});return this._weightedSample(a,e)}getNextWord(e={}){const t=this.getAdaptivePool(20,e),r=(u.get("wordHistory")||[]).slice(0,5).map(a=>a.wordId),n=t.filter(a=>!r.includes(a.id));return n.length>0?n[0]:t[0]||V[0]}recordAttempt(e,t,s="blend"){u.recordWordAttempt(e,t),u.addWordHistory({wordId:e,correct:t,mode:s,timestamp:new Date().toISOString()});const r=V.find(n=>n.id===e);r&&this._updateGroupMastery(r.group)}_updateGroupMastery(e){const t=u.get("wordStats")||{},s=V.filter(i=>i.group===e);let r=0,n=0;for(const i of s){const c=t[i.id];c&&c.attempts>0&&(r+=c.attempts,n+=c.correct)}const a=r>0?n/r:0;u.updateGroupMastery(e,a)}getWordAccuracy(e){const s=(u.get("wordStats")||{})[e];return s?{...s,accuracy:s.attempts>0?s.correct/s.attempts:0}:null}isNewWord(e){const t=u.get("wordStats")||{};return!t[e]||t[e].attempts===0}getOverallStats(){const e=u.get("wordStats")||{},t=u.get("wordHistory")||[],s=u.get("groupMastery")||{};let r=0,n=0,a=0,i=0;for(const[,c]of Object.entries(e))c.attempts>0&&(r+=c.attempts,n+=c.correct,a++,c.attempts>=dt&&c.correct/c.attempts>=ms&&i++);return{totalAttempts:r,totalCorrect:n,overallAccuracy:r>0?n/r:0,wordsAttempted:a,wordsMastered:i,totalWords:V.length,groupMastery:s,recentHistory:t.slice(0,50),xp:u.get("xp"),level:u.get("level"),streak:u.get("streak"),bestStreak:u.get("bestStreak")}}exportCSV(){const e=u.get("wordStats")||{},t=["Word,Attempts,Correct,Accuracy,Last Seen"];for(const s of V){const r=e[s.id];if(r&&r.attempts>0){const n=(r.correct/r.attempts*100).toFixed(0);t.push(`${s.word},${r.attempts},${r.correct},${n}%,${r.lastSeen||""}`)}}return t.join(`
`)}_weightedSample(e,t){const s=[],r=[...e];for(let n=0;n<t&&r.length>0;n++){const a=r.reduce((c,p)=>c+p.weight,0);let i=Math.random()*a;for(let c=0;c<r.length;c++)if(i-=r[c].weight,i<=0){s.push(r[c].word),r.splice(c,1);break}}return s}}const ce=new js;class _s{constructor(){this._recognition=null,this._listening=!1,this.supported=!!(window.SpeechRecognition||window.webkitSpeechRecognition)}listen(e){return this.supported?new Promise(t=>{const s=window.SpeechRecognition||window.webkitSpeechRecognition;this._recognition=new s,this._recognition.lang="en-US",this._recognition.continuous=!1,this._recognition.interimResults=!1,this._recognition.maxAlternatives=5;const r=setTimeout(()=>{this.stop(),t(null)},8e3);this._recognition.onresult=n=>{clearTimeout(r);const i=Array.from(n.results[0]).map(g=>({text:g.transcript.toLowerCase().trim(),confidence:g.confidence})),c=e.toLowerCase().trim(),p=i.some(g=>g.text===c);let h={text:"",score:0,confidence:0};for(const g of i){const _=this._phoneticSimilarity(g.text,c);_>h.score&&(h={text:g.text,score:_,confidence:g.confidence})}this._listening=!1,t({heard:h.text,score:Math.round(h.score*100),correct:p||h.score>=.75,confidence:h.confidence})},this._recognition.onerror=()=>{clearTimeout(r),this._listening=!1,t(null)},this._recognition.onend=()=>{clearTimeout(r),this._listening=!1},this._listening=!0,this._recognition.start()}):Promise.resolve(null)}stop(){if(this._recognition){try{this._recognition.stop()}catch{}this._recognition=null}this._listening=!1}get isListening(){return this._listening}_phoneticSimilarity(e,t){if(e===t)return 1;const s=c=>c.replace(/ph/g,"f").replace(/ck/g,"k").replace(/igh/g,"i").replace(/tion/g,"shun").replace(/ee/g,"e").replace(/oo/g,"u").replace(/th/g,"t").replace(/sh/g,"s").replace(/ch/g,"c"),r=s(e),n=s(t),a=this._levenshtein(r,n),i=Math.max(r.length,n.length,1);return 1-a/i}_levenshtein(e,t){const s=e.length,r=t.length,n=Array.from({length:s+1},()=>new Array(r+1).fill(0));for(let a=0;a<=s;a++)n[a][0]=a;for(let a=0;a<=r;a++)n[0][a]=a;for(let a=1;a<=s;a++)for(let i=1;i<=r;i++){const c=e[a-1]===t[i-1]?0:1;n[a][i]=Math.min(n[a-1][i]+1,n[a][i-1]+1,n[a-1][i-1]+c)}return n[s][r]}}const ae=new _s,q="/blending/",me={neutral:`${q}images/mascot/giri-neutral.png`,celebrate:`${q}images/mascot/giri-celebrate.png`,confetti:`${q}images/mascot/giri-celebrate-confetti.png`,clap:`${q}images/mascot/giri-clap-frame.png`,encourage:`${q}images/mascot/giri-encourage.png`,holdCard:`${q}images/mascot/giri-hold-card.png`,pointLeft:`${q}images/mascot/giri-point-left.png`,pointRight:`${q}images/mascot/giri-point-right.png`,thinking:`${q}images/mascot/giri-thinking.png`,trophy:`${q}images/mascot/giri-trophy.png`,whiteboard:`${q}images/mascot/giri-whiteboard.png`},ht=["You're doing great!","Amazing!","Keep going!","Super reader!","You rock!","Fantastic!","Way to go!","Brilliant!","Wow!","You're a star!","Nice work!","So proud of you!"],ut=["Almost there!","Try again!","You can do it!","Keep trying!","So close!","Let's try once more!"];class ks{constructor(){this._state="neutral",this._preloaded=!1}preload(){if(!this._preloaded){for(const e of Object.values(me)){const t=new Image;t.src=e}this._preloaded=!0}}init(){this.preload(),this._render("mascot-mini","neutral",28),this._render("mascot-home","holdCard",100),this._render("mascot","neutral",80)}setState(e){me[e]&&(this._state=e,this._render("mascot",e,80),this._render("mascot-mini",e==="neutral"?"neutral":e,28))}setHomeState(e="holdCard"){this._render("mascot-home",e,100)}setResultState(e="celebrate"){this._render("result-mascot",e,140)}celebrate(e=!1){const t=e?"trophy":"celebrate";this.setState(t);const s=document.getElementById("mascot");s&&(s.classList.add("celebrate"),setTimeout(()=>s.classList.remove("celebrate"),2e3))}encourage(){this.setState("encourage");const e=document.getElementById("mascot");e&&(e.classList.add("peek"),setTimeout(()=>{e.classList.remove("peek"),this.setState("neutral")},2500))}think(){this.setState("thinking")}point(e="right"){this.setState(e==="left"?"pointLeft":"pointRight")}clap(){this.setState("clap"),setTimeout(()=>this.setState("neutral"),2e3)}getCheer(){return ht[Math.floor(Math.random()*ht.length)]}getEncouragement(){return ut[Math.floor(Math.random()*ut.length)]}_render(e,t,s){const r=document.getElementById(e);if(!r)return;const n=me[t]||me.neutral;let a=r.querySelector("img");a||(a=document.createElement("img"),a.alt="Giri the mascot",a.draggable=!1,a.style.cssText=`width:${s}px; height:${s}px; object-fit:contain; user-select:none; pointer-events:none;`,r.innerHTML="",r.appendChild(a)),a.src=n,a.style.width=`${s}px`,a.style.height=`${s}px`}}const P=new ks,Es=je.slice(0,10);class Ls{constructor(){this._canvas=null,this._ctx=null,this._angle=0,this._spinning=!1,this._segments=[],this._onLand=null}init(e){this._canvas=e,this._ctx=e.getContext("2d"),this._segments=Es.map(t=>({key:t,...Z[t]})),this._draw()}spin(){return this._spinning?Promise.reject("already spinning"):(this._spinning=!0,new Promise(e=>{const t=this._angle+(Math.random()*3+4)*Math.PI*2;fe.to(this,{_angle:t,duration:3.5,ease:"power4.out",onUpdate:()=>{this._draw();const s=this._getSelectedIndex();this._lastSegIndex!==s&&(this._lastSegIndex=s,S.playSfx("spin"))},onComplete:()=>{this._spinning=!1;const s=this._getSelectedIndex(),r=this._segments[s];this._flashSegment(s),e(r.key)}})}))}get isSpinning(){return this._spinning}_getSelectedIndex(){const e=Math.PI*2/this._segments.length,t=(this._angle%(Math.PI*2)+Math.PI*2)%(Math.PI*2),s=Math.floor(t/e)%this._segments.length;return this._segments.length-1-s}_draw(){const e=this._ctx,t=this._canvas;if(!e||!t)return;const s=t.width/2,r=t.height/2,n=Math.min(s,r)-6,a=Math.PI*2/this._segments.length;e.clearRect(0,0,t.width,t.height),e.save(),e.translate(s,r),e.rotate(this._angle);for(let i=0;i<this._segments.length;i++){const c=this._segments[i],p=i*a,h=p+a;e.beginPath(),e.moveTo(0,0),e.arc(0,0,n,p,h),e.closePath(),e.fillStyle=c.color,e.fill(),e.strokeStyle="rgba(255,255,255,0.4)",e.lineWidth=2,e.stroke(),e.save(),e.rotate(p+a/2),e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(c.icon,n*.58,0),e.font="bold 10px Nunito, sans-serif",e.fillStyle="#fff",e.fillText(c.label,n*.38,0),e.restore()}e.restore(),e.beginPath(),e.arc(s,r,28,0,Math.PI*2),e.fillStyle="#fff",e.fill(),e.strokeStyle="rgba(0,0,0,0.1)",e.lineWidth=2,e.stroke(),e.save(),e.fillStyle="#fff",e.strokeStyle="#333",e.lineWidth=2,e.beginPath(),e.moveTo(s,4),e.lineTo(s-10,-4),e.lineTo(s+10,-4),e.closePath(),e.fill(),e.stroke(),e.restore()}_flashSegment(e){if(!this._ctx)return;let s=0;const r=setInterval(()=>{s++,this._draw(),s>=4&&clearInterval(r)},150)}}function re(o,e,t){e.innerHTML="";const s={c:"consonant",sv:"short-vowel",lv:"long-vowel",d:"digraph",bl:"blend",se:"silent-e",rc:"r-control"},r=o.graphemes.map((n,a)=>{const i=document.createElement("div");return i.className=`letter-tile letter-tile--${s[o.types[a]]||"consonant"}`,i.textContent=n,i.setAttribute("role","listitem"),i.setAttribute("aria-label",`${n}, ${s[o.types[a]]||"consonant"}`),e.appendChild(i),i});return fe.set(r,{opacity:0,scale:.3,y:-60,rotation:()=>fe.utils.random(-30,30)}),fe.to(r,{opacity:1,scale:1,y:0,rotation:0,duration:.45,stagger:.12,ease:"back.out(1.7)",onComplete:()=>{r.forEach(n=>n.classList.add("letter-tile--revealed"))},onUpdate:function(){const n=this.progress(),a=.12;r.forEach((i,c)=>{const p=c*a/(r.length*a+.45);n>=p+.3&&!r[c].dataset.landed&&(r[c].dataset.landed="true")})}}),r}const Me=new Ls;_t.register(...ds);let se=null;function Ms(o){const e=ce.getOverallStats();o.innerHTML=`
    <!-- Summary Stats -->
    <div class="dash-stats-grid">
      <div class="dash-stat-card">
        <span class="dash-stat-value">${e.wordsAttempted}</span>
        <span class="dash-stat-label">Words practiced</span>
      </div>
      <div class="dash-stat-card">
        <span class="dash-stat-value">${e.wordsMastered}</span>
        <span class="dash-stat-label">Words mastered</span>
      </div>
      <div class="dash-stat-card">
        <span class="dash-stat-value">${Math.round(e.overallAccuracy*100)}%</span>
        <span class="dash-stat-label">Accuracy</span>
      </div>
      <div class="dash-stat-card">
        <span class="dash-stat-value">${e.bestStreak}</span>
        <span class="dash-stat-label">Best streak</span>
      </div>
    </div>

    <!-- Accuracy Chart -->
    <h3 class="dash-section-title">Group Mastery</h3>
    <div class="dash-chart-wrap">
      <canvas id="chart-mastery" aria-label="Group mastery chart"></canvas>
    </div>

    <!-- Mastery Bars -->
    <div class="mastery-bar-list" id="mastery-bars"></div>

    <!-- Learning Path -->
    <h3 class="dash-section-title" style="margin-top:24px">Learning Path</h3>
    <div id="learning-path"></div>

    <!-- Recent Words -->
    <h3 class="dash-section-title" style="margin-top:24px">Recent Words</h3>
    <div style="overflow-x:auto;">
      <table class="word-history-table">
        <thead><tr><th>Word</th><th>Mode</th><th>Result</th><th>When</th></tr></thead>
        <tbody id="word-history-body"></tbody>
      </table>
    </div>

    <!-- Actions -->
    <div class="dash-actions">
      <button class="btn btn--ghost" id="btn-export-csv">Export CSV</button>
      <button class="btn btn--ghost" id="btn-add-words">Custom Words</button>
    </div>
  `,Ts(e),Is(e),$s(e),Vs(e),As()}function Ts(o){const e=document.getElementById("chart-mastery");if(!e)return;se&&(se.destroy(),se=null);const t=je.filter(a=>Z[a]),s=t.map(a=>Z[a].label),r=t.map(a=>Math.round((o.groupMastery[a]??0)*100)),n=t.map(a=>Z[a].color);se=new _t(e,{type:"bar",data:{labels:s,datasets:[{label:"Mastery %",data:r,backgroundColor:n.map(a=>a+"80"),borderColor:n,borderWidth:2,borderRadius:6,barPercentage:.7}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:a=>a+"%",font:{size:11}},grid:{display:!1}},x:{ticks:{font:{size:10},maxRotation:45},grid:{display:!1}}}}})}function Is(o){const e=document.getElementById("mastery-bars");e&&(e.innerHTML=je.map(t=>{const s=Z[t];if(!s)return"";const r=Math.round((o.groupMastery[t]??0)*100);return`
      <div class="mastery-bar-item">
        <span class="mastery-bar-label">${s.icon} ${s.label}</span>
        <div class="mastery-bar-track">
          <div class="mastery-bar-fill" style="width:${r}%; background:${s.color}"></div>
        </div>
        <span class="mastery-bar-pct">${r}%</span>
      </div>
    `}).join(""))}function $s(o){const e=document.getElementById("learning-path");if(!e)return;const t=fs(o.groupMastery);e.innerHTML=Ve.map(s=>{const r=t.includes(s.id),n=s.groups.map(i=>o.groupMastery[i]??0),a=n.length?Math.round(n.reduce((i,c)=>i+c,0)/n.length*100):0;return`
      <div class="mastery-bar-item" style="opacity:${r?1:.4}">
        <span class="mastery-bar-label">${s.icon} ${s.name}</span>
        <div class="mastery-bar-track">
          <div class="mastery-bar-fill" style="width:${a}%"></div>
        </div>
        <span class="mastery-bar-pct">${r?a+"%":"ğŸ”’"}</span>
      </div>
    `}).join("")}function Vs(o){const e=document.getElementById("word-history-body");if(!e)return;const t=o.recentHistory.slice(0,30).map(s=>{const r=V.find(c=>c.id===s.wordId),n=(r==null?void 0:r.emoji)||"",a=Bs(s.timestamp),i=s.correct?'<span style="color:var(--color-success)">âœ“</span>':'<span style="color:var(--color-error)">âœ—</span>';return`<tr>
      <td>${n} ${s.wordId}</td>
      <td>${s.mode}</td>
      <td>${i}</td>
      <td>${a}</td>
    </tr>`});e.innerHTML=t.join("")||'<tr><td colspan="4" style="text-align:center;color:var(--text-muted)">No history yet</td></tr>'}function As(){var o,e;(o=document.getElementById("btn-export-csv"))==null||o.addEventListener("click",()=>{const t=ce.exportCSV(),s=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download="phonicsquest-progress.csv",n.click(),URL.revokeObjectURL(r)}),(e=document.getElementById("btn-add-words"))==null||e.addEventListener("click",()=>{alert(`Custom words feature coming soon! You can add words via the browser console:

store.set("customWords", [...])`)})}function Bs(o){if(!o)return"";const e=Date.now()-new Date(o).getTime(),t=Math.floor(e/6e4);if(t<1)return"just now";if(t<60)return`${t}m ago`;const s=Math.floor(t/60);return s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`}function Ps(){se&&(se.destroy(),se=null)}var Ge={};(function o(e,t,s,r){var n=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",i=function(){if(!e.OffscreenCanvas)return!1;try{var d=new OffscreenCanvas(1,1),l=d.getContext("2d");l.fillRect(0,0,1,1);var m=d.transferToImageBitmap();l.createPattern(m,"no-repeat")}catch{return!1}return!0}();function c(){}function p(d){var l=t.exports.Promise,m=l!==void 0?l:e.Promise;return typeof m=="function"?new m(d):(d(c,c),null)}var h=function(d,l){return{transform:function(m){if(d)return m;if(l.has(m))return l.get(m);var v=new OffscreenCanvas(m.width,m.height),b=v.getContext("2d");return b.drawImage(m,0,0),l.set(m,v),v},clear:function(){l.clear()}}}(i,new Map),g=function(){var d=Math.floor(16.666666666666668),l,m,v={},b=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(l=function(w){var C=Math.random();return v[C]=requestAnimationFrame(function y(x){b===x||b+d-1<x?(b=x,delete v[C],w()):v[C]=requestAnimationFrame(y)}),C},m=function(w){v[w]&&cancelAnimationFrame(v[w])}):(l=function(w){return setTimeout(w,d)},m=function(w){return clearTimeout(w)}),{frame:l,cancel:m}}(),_=function(){var d,l,m={};function v(b){function w(C,y){b.postMessage({options:C||{},callback:y})}b.init=function(y){var x=y.transferControlToOffscreen();b.postMessage({canvas:x},[x])},b.fire=function(y,x,M){if(l)return w(y,null),l;var I=Math.random().toString(36).slice(2);return l=p(function(T){function $(A){A.data.callback===I&&(delete m[I],b.removeEventListener("message",$),l=null,h.clear(),M(),T())}b.addEventListener("message",$),w(y,I),m[I]=$.bind(null,{data:{callback:I}})}),l},b.reset=function(){b.postMessage({reset:!0});for(var y in m)m[y](),delete m[y]}}return function(){if(d)return d;if(!s&&n){var b=["var CONFETTI, SIZE = {}, module = {};","("+o.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{d=new Worker(URL.createObjectURL(new Blob([b])))}catch(w){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ğŸŠ Could not load worker",w),null}v(d)}return d}}(),k={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(d,l){return l?l(d):d}function W(d){return d!=null}function L(d,l,m){return E(d&&W(d[l])?d[l]:k[l],m)}function Ht(d){return d<0?0:Math.floor(d)}function Ft(d,l){return Math.floor(Math.random()*(l-d))+d}function _e(d){return parseInt(d,16)}function Ot(d){return d.map(Nt)}function Nt(d){var l=String(d).replace(/[^0-9a-f]/gi,"");return l.length<6&&(l=l[0]+l[0]+l[1]+l[1]+l[2]+l[2]),{r:_e(l.substring(0,2)),g:_e(l.substring(2,4)),b:_e(l.substring(4,6))}}function qt(d){var l=L(d,"origin",Object);return l.x=L(l,"x",Number),l.y=L(l,"y",Number),l}function Ut(d){d.width=document.documentElement.clientWidth,d.height=document.documentElement.clientHeight}function zt(d){var l=d.getBoundingClientRect();d.width=l.width,d.height=l.height}function Yt(d){var l=document.createElement("canvas");return l.style.position="fixed",l.style.top="0px",l.style.left="0px",l.style.pointerEvents="none",l.style.zIndex=d,l}function Xt(d,l,m,v,b,w,C,y,x){d.save(),d.translate(l,m),d.rotate(w),d.scale(v,b),d.arc(0,0,1,C,y,x),d.restore()}function Kt(d){var l=d.angle*(Math.PI/180),m=d.spread*(Math.PI/180);return{x:d.x,y:d.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:d.startVelocity*.5+Math.random()*d.startVelocity,angle2D:-l+(.5*m-Math.random()*m),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:d.color,shape:d.shape,tick:0,totalTicks:d.ticks,decay:d.decay,drift:d.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:d.gravity*3,ovalScalar:.6,scalar:d.scalar,flat:d.flat}}function Zt(d,l){l.x+=Math.cos(l.angle2D)*l.velocity+l.drift,l.y+=Math.sin(l.angle2D)*l.velocity+l.gravity,l.velocity*=l.decay,l.flat?(l.wobble=0,l.wobbleX=l.x+10*l.scalar,l.wobbleY=l.y+10*l.scalar,l.tiltSin=0,l.tiltCos=0,l.random=1):(l.wobble+=l.wobbleSpeed,l.wobbleX=l.x+10*l.scalar*Math.cos(l.wobble),l.wobbleY=l.y+10*l.scalar*Math.sin(l.wobble),l.tiltAngle+=.1,l.tiltSin=Math.sin(l.tiltAngle),l.tiltCos=Math.cos(l.tiltAngle),l.random=Math.random()+2);var m=l.tick++/l.totalTicks,v=l.x+l.random*l.tiltCos,b=l.y+l.random*l.tiltSin,w=l.wobbleX+l.random*l.tiltCos,C=l.wobbleY+l.random*l.tiltSin;if(d.fillStyle="rgba("+l.color.r+", "+l.color.g+", "+l.color.b+", "+(1-m)+")",d.beginPath(),a&&l.shape.type==="path"&&typeof l.shape.path=="string"&&Array.isArray(l.shape.matrix))d.fill(Qt(l.shape.path,l.shape.matrix,l.x,l.y,Math.abs(w-v)*.1,Math.abs(C-b)*.1,Math.PI/10*l.wobble));else if(l.shape.type==="bitmap"){var y=Math.PI/10*l.wobble,x=Math.abs(w-v)*.1,M=Math.abs(C-b)*.1,I=l.shape.bitmap.width*l.scalar,T=l.shape.bitmap.height*l.scalar,$=new DOMMatrix([Math.cos(y)*x,Math.sin(y)*x,-Math.sin(y)*M,Math.cos(y)*M,l.x,l.y]);$.multiplySelf(new DOMMatrix(l.shape.matrix));var A=d.createPattern(h.transform(l.shape.bitmap),"no-repeat");A.setTransform($),d.globalAlpha=1-m,d.fillStyle=A,d.fillRect(l.x-I/2,l.y-T/2,I,T),d.globalAlpha=1}else if(l.shape==="circle")d.ellipse?d.ellipse(l.x,l.y,Math.abs(w-v)*l.ovalScalar,Math.abs(C-b)*l.ovalScalar,Math.PI/10*l.wobble,0,2*Math.PI):Xt(d,l.x,l.y,Math.abs(w-v)*l.ovalScalar,Math.abs(C-b)*l.ovalScalar,Math.PI/10*l.wobble,0,2*Math.PI);else if(l.shape==="star")for(var j=Math.PI/2*3,R=4*l.scalar,O=8*l.scalar,N=l.x,Y=l.y,Q=5,z=Math.PI/Q;Q--;)N=l.x+Math.cos(j)*O,Y=l.y+Math.sin(j)*O,d.lineTo(N,Y),j+=z,N=l.x+Math.cos(j)*R,Y=l.y+Math.sin(j)*R,d.lineTo(N,Y),j+=z;else d.moveTo(Math.floor(l.x),Math.floor(l.y)),d.lineTo(Math.floor(l.wobbleX),Math.floor(b)),d.lineTo(Math.floor(w),Math.floor(C)),d.lineTo(Math.floor(v),Math.floor(l.wobbleY));return d.closePath(),d.fill(),l.tick<l.totalTicks}function Jt(d,l,m,v,b){var w=l.slice(),C=d.getContext("2d"),y,x,M=p(function(I){function T(){y=x=null,C.clearRect(0,0,v.width,v.height),h.clear(),b(),I()}function $(){s&&!(v.width===r.width&&v.height===r.height)&&(v.width=d.width=r.width,v.height=d.height=r.height),!v.width&&!v.height&&(m(d),v.width=d.width,v.height=d.height),C.clearRect(0,0,v.width,v.height),w=w.filter(function(A){return Zt(C,A)}),w.length?y=g.frame($):T()}y=g.frame($),x=T});return{addFettis:function(I){return w=w.concat(I),M},canvas:d,promise:M,reset:function(){y&&g.cancel(y),x&&x()}}}function tt(d,l){var m=!d,v=!!L(l||{},"resize"),b=!1,w=L(l,"disableForReducedMotion",Boolean),C=n&&!!L(l||{},"useWorker"),y=C?_():null,x=m?Ut:zt,M=d&&y?!!d.__confetti_initialized:!1,I=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,T;function $(j,R,O){for(var N=L(j,"particleCount",Ht),Y=L(j,"angle",Number),Q=L(j,"spread",Number),z=L(j,"startVelocity",Number),ss=L(j,"decay",Number),rs=L(j,"gravity",Number),os=L(j,"drift",Number),rt=L(j,"colors",Ot),ns=L(j,"ticks",Number),ot=L(j,"shapes"),as=L(j,"scalar"),is=!!L(j,"flat"),nt=qt(j),at=N,Ee=[],ls=d.width*nt.x,cs=d.height*nt.y;at--;)Ee.push(Kt({x:ls,y:cs,angle:Y,spread:Q,startVelocity:z,color:rt[at%rt.length],shape:ot[Ft(0,ot.length)],ticks:ns,decay:ss,gravity:rs,drift:os,scalar:as,flat:is}));return T?T.addFettis(Ee):(T=Jt(d,Ee,x,R,O),T.promise)}function A(j){var R=w||L(j,"disableForReducedMotion",Boolean),O=L(j,"zIndex",Number);if(R&&I)return p(function(z){z()});m&&T?d=T.canvas:m&&!d&&(d=Yt(O),document.body.appendChild(d)),v&&!M&&x(d);var N={width:d.width,height:d.height};y&&!M&&y.init(d),M=!0,y&&(d.__confetti_initialized=!0);function Y(){if(y){var z={getBoundingClientRect:function(){if(!m)return d.getBoundingClientRect()}};x(z),y.postMessage({resize:{width:z.width,height:z.height}});return}N.width=N.height=null}function Q(){T=null,v&&(b=!1,e.removeEventListener("resize",Y)),m&&d&&(document.body.contains(d)&&document.body.removeChild(d),d=null,M=!1)}return v&&!b&&(b=!0,e.addEventListener("resize",Y,!1)),y?y.fire(j,N,Q):$(j,N,Q)}return A.reset=function(){y&&y.reset(),T&&T.reset()},A}var ke;function st(){return ke||(ke=tt(null,{useWorker:!0,resize:!0})),ke}function Qt(d,l,m,v,b,w,C){var y=new Path2D(d),x=new Path2D;x.addPath(y,new DOMMatrix(l));var M=new Path2D;return M.addPath(x,new DOMMatrix([Math.cos(C)*b,Math.sin(C)*b,-Math.sin(C)*w,Math.cos(C)*w,m,v])),M}function es(d){if(!a)throw new Error("path confetti are not supported in this browser");var l,m;typeof d=="string"?l=d:(l=d.path,m=d.matrix);var v=new Path2D(l),b=document.createElement("canvas"),w=b.getContext("2d");if(!m){for(var C=1e3,y=C,x=C,M=0,I=0,T,$,A=0;A<C;A+=2)for(var j=0;j<C;j+=2)w.isPointInPath(v,A,j,"nonzero")&&(y=Math.min(y,A),x=Math.min(x,j),M=Math.max(M,A),I=Math.max(I,j));T=M-y,$=I-x;var R=10,O=Math.min(R/T,R/$);m=[O,0,0,O,-Math.round(T/2+y)*O,-Math.round($/2+x)*O]}return{type:"path",path:l,matrix:m}}function ts(d){var l,m=1,v="#000000",b='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof d=="string"?l=d:(l=d.text,m="scalar"in d?d.scalar:m,b="fontFamily"in d?d.fontFamily:b,v="color"in d?d.color:v);var w=10*m,C=""+w+"px "+b,y=new OffscreenCanvas(w,w),x=y.getContext("2d");x.font=C;var M=x.measureText(l),I=Math.ceil(M.actualBoundingBoxRight+M.actualBoundingBoxLeft),T=Math.ceil(M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),$=2,A=M.actualBoundingBoxLeft+$,j=M.actualBoundingBoxAscent+$;I+=$+$,T+=$+$,y=new OffscreenCanvas(I,T),x=y.getContext("2d"),x.font=C,x.fillStyle=v,x.fillText(l,A,j);var R=1/m;return{type:"bitmap",bitmap:y.transferToImageBitmap(),matrix:[R,0,0,R,-I*R/2,-T*R/2]}}t.exports=function(){return st().apply(this,arguments)},t.exports.reset=function(){st().reset()},t.exports.create=tt,t.exports.shapeFromPath=es,t.exports.shapeFromText=ts})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ge,!1);const De=Ge.exports;Ge.exports.create;const He=()=>document.getElementById("confetti-canvas");function Ws(){const o=He();if(!o)return;De.create(o,{resize:!0,useWorker:!0})({particleCount:60,spread:70,origin:{y:.6},colors:["#6c63ff","#ff6b8a","#22c55e","#f59e0b","#3b82f6"],shapes:["circle","square"],gravity:1.2,scalar:.9})}function Rs(){const o=He();if(!o)return;const e=De.create(o,{resize:!0,useWorker:!0}),s=Date.now()+2e3,r=()=>{e({particleCount:4,angle:60,spread:55,origin:{x:0},colors:["#6c63ff","#ff6b8a","#f59e0b"]}),e({particleCount:4,angle:120,spread:55,origin:{x:1},colors:["#22c55e","#3b82f6","#a855f7"]}),Date.now()<s&&requestAnimationFrame(r)};r()}function Gs(){const o=He();if(!o)return;const e=De.create(o,{resize:!0,useWorker:!0});for(let t=0;t<3;t++)setTimeout(()=>{e({particleCount:40,startVelocity:30,spread:360,origin:{x:.2+Math.random()*.6,y:.9},colors:["#6c63ff","#ff6b8a","#22c55e","#f59e0b"],gravity:.8})},t*400)}const Ds={c:"consonant",sv:"short-vowel",lv:"long-vowel",d:"digraph",bl:"blend",se:"silent-e",rc:"r-control",dp:"diphthong",sf:"suffix"},gt={c:"consonant",sv:"short vowel",lv:"long vowel",d:"digraph",bl:"blend",se:"silent e",rc:"r-controlled",dp:"diphthong",sf:"suffix"};function U(o,e,t={}){const{showDiacritics:s=!0,showLabels:r=!1,hiddenIndices:n=[],revealedIndices:a=null}=t;e.innerHTML="";for(let i=0;i<o.graphemes.length;i++){const c=o.graphemes[i],p=o.types[i],h=n.includes(i),g=a===null||a.includes(i),_=document.createElement("div");_.className="phoneme-tile",_.setAttribute("role","listitem");const k=document.createElement("span");if(k.className=`phoneme-symbol phoneme-symbol--${Ds[p]||"consonant"}`,h?(k.textContent="?",k.classList.add("phoneme-symbol--hidden"),k.setAttribute("aria-label","missing sound")):g?(k.textContent=c,k.setAttribute("aria-label",`${c}, ${gt[p]||p}`)):(k.textContent="â€¢",k.classList.add("phoneme-symbol--unrevealed"),k.setAttribute("aria-label","unrevealed sound")),_.appendChild(k),s&&g&&!h){const E=c.toLowerCase().replace("ee","e").replace("ay","a"),W=bs[E];if(W){const L=document.createElement("span");L.className="phoneme-diacritic",p==="sv"?L.textContent=W.sv:p==="lv"&&(L.textContent=W.lv),L.textContent&&_.appendChild(L)}}if(r&&g&&!h){const E=document.createElement("span");E.className="phoneme-label",E.textContent=gt[p]||"",_.appendChild(E)}g&&!h&&(_.style.animationDelay=`${i*100}ms`),e.appendChild(_)}}function X(o,e,t=!0){if(!e)return;e.textContent=t?o.emoji:"";const s=e.closest(".word-image-wrap");s&&(s.style.display=t?"":"none")}let Fe=null,G=0,Ae=0,de=!1;function Hs(o,e){Fe=o,G=0,Ae=Date.now(),de=!1,X(o,e.wordEmoji,!0),e.wordDisplay.innerHTML="",e.modeInstruction.textContent='Press "Next Sound" to hear each sound â€” then blend!',U(o,e.phonemeRow,{showDiacritics:!0,revealedIndices:[]}),ve(e,o,"initial"),e.btnCheck.style.display="none",e.btnSayIt.style.display="none",e.btnSkip.style.display="",u.get("autoplay")&&setTimeout(()=>Oe(o,e),700)}function ve(o,e,t){var a,i,c,p;const s=e.graphemes.length,r=Array.from({length:s},(h,g)=>`<span class="step-dot ${g<G?"filled":""} ${g===G?"current":""}" aria-hidden="true"></span>`).join(""),n=`
    <div class="step-dots" aria-label="Progress: ${G} of ${s} sounds revealed">
      ${r}
    </div>
  `;if(t==="initial"||t==="revealing"){const h=s-G,g=G===0?"â–¶ First Sound":h===1?"â–¶ Last Sound":"â–¶ Next Sound";o.modeArea.innerHTML=`
      <div class="blend-guided-wrap">
        <div class="blend-tip" id="blend-tip">
          ${G===0?"ğŸ‘‚ Listen to each sound and say it out loud!":`Sound ${G} of ${s} â€” keep going!`}
        </div>
        ${n}
        <button class="btn btn--primary btn--xl blend-next-btn" id="btn-reveal-next"
                aria-label="${g}">
          ${g}
        </button>
      </div>
    `,(a=document.getElementById("btn-reveal-next"))==null||a.addEventListener("click",()=>{Oe(e,o)})}else t==="blend"?(o.modeArea.innerHTML=`
      <div class="blend-guided-wrap">
        <div class="blend-blend-cta" id="blend-cta">
          ğŸ”— Now put them together!
        </div>
        ${n}
        <button class="btn btn--success btn--xl" id="btn-blend-now"
                aria-label="Blend all sounds together">
          ğŸ”Š Blend it!
        </button>
      </div>
    `,(i=document.getElementById("btn-blend-now"))==null||i.addEventListener("click",()=>{mt(e,o)}),u.get("autoplay")&&setTimeout(()=>mt(e,o),500)):t==="assess"&&(o.modeArea.innerHTML=`
      <div class="blend-guided-wrap">
        <div class="blend-assess-prompt">Did you blend it right?</div>
        ${n}
        <div class="blend-assess-btns">
          <button class="btn btn--success btn--xl" id="btn-self-yes">Yes! âœ“</button>
          <button class="btn btn--ghost btn--xl"   id="btn-self-no">Not yet</button>
        </div>
      </div>
    `,(c=document.getElementById("btn-self-yes"))==null||c.addEventListener("click",()=>{o.onResult(!0,Date.now()-Ae)}),(p=document.getElementById("btn-self-no"))==null||p.addEventListener("click",()=>{o.onResult(!1,Date.now()-Ae)}))}async function Oe(o,e){if(de||G>=o.graphemes.length)return;de=!0,G++;const t=G-1;U(o,e.phonemeRow,{showDiacritics:!0,revealedIndices:Array.from({length:G},(s,r)=>r)}),await S.speakPhoneme(o.graphemes[t],o.types[t]),await Be(200),de=!1,G>=o.graphemes.length?ve(e,o,"blend"):(ve(e,o,"revealing"),u.get("autoplay")&&(await Be(400),Oe(o,e)))}async function mt(o,e){U(o,e.phonemeRow,{showDiacritics:!0,showLabels:!0,revealedIndices:null}),re(o,e.wordDisplay),await Be(500),await S.speakWord(o.word),e.btnSayIt.style.display="",ve(e,o,"assess")}const Be=o=>new Promise(e=>setTimeout(e,o));function Fs(){return Fe}function Os(){Fe=null,G=0,de=!1}let Ne=null,pe=!1,Pe=0,ye="normal";const Ns={slow:600,normal:320,fast:120};function qs(o,e){Ne=o,pe=!1,Pe=Date.now(),X(o,e.wordEmoji,!0),e.modeInstruction.textContent="Listen to each sound â€” then blend!",U(o,e.phonemeRow,{showDiacritics:!0,showLabels:!0,revealedIndices:null}),Et(e,o),e.btnCheck.style.display="none",e.btnSayIt.style.display="none",e.btnSkip.style.display="",u.get("autoplay")&&setTimeout(()=>We(o,e),500)}function Us(){const o=u.get("currentGroup")||"",e=o?"":"selected",t=(s,r)=>`<option value="${s}" ${o===s?"selected":""}>${r.icon} ${r.label}</option>`;return[`<option value="" ${e}>ğŸ”¤ All Words</option>`,'<optgroup label="â”€â”€ By Vowel Sound â”€â”€">',...je.map(s=>t(s,Z[s])),"</optgroup>",'<optgroup label="â”€â”€ By Word Pattern â”€â”€">',...xs.map(s=>t(s,Z[s])),"</optgroup>",'<optgroup label="â”€â”€ By Suffix â”€â”€">',...Ss.map(s=>t(s,Z[s])),"</optgroup>"].join("")}function Et(o,e,t=!1){var r,n,a,i,c;const s=["slow","normal","fast"].map(p=>{const h={slow:"ğŸ¢ Slow",normal:"â–¶ Normal",fast:"âš¡ Fast"}[p];return`<button class="speed-btn ${ye===p?"speed-btn--active":""}" data-speed="${p}" aria-label="Set speed to ${p}">${h}</button>`}).join("");o.modeArea.innerHTML=`
    <div class="classic-blend-wrap">

      <!-- Category selector -->
      <div class="category-row">
        <label class="category-label" for="classic-group-select">Category:</label>
        <select id="classic-group-select" class="category-select" aria-label="Choose word category">
          ${Us()}
        </select>
      </div>

      <!-- Speed control -->
      <div class="speed-row" role="group" aria-label="Playback speed">
        <span class="speed-label">Speed:</span>
        <div class="speed-btns">${s}</div>
      </div>

      <!-- Play buttons -->
      <div class="classic-btn-row">
        <button class="btn btn--primary btn--xl" id="btn-classic-play" aria-label="Play all sounds">
          â–¶ Play Sounds
        </button>
        ${t?`
        <button class="btn btn--ghost btn--xl" id="btn-classic-again" aria-label="Play again">
          ğŸ” Again
        </button>
        `:""}
      </div>

      <!-- Self-assessment (after first play) -->
      ${t?`
      <div class="classic-assess-row">
        <button class="btn btn--success btn--xl" id="btn-self-yes" aria-label="Yes, I blended it!">
          Yes! âœ“
        </button>
        <button class="btn btn--ghost btn--xl" id="btn-self-no" aria-label="Not quite yet">
          Not yet
        </button>
      </div>
      `:""}

    </div>
  `,(r=document.getElementById("classic-group-select"))==null||r.addEventListener("change",p=>{var g;const h=p.target.value||null;u.set("currentGroup",h),(g=o.onGroupChange)==null||g.call(o,h)}),(n=document.getElementById("btn-classic-play"))==null||n.addEventListener("click",()=>{We(e,o)}),(a=document.getElementById("btn-classic-again"))==null||a.addEventListener("click",()=>{We(e,o)}),(i=document.getElementById("btn-self-yes"))==null||i.addEventListener("click",()=>{o.onResult(!0,Date.now()-Pe)}),(c=document.getElementById("btn-self-no"))==null||c.addEventListener("click",()=>{o.onResult(!1,Date.now()-Pe)}),o.modeArea.querySelectorAll(".speed-btn").forEach(p=>{p.addEventListener("click",()=>{ye=p.dataset.speed,o.modeArea.querySelectorAll(".speed-btn").forEach(h=>{h.classList.toggle("speed-btn--active",h.dataset.speed===ye)})})})}async function We(o,e){if(pe)return;pe=!0;const t=e.phonemeRow.querySelectorAll(".phoneme-tile"),s=Ns[ye]??320;for(let r=0;r<o.graphemes.length;r++)t.forEach((n,a)=>n.classList.toggle("active",a===r)),await S.speakPhoneme(o.graphemes[r],o.types[r]),await ft(s);t.forEach(r=>r.classList.remove("active")),await ft(Math.min(s,300)),await S.speakWord(o.word),pe=!1,Et(e,o,!0),e.btnSayIt.style.display=""}const ft=o=>new Promise(e=>setTimeout(e,o));function zs(){return Ne}function Ys(){Ne=null,pe=!1}let qe=null,be=!1,Lt=0;function Xs(o,e){qe=o,be=!1,Lt=Date.now(),X(o,e.wordEmoji,!1),e.wordDisplay.innerHTML="",e.phonemeRow.innerHTML="",e.modeInstruction.textContent="Listen to the word, then pick the right one!";const t=Cs(o,3),s=F([o,...t]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const r=e.modeArea.querySelector(".choice-grid");for(const n of s){const a=document.createElement("button");a.className="choice-btn",a.textContent=n.word,a.dataset.wordId=n.id,a.setAttribute("aria-label",`Choose ${n.word}`),a.addEventListener("click",()=>Ks(n,a,o,e,r)),r.appendChild(a)}e.btnSayIt.style.display="",e.btnCheck.style.display="none",e.btnSkip.style.display="",setTimeout(()=>S.speakWord(o.word),400)}function Ks(o,e,t,s,r){if(be)return;be=!0;const n=Date.now()-Lt,a=o.id===t.id;r.querySelectorAll(".choice-btn").forEach(i=>{i.disabled=!0,i.dataset.wordId===t.id&&i.classList.add("correct")}),a||e.classList.add("wrong"),X(t,s.wordEmoji,!0),re(t,s.wordDisplay),U(t,s.phonemeRow,{showDiacritics:!0}),setTimeout(()=>S.speakWord(t.word),500),setTimeout(()=>{s.onResult(a,n)},a?800:1500)}function Zs(){return qe}function Js(){qe=null,be=!1}let Ue=null,D=[],K=[],Mt=0;function Qs(o,e){Ue=o,D=[],K=[],Mt=Date.now(),X(o,e.wordEmoji,!0),re(o,e.wordDisplay),e.phonemeRow.innerHTML="",e.modeInstruction.textContent="Tap letters that go together to make each sound!";const t=o.word.split("");e.modeArea.innerHTML=`
    <div class="segment-word" id="segment-letters" aria-label="Tap letters to group them into sounds"></div>
    <div class="segment-targets" id="segment-targets" aria-label="Sound groups found"></div>
  `;const s=document.getElementById("segment-letters"),r=document.getElementById("segment-targets");for(let n=0;n<o.graphemes.length;n++){const a=document.createElement("div");a.className="segment-slot",a.dataset.index=n,a.setAttribute("aria-label",`Sound ${n+1}`),r.appendChild(a)}t.forEach((n,a)=>{const i=document.createElement("button");i.className="segment-btn",i.textContent=n,i.dataset.index=a,i.setAttribute("aria-label",`Letter ${n}`),i.addEventListener("click",()=>er(a,n,i,o,e)),s.appendChild(i)}),e.btnCheck.style.display="",e.btnCheck.onclick=()=>tr(o,e),e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>S.speakWord(o.word),400)}function er(o,e,t,s,r){t.classList.contains("selected")?(t.classList.remove("selected"),D=D.filter(i=>i.index!==o)):(t.classList.add("selected"),D.push({index:o,letter:e}),D.sort((i,c)=>i.index-c.index));const n=D.map(i=>i.letter).join(""),a=s.graphemes[K.length];a&&n===a&&Tt(s,r)}function Tt(o,e){if(D.length===0)return;const t=D.map(r=>r.letter).join(""),s=o.graphemes[K.length];if(t===s){K.push(t);const r=document.getElementById("segment-letters");D.forEach(c=>{const p=r.querySelectorAll(".segment-btn");p[c.index].classList.remove("selected"),p[c.index].classList.add("matched"),p[c.index].disabled=!0});const a=document.querySelectorAll(".segment-slot")[K.length-1];a&&(a.textContent=t,a.classList.add("filled"));const i=K.length-1;S.speakPhoneme(o.graphemes[i],o.types[i]),D=[],K.length===o.graphemes.length&&sr(o,e)}else{const r=document.getElementById("segment-letters");D.forEach(n=>{const a=r.querySelectorAll(".segment-btn");a[n.index].classList.add("wrong"),a[n.index].classList.remove("selected"),setTimeout(()=>a[n.index].classList.remove("wrong"),500)}),D=[]}}function tr(o,e){D.length>0&&Tt(o,e)}function sr(o,e){const t=Date.now()-Mt;U(o,e.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(()=>S.speakWord(o.word),300),setTimeout(()=>{e.onResult(!0,t)},1e3)}function rr(){return Ue}function or(){Ue=null,D=[],K=[]}let ze=null,H=-1,we=!1,It=0;function nr(o,e){ze=o,we=!1,It=Date.now();const t=o.types.map((h,g)=>h==="sv"||h==="lv"?g:-1).filter(h=>h>=0);t.length>0?H=t[Math.floor(Math.random()*t.length)]:H=Math.floor(Math.random()*o.graphemes.length),o.types[H]==="se"&&o.graphemes.length>1&&(H=0),X(o,e.wordEmoji,!0);const s=e.wordDisplay;s.innerHTML="",o.graphemes.forEach((h,g)=>{const _=document.createElement("div"),k={c:"consonant",sv:"short-vowel",lv:"long-vowel",d:"digraph",bl:"blend",se:"silent-e",rc:"r-control"}[o.types[g]]||"consonant";_.className=`letter-tile letter-tile--${k}`,_.textContent=g===H?"?":h,g===H&&(_.style.background="var(--border)",_.style.color="var(--text-muted)",_.style.fontSize="var(--font-size-3xl)"),s.appendChild(_)}),U(o,e.phonemeRow,{showDiacritics:!0,hiddenIndices:[H]}),e.modeInstruction.textContent="Which sound is missing?";const r=o.graphemes[H],n=o.types[H],a=ir(r,n),i=F(a).slice(0,3),c=F([{grapheme:r,type:n,correct:!0},...i.map(h=>({grapheme:h,type:n,correct:!1}))]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const p=e.modeArea.querySelector(".choice-grid");for(const h of c){const g=document.createElement("button");g.className="choice-btn",g.textContent=h.grapheme,g.dataset.correct=h.correct,g.setAttribute("aria-label",`Choose ${h.grapheme}`),g.addEventListener("click",()=>ar(h,g,o,e,p)),p.appendChild(g)}e.btnCheck.style.display="none",e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>S.speakWord(o.word),400)}function ar(o,e,t,s,r){if(we)return;we=!0;const n=Date.now()-It;r.querySelectorAll(".choice-btn").forEach(a=>{a.disabled=!0,a.dataset.correct==="true"&&a.classList.add("correct")}),o.correct||e.classList.add("wrong"),re(t,s.wordDisplay),U(t,s.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(async()=>{await S.speakPhoneme(t.graphemes[H],t.types[H]),await new Promise(a=>setTimeout(a,300)),await S.speakWord(t.word)},300),setTimeout(()=>{s.onResult(o.correct,n)},o.correct?800:1500)}function ir(o,e){const t=new Set;for(const s of V)for(let r=0;r<s.graphemes.length;r++)s.types[r]===e&&s.graphemes[r]!==o&&t.add(s.graphemes[r]);return Array.from(t)}function lr(){return ze}function cr(){ze=null,H=-1,we=!1}let Ye=null,Ce=!1,$t=0;function dr(o,e){Ye=o,Ce=!1,$t=Date.now(),X(o,e.wordEmoji,!0),e.wordDisplay.innerHTML="",e.phonemeRow.innerHTML="",e.modeInstruction.textContent="What sound does this word start with?";const t=o.graphemes[0],s=o.types[0],r=hr(t),n=F(r).slice(0,3),a=F([{grapheme:t,type:s,correct:!0},...n.map(c=>({grapheme:c.grapheme,type:c.type,correct:!1}))]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const i=e.modeArea.querySelector(".choice-grid");for(const c of a){const p=document.createElement("button");p.className="choice-btn",p.textContent=c.grapheme.toUpperCase(),p.dataset.correct=c.correct,p.setAttribute("aria-label",`Choose ${c.grapheme}`),p.addEventListener("mouseenter",()=>{S.speakPhoneme(c.grapheme,c.type)}),p.addEventListener("click",()=>pr(c,p,o,e,i)),i.appendChild(p)}e.btnCheck.style.display="none",e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>S.speakWord(o.word),400)}function pr(o,e,t,s,r){if(Ce)return;Ce=!0;const n=Date.now()-$t;r.querySelectorAll(".choice-btn").forEach(a=>{a.disabled=!0,a.dataset.correct==="true"&&a.classList.add("correct")}),o.correct||e.classList.add("wrong"),re(t,s.wordDisplay),U(t,s.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(async()=>{await S.speakPhoneme(t.graphemes[0],t.types[0]),await new Promise(a=>setTimeout(a,300)),await S.speakWord(t.word)},300),setTimeout(()=>{s.onResult(o.correct,n)},o.correct?800:1500)}function hr(o,e){const t=new Set([o]),s=[];for(const r of F(V)){const n=r.graphemes[0],a=r.types[0];if(!t.has(n)&&(t.add(n),s.push({grapheme:n,type:a}),s.length>=6))break}return s}function ur(){return Ye}function gr(){Ye=null,Ce=!1}let Xe=null,xe=!1,Vt=0;function mr(o,e){Xe=o,xe=!1,Vt=Date.now(),X(o,e.wordEmoji,!0),e.wordDisplay.innerHTML="",e.phonemeRow.innerHTML="",e.modeInstruction.textContent="What sound does this word end with?";const t=o.graphemes.length-1,s=o.graphemes[t],r=o.types[t],n=yr(s),a=F([{grapheme:s,type:r,correct:!0},...n.slice(0,3).map(c=>({...c,correct:!1}))]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const i=e.modeArea.querySelector(".choice-grid");for(const c of a){const p=document.createElement("button");p.className="choice-btn",p.textContent=c.grapheme.toUpperCase(),p.dataset.correct=c.correct,p.setAttribute("aria-label",`Choose ${c.grapheme}`),p.addEventListener("mouseenter",()=>S.speakPhoneme(c.grapheme,c.type)),p.addEventListener("click",()=>fr(c,p,o,e,i,t)),i.appendChild(p)}e.btnCheck.style.display="none",e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>S.speakWord(o.word),400)}function fr(o,e,t,s,r,n){if(xe)return;xe=!0;const a=Date.now()-Vt;r.querySelectorAll(".choice-btn").forEach(i=>{i.disabled=!0,i.dataset.correct==="true"&&i.classList.add("correct")}),o.correct||e.classList.add("wrong"),re(t,s.wordDisplay),U(t,s.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(async()=>{await S.speakPhoneme(t.graphemes[n],t.types[n]),await new Promise(i=>setTimeout(i,300)),await S.speakWord(t.word)},300),setTimeout(()=>{s.onResult(o.correct,a)},o.correct?800:1500)}function yr(o,e){const t=new Set([o]),s=[];for(const r of F(V)){const n=r.graphemes.length-1,a=r.graphemes[n],i=r.types[n];if(!t.has(a)&&(t.add(a),s.push({grapheme:a,type:i}),s.length>=6))break}return s}function vr(){return Xe}function br(){Xe=null,xe=!1}const At=new Set(["sv","lv","rc","dp"]);let Ke=null,Se=!1,Bt=0;function wr(o,e){Ke=o,Se=!1,Bt=Date.now(),X(o,e.wordEmoji,!0),e.wordDisplay.innerHTML="",e.phonemeRow.innerHTML="",e.modeInstruction.textContent="What is the middle sound in this word?";const t=xr(o),s=o.graphemes[t],r=o.types[t],n=Sr(s),a=F([{grapheme:s,type:r,correct:!0},...n.slice(0,3).map(c=>({...c,correct:!1}))]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const i=e.modeArea.querySelector(".choice-grid");for(const c of a){const p=document.createElement("button");p.className="choice-btn",p.textContent=c.grapheme.toUpperCase(),p.dataset.correct=c.correct,p.setAttribute("aria-label",`Choose ${c.grapheme}`),p.addEventListener("mouseenter",()=>S.speakPhoneme(c.grapheme,c.type)),p.addEventListener("click",()=>Cr(c,p,o,e,i,t)),i.appendChild(p)}e.btnCheck.style.display="none",e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>S.speakWord(o.word),400)}function Cr(o,e,t,s,r,n){if(Se)return;Se=!0;const a=Date.now()-Bt;r.querySelectorAll(".choice-btn").forEach(i=>{i.disabled=!0,i.dataset.correct==="true"&&i.classList.add("correct")}),o.correct||e.classList.add("wrong"),re(t,s.wordDisplay),U(t,s.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(async()=>{await S.speakPhoneme(t.graphemes[n],t.types[n]),await new Promise(i=>setTimeout(i,300)),await S.speakWord(t.word)},300),setTimeout(()=>{s.onResult(o.correct,a)},o.correct?800:1500)}function xr(o){const e=o.graphemes.length>2?1:0,t=o.graphemes.length>2?o.graphemes.length-2:o.graphemes.length-1;for(let s=e;s<=t;s++)if(At.has(o.types[s]))return s;return Math.floor(o.graphemes.length/2)}function Sr(o){const e=new Set([o]),t=[];for(const s of F(V)){for(let r=0;r<s.graphemes.length;r++){const n=s.graphemes[r],a=s.types[r];if(!e.has(n)&&At.has(a)&&(e.add(n),t.push({grapheme:n,type:a}),t.length>=6))break}if(t.length>=6)break}if(t.length<3)for(const s of F(V)){const r=s.graphemes[0],n=s.types[0];if(!e.has(r)&&(e.add(r),t.push({grapheme:r,type:n}),t.length>=6))break}return t}function jr(){return Ke}function _r(){Ke=null,Se=!1}const yt={blend:{key:"blend",name:"Blend It!",desc:"Step by step â€” for new decoders",icon:"ğŸ¯",group:"blend",setup:Hs,cleanup:Os,getCurrentWord:Fs},classicBlend:{key:"classicBlend",name:"Listen & Blend",desc:"Free mode â€” for confident learners",icon:"ğŸ”Š",group:"blend",setup:qs,cleanup:Ys,getCurrentWord:zs},hear:{key:"hear",name:"Hear & Choose",desc:"Listen carefully",icon:"ğŸ‘‚",group:"phonemic",setup:Xs,cleanup:Js,getCurrentWord:Zs},segment:{key:"segment",name:"Segment It",desc:"Break it apart",icon:"âœ‚ï¸",group:"phonemic",setup:Qs,cleanup:or,getCurrentWord:rr},missing:{key:"missing",name:"Missing Sound",desc:"Find the gap",icon:"ğŸ”",group:"phonemic",setup:nr,cleanup:cr,getCurrentWord:lr},first:{key:"first",name:"First Sound",desc:"What starts it?",icon:"ğŸš€",group:"phonemic",setup:dr,cleanup:gr,getCurrentWord:ur},last:{key:"last",name:"Last Sound",desc:"What ends it?",icon:"ğŸ¯",group:"phonemic",setup:mr,cleanup:br,getCurrentWord:vr},middle:{key:"middle",name:"Middle Sound",desc:"Find the vowel!",icon:"ğŸ¯",group:"phonemic",setup:wr,cleanup:_r,getCurrentWord:jr}},f="Puff puff puff! Ears wiggle!",Re=[{level:1,label:"Tiny Steams",targetSounds:"Short a Â· e Â· i Â· o Â· u",prop:"ğŸ© Red Hat",color:"#ef4444",bg:"#fee2e2",mascotState:"holdCard"},{level:2,label:"Rising Steams",targetSounds:"a-e Â· i-e Â· o-e Â· ai Â· ay Â· ee Â· oa",prop:"ğŸ‚ Big Cake",color:"#f97316",bg:"#ffedd5",mascotState:"celebrate"},{level:3,label:"Wild Steams",targetSounds:"ar Â· or Â· er Â· ir Â· ur + digraphs",prop:"â­ Shiny Star",color:"#8b5cf6",bg:"#f3e8ff",mascotState:"thinking"},{level:4,label:"Grand Steams",targetSounds:"oi Â· oy Â· ou Â· ow Â· au Â· aw Â· air Â· are Â· ear",prop:"ğŸ Rare Pear",color:"#0d9488",bg:"#ccfbf1",mascotState:"trophy"}],Pt=[{id:"giri-red-hat",title:"Giri's Red Hat",level:1,emoji:"ğŸ©",mascotState:"holdCard",lines:[{type:"intro",text:"Giri sat in the hot pot. The red hat sat on top."},{type:"label",text:"Problem:"},{type:"beat",text:"The red hat slid off."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri put the red hat on."},{type:"label",text:"Setback:"},{type:"beat",text:"The red hat slid off."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri sat on the mat and held the red hat."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-and-the-pot",title:"Giri and the Pot",level:1,emoji:"ğŸ²",mascotState:"encourage",lines:[{type:"intro",text:"Giri had a big pot on the mat."},{type:"label",text:"Problem:"},{type:"beat",text:"The big pot tipped."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran to the big pot."},{type:"label",text:"Setback:"},{type:"beat",text:"The big pot tipped and got the mat wet."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri sat in the big pot."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-and-the-bun",title:"Giri and the Bun",level:1,emoji:"ğŸ",mascotState:"neutral",lines:[{type:"intro",text:"Giri met a fat bun on the rug."},{type:"label",text:"Problem:"},{type:"beat",text:"The fat bun ran off."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran to the fat bun."},{type:"label",text:"Setback:"},{type:"beat",text:"The fat bun ran."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri sat on the rug. The fat bun sat too."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-gets-wet",title:"Giri Gets Wet",level:1,emoji:"ğŸ’§",mascotState:"encourage",lines:[{type:"intro",text:"Giri ran to the sink. The sink had suds."},{type:"label",text:"Problem:"},{type:"beat",text:"The suds got Giri wet."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran off the sink."},{type:"label",text:"Setback:"},{type:"beat",text:"The suds got the red hat wet."},{type:"label",text:"Solution:"},{type:"beat",text:"The fan spun. The fan made Giri dry."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri sat on the mat and felt glad."}]},{id:"giri-bakes-a-cake",title:"Giri Bakes a Cake",level:2,emoji:"ğŸ‚",mascotState:"holdCard",lines:[{type:"intro",text:"Giri had a big cake to bake."},{type:"label",text:"Problem:"},{type:"beat",text:"The cake did not rise."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri put the cake in the pan."},{type:"label",text:"Setback:"},{type:"beat",text:"The cake stayed flat."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri made the cake rise by the lake."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri and the bun ate the big cake and felt glad."}]},{id:"giri-and-the-speedy-boat",title:"Giri and the Speedy Boat",level:2,emoji:"â›µ",mascotState:"celebrate",lines:[{type:"intro",text:"Giri had a speedy boat on the lake."},{type:"label",text:"Problem:"},{type:"beat",text:"The boat did not go fast."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri made the boat go."},{type:"label",text:"Setback:"},{type:"beat",text:"The oar fell in the lake."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri and the bun played and the boat went fast."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-helps-the-bee",title:"Giri Helps the Bee",level:2,emoji:"ğŸ",mascotState:"pointRight",lines:[{type:"intro",text:"Giri met a bee by the tree."},{type:"label",text:"Problem:"},{type:"beat",text:"The bee lost its way."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri took the bee to the big tree."},{type:"label",text:"Setback:"},{type:"beat",text:"The bee still felt sad."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri gave the bee a sweet treat."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giris-big-day",title:"Giri's Big Day",level:2,emoji:"ğŸ¡",mascotState:"clap",lines:[{type:"intro",text:"Giri went to the fair with the big cake."},{type:"label",text:"Problem:"},{type:"beat",text:"The big cake got hot."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri hid the big cake in the shade."},{type:"label",text:"Setback:"},{type:"beat",text:"The big cake got soft."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri and the bun ate the big cake fast."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-and-the-big-storm",title:"Giri and the Big Storm",level:3,emoji:"â›ˆï¸",mascotState:"thinking",lines:[{type:"intro",text:"Giri saw a big storm."},{type:"label",text:"Problem:"},{type:"beat",text:"The wind took the shiny star."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran to the barn."},{type:"label",text:"Setback:"},{type:"beat",text:"The rain made the barn wet."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri sat in the barn with the shiny star."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-finds-a-star",title:"Giri Finds a Star",level:3,emoji:"â­",mascotState:"celebrate",lines:[{type:"intro",text:"Giri walked at night."},{type:"label",text:"Problem:"},{type:"beat",text:"The shiny star fell down."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran to pick the shiny star up."},{type:"label",text:"Setback:"},{type:"beat",text:"The shiny star hid in the grass."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri and the bird sat by the river and the shiny star shone."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-and-the-clever-bird",title:"Giri and the Clever Bird",level:3,emoji:"ğŸ¦",mascotState:"pointLeft",lines:[{type:"intro",text:"A bird sat on the branch."},{type:"label",text:"Problem:"},{type:"beat",text:"Giri lost the shiny star."},{type:"label",text:"Attempt:"},{type:"beat",text:"The bird flew to help."},{type:"label",text:"Setback:"},{type:"beat",text:"The bird could not see the shiny star."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri and the bird went over the farm and got the shiny star."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-at-the-market",title:"Giri at the Market",level:3,emoji:"ğŸª",mascotState:"whiteboard",lines:[{type:"intro",text:"Giri went to the market."},{type:"label",text:"Problem:"},{type:"beat",text:"The shiny star rolled away."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran after the shiny star."},{type:"label",text:"Setback:"},{type:"beat",text:"The shiny star went under a cart."},{type:"label",text:"Solution:"},{type:"beat",text:"A kind man helped. Giri got the shiny star back."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-at-the-fair",title:"Giri at the Fair",level:4,emoji:"ğŸ¡",mascotState:"celebrate",lines:[{type:"intro",text:"Giri saw a pair of chairs at the fair."},{type:"label",text:"Problem:"},{type:"beat",text:"One chair had a big tear."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri tried to sit on the chair."},{type:"label",text:"Setback:"},{type:"beat",text:"The chair broke and made a big noise."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri made the pair of chairs safe with care."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-and-the-joyful-noise",title:"Giri and the Joyful Noise",level:4,emoji:"ğŸ¶",mascotState:"clap",lines:[{type:"intro",text:"Giri heard a joyful noise."},{type:"label",text:"Problem:"},{type:"beat",text:"The noise came from far."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran near the noise."},{type:"label",text:"Setback:"},{type:"beat",text:"The noise got too loud."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri made the joyful noise with all his friends."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-repairs-the-chair",title:"Giri Repairs the Chair",level:4,emoji:"ğŸª‘",mascotState:"thinking",lines:[{type:"intro",text:"The old chair had a big tear."},{type:"label",text:"Problem:"},{type:"beat",text:"The chair could not be sat on."},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri took glue to fix the tear."},{type:"label",text:"Setback:"},{type:"beat",text:"The glue made the tear bigger."},{type:"label",text:"Solution:"},{type:"beat",text:"Giri used a pair of pliers with care and fixed the chair."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri felt glad."}]},{id:"giri-hears-a-cheer",title:"Giri Hears a Cheer",level:4,emoji:"ğŸ‰",mascotState:"confetti",lines:[{type:"intro",text:"One clear day Giri sat near the big steamer."},{type:"label",text:"Problem:"},{type:"beat",text:'He felt a little fear. "Where are my dear friends?"'},{type:"label",text:"Attempt:"},{type:"beat",text:"Giri ran to look near the pier."},{type:"label",text:"Setback:"},{type:"beat",text:"No one came and a tear came to his eye."},{type:"label",text:"Solution:"},{type:"beat",text:"He heard a big cheer! All his friends came with a rare pear cake."},{type:"refrain",text:f},{type:"refrain",text:f},{type:"refrain",text:f},{type:"end",text:"Giri shared the rare pear cake and felt glad. This is the best day of the year!"}]}],vt=["the","a","and","to","my","on","in","up","off","said","is","it"],kr=["the","a","and","to","my","on","in","up","off","said","is","it","i","he","she","we","me","be","do","go","so","no","all","are","at","by","for","had","has","have","her","here","him","his","how","if","into","like","look","not","now","of","one","our","out","put","see","some","that","their","them","then","there","they","this","too","two","was","were","went","what","when","where","who","will","with","you","your","an","as","but","can","come","came","did","does","down","eat","find","from","get","give","got","help","jump","just","know","let","little","made","make","may","more","much","must","new","old","once","open","over","own","play","please","pretty","ran","read","run","say","stop","take","thank","think","too","under","very","walk","well","which","why","yes","am","away","big","blue","can","come","down","find","for","funny","go","help","here","jump","little","look","make","me","my","not","one","play","red","run","said","see","the","three","to","two","up","we","where","yellow","you","felt","glad","too","got","sat","ran","had","met"],Er=new Set(kr.map(o=>o.toLowerCase()));function Ze(o){const e=o.toLowerCase().replace(/[^a-z]/g,"");return Er.has(e)}function Lr(o){const e=new Set;for(const s of o.lines)if(s.text)for(const r of s.text.split(/\s+/)){const n=r.toLowerCase().replace(/[^a-z]/g,"");n&&Ze(n)&&e.add(n)}const t=vt.filter(s=>e.has(s));for(const s of e)vt.includes(s)||t.push(s);return t}const Mr="/blending/";function Wt(o){const e={neutral:"giri-neutral.png",celebrate:"giri-celebrate.png",confetti:"giri-celebrate-confetti.png",clap:"giri-clap-frame.png",encourage:"giri-encourage.png",holdCard:"giri-hold-card.png",pointLeft:"giri-point-left.png",pointRight:"giri-point-right.png",thinking:"giri-thinking.png",trophy:"giri-trophy.png",whiteboard:"giri-whiteboard.png"};return`${Mr}images/mascot/${e[o]??e.neutral}`}function Tr(o){const e=o.toLowerCase().replace(/[^a-z]/g,"");return V.find(t=>t.word===e)??null}function Ir(o){return o.split(/(\s+|["""'',.!?;:()\-]+)/).filter(t=>t.length>0).map(t=>({text:t,type:/^\s+$/.test(t)?"space":/^[^a-zA-Z0-9]+$/.test(t)?"punct":"word"}))}let B=null,ie=1,le="aloud",ge=!1,Je=null;function $r(o,e){B=o}function Vr(){J(),Qe()}function Ar(){J(),Je=null}function Qe(){const o=Re[ie-1],e=Pt.filter(r=>r.level===ie),t=Re.map(r=>`
    <button
      class="story-tab${r.level===ie?" active":""}"
      data-level="${r.level}"
      style="--tab-color:${r.color}"
    >
      <span class="story-tab-num">L${r.level}</span>
      <span class="story-tab-name">${r.label}</span>
    </button>
  `).join(""),s=e.map(r=>`
    <button class="story-card" data-story-id="${r.id}">
      <div class="story-card-illo" style="background:${o.bg}">
        <img
          src="${Wt(r.mascotState)}"
          alt="Giri"
          class="story-card-mascot"
          draggable="false"
        />
        <span class="story-card-prop">${r.emoji}</span>
      </div>
      <span class="story-card-title">${r.title}</span>
      <span class="story-card-level" style="color:${o.color}">Level ${r.level}</span>
    </button>
  `).join("");B.innerHTML=`
    <div class="stories-browser">
      <div class="stories-tabs" role="tablist" aria-label="Story levels">${t}</div>
      <div class="stories-level-strip"
           style="--level-color:${o.color};--level-bg:${o.bg}">
        <span class="slstrip-label">Level ${ie}</span>
        <span class="slstrip-name">${o.label}</span>
        <span class="slstrip-sounds">${o.targetSounds}</span>
        <span class="slstrip-prop">${o.prop}</span>
      </div>
      <div class="story-cards-grid">${s}</div>
    </div>
  `,B.querySelectorAll(".story-tab").forEach(r=>{r.addEventListener("click",()=>{ie=parseInt(r.dataset.level,10),Qe()})}),B.querySelectorAll(".story-card").forEach(r=>{r.addEventListener("click",()=>Br(r.dataset.storyId))})}function Br(o){const e=Pt.find(t=>t.id===o);e&&(J(),Pr(e))}function Pr(o){var t,s,r;const e=Re[o.level-1];B.innerHTML=`
    <div class="story-reader">

      <!-- Illustration header -->
      <div class="story-illo" style="--level-color:${e.color};--level-bg:${e.bg}">
        <img src="${Wt(o.mascotState)}" alt="Giri â€” ${o.title}"
             class="story-illo-mascot" draggable="false"/>
        <span class="story-illo-prop">${o.emoji}</span>
        <div class="story-illo-steam"><span></span><span></span><span></span></div>
      </div>

      <!-- Meta bar -->
      <div class="story-meta-bar" style="--level-color:${e.color}">
        <button class="btn btn--ghost story-lib-btn" id="btn-reader-back">â† Library</button>
        <span class="story-meta-badge">Level ${o.level} Â· ${e.label}</span>
      </div>

      <!-- Title -->
      <h2 class="story-reader-title">${o.title}</h2>

      <!-- Mode toggle -->
      <div class="story-mode-toggle" role="group" aria-label="Reading mode">
        <button class="smode-btn${le==="aloud"?" active":""}" data-mode="aloud"  id="btn-mode-aloud">
          ğŸ“– Read Aloud
        </button>
        <button class="smode-btn${le==="decode"?" active":""}" data-mode="decode" id="btn-mode-decode">
          ğŸ”¤ Decode Mode
        </button>
      </div>

      <!-- Dynamic content area (pre-teach + story body + controls) -->
      <div id="story-dynamic" class="story-dynamic"></div>

    </div>
  `,(t=document.getElementById("btn-reader-back"))==null||t.addEventListener("click",()=>{J(),Qe()}),(s=document.getElementById("btn-mode-aloud"))==null||s.addEventListener("click",()=>{le="aloud",J(),bt("aloud"),wt(o)}),(r=document.getElementById("btn-mode-decode"))==null||r.addEventListener("click",()=>{le="decode",J(),bt("decode"),Ct(o)}),le==="aloud"?wt(o):Ct(o)}function bt(o){document.querySelectorAll(".smode-btn").forEach(e=>{e.classList.toggle("active",e.dataset.mode===o)})}function wt(o){var s,r;const e=document.getElementById("story-dynamic");if(!e)return;const t=o.lines.map((n,a)=>Wr(n,a)).join("");e.innerHTML=`
    <div class="story-body" id="story-body" aria-live="polite">${t}</div>
    <div class="story-tts-bar">
      <button class="btn btn--primary btn--xl" id="btn-story-play" aria-label="Read aloud">
        â–¶ Read Aloud
      </button>
      <button class="btn btn--ghost btn--xl" id="btn-story-stop" style="display:none" aria-label="Stop">
        â¹ Stop
      </button>
    </div>
  `,(s=document.getElementById("btn-story-play"))==null||s.addEventListener("click",()=>Hr(o)),(r=document.getElementById("btn-story-stop"))==null||r.addEventListener("click",()=>J())}function Wr(o,e){switch(o.type){case"label":return`<div class="sline sline--label" data-line="${e}">${o.text}</div>`;case"beat":return`<p class="sline sline--beat"  data-line="${e}">${o.text}</p>`;case"intro":return`<p class="sline sline--intro" data-line="${e}">${o.text}</p>`;case"refrain":return`<div class="sline sline--refrain" data-line="${e}">ğŸ«§ ${o.text}</div>`;case"end":return`<p class="sline sline--end"   data-line="${e}">${o.text}</p>`;default:return`<p class="sline" data-line="${e}">${o.text}</p>`}}function Ct(o){var n;const e=document.getElementById("story-dynamic");if(!e)return;const s=Lr(o).map(a=>`
    <button class="hfw-chip" data-word="${a}" aria-label="Hear sight word ${a}">
      â­ ${a}
    </button>
  `).join(""),r=o.lines.map((a,i)=>{if(a.type==="label")return`<div class="sline sline--label" data-line="${i}">${a.text}</div>`;if(a.type==="refrain")return`<div class="sline sline--refrain" data-line="${i}">ğŸ«§ ${a.text}</div>`;const p=Ir(a.text).map(g=>{if(g.type==="word"){const _=g.text.toLowerCase().replace(/[^a-z]/g,""),k=Ze(_);return`<button class="decode-word${k?" decode-hfw":""}"
                         data-word="${g.text}"
                         aria-label="${k?"Sight word: ":"Decode: "}${g.text}"
                >${g.text}</button>`}return`<span class="decode-punct">${g.text}</span>`}).join("");return`<p class="sline ${{intro:"sline--intro",beat:"sline--beat",end:"sline--end"}[a.type]??""} decode-line" data-line="${i}">${p}</p>`}).join("");e.innerHTML=`
    <!-- Sight word pre-teach -->
    <div class="hfw-preteach" id="hfw-preteach">
      <div class="hfw-preteach-header">
        <span class="hfw-preteach-title">â­ Sight Words in this story</span>
        <button class="hfw-toggle-btn" id="btn-hfw-toggle" aria-expanded="true" aria-controls="hfw-chip-list">
          Hide â–²
        </button>
      </div>
      <div id="hfw-chip-list" class="hfw-chip-list">
        ${s.length?s:'<span class="hfw-none">None â€” all words are fully decodable!</span>'}
        <p class="hfw-tip">Tap each word to hear it. These words are read aloud in the story.</p>
      </div>
    </div>

    <!-- Decode-mode story body -->
    <div class="story-body decode-body" id="story-body" aria-live="polite">
      ${r}
    </div>

    <!-- Decode panel (slides up when a word is tapped) -->
    <div class="decode-panel" id="decode-panel" aria-live="polite" hidden>
      <div class="decode-panel-inner" id="decode-panel-inner">
        <!-- filled dynamically -->
      </div>
    </div>
  `,(n=document.getElementById("btn-hfw-toggle"))==null||n.addEventListener("click",()=>{const a=document.getElementById("hfw-chip-list"),i=document.getElementById("btn-hfw-toggle"),c=i.getAttribute("aria-expanded")==="true";a.hidden=c,i.setAttribute("aria-expanded",String(!c)),i.textContent=c?"Show â–¼":"Hide â–²"}),e.querySelectorAll(".hfw-chip").forEach(a=>{a.addEventListener("click",()=>{var p,h;const i=a.dataset.word;Gr(a);const c=new SpeechSynthesisUtterance(i);c.rate=.85,c.lang="en-GB",(p=window.speechSynthesis)==null||p.cancel(),(h=window.speechSynthesis)==null||h.speak(c)})}),Je=document.getElementById("decode-panel"),e.querySelectorAll(".decode-word").forEach(a=>{a.addEventListener("click",()=>Rr(a))})}async function Rr(o){var a,i,c,p;document.querySelectorAll(".decode-word.decoding").forEach(h=>h.classList.remove("decoding")),o.classList.add("decoding");const e=o.dataset.word,t=e.toLowerCase().replace(/[^a-z]/g,""),s=Ze(t),r=s?null:Tr(e),n=Je;if(n)if(n.removeAttribute("hidden"),s){Te({type:"hfw",word:t});const h=new SpeechSynthesisUtterance(t);h.rate=.85,h.lang="en-GB",(a=window.speechSynthesis)==null||a.cancel(),(i=window.speechSynthesis)==null||i.speak(h)}else if(r)Te({type:"decode",word:r.word,wordObj:r}),await Rt(r);else{Te({type:"tts",word:t});const h=new SpeechSynthesisUtterance(t);h.rate=.85,h.lang="en-GB",(c=window.speechSynthesis)==null||c.cancel(),(p=window.speechSynthesis)==null||p.speak(h)}}function Te({type:o,word:e,wordObj:t}){var a,i,c;const s=document.getElementById("decode-panel-inner");if(!s)return;if(o==="hfw"){s.innerHTML=`
      <div class="dp-hfw">
        <span class="dp-sight-badge">â­ Sight Word</span>
        <span class="dp-word">${e}</span>
        <button class="dp-hear-btn" id="dp-hear">ğŸ”Š Hear again</button>
      </div>
    `,(a=document.getElementById("dp-hear"))==null||a.addEventListener("click",()=>{var h,g;const p=new SpeechSynthesisUtterance(e);p.rate=.85,p.lang="en-GB",(h=window.speechSynthesis)==null||h.cancel(),(g=window.speechSynthesis)==null||g.speak(p)});return}if(o==="tts"){s.innerHTML=`
      <div class="dp-tts">
        <span class="dp-word">${e}</span>
        <button class="dp-hear-btn" id="dp-hear">ğŸ”Š Hear again</button>
      </div>
    `,(i=document.getElementById("dp-hear"))==null||i.addEventListener("click",()=>{var h,g;const p=new SpeechSynthesisUtterance(e);p.rate=.85,p.lang="en-GB",(h=window.speechSynthesis)==null||h.cancel(),(g=window.speechSynthesis)==null||g.speak(p)});return}const r={c:"#3b82f6",sv:"#ef4444",lv:"#22c55e",d:"#a855f7",bl:"#f97316",rc:"#ec4899",dp:"#0d9488",se:"#94a3b8"},n=t.graphemes.map((p,h)=>{const g=r[t.types[h]]??"#6c63ff";return`<span class="dp-tile" data-idx="${h}" style="--tile-color:${g}">${p}</span>`}).join("");s.innerHTML=`
    <div class="dp-decode">
      <div class="dp-tiles" id="dp-tiles">${n}</div>
      <span class="dp-word" id="dp-word-label">${t.word}</span>
      <button class="dp-hear-btn" id="dp-hear">ğŸ”Š Hear again</button>
    </div>
  `,(c=document.getElementById("dp-hear"))==null||c.addEventListener("click",async()=>{await Rt(t)})}async function Rt(o){const e=document.querySelectorAll(".dp-tile");for(let s=0;s<o.graphemes.length;s++)e.forEach((r,n)=>r.classList.toggle("dp-tile--active",n===s)),await S.speakPhoneme(o.graphemes[s],o.types[s]),await St(200);e.forEach(s=>s.classList.remove("dp-tile--active")),await St(250);const t=document.getElementById("dp-word-label");t&&t.classList.add("dp-word--blend");try{await S.speakWord(o.word)}finally{t&&t.classList.remove("dp-word--blend")}}function Gr(o){o.classList.add("hfw-chip--flash"),setTimeout(()=>o.classList.remove("hfw-chip--flash"),500)}function Dr(o){const e=[],t=o.lines;let s=0;for(;s<t.length;){const r=t[s];if(r.type==="label"){const n=t[s+1];if(n&&n.type==="beat"){e.push({text:`${r.text} ${n.text}`,highlightIdx:s+1}),s+=2;continue}s++;continue}e.push({text:r.text,highlightIdx:s}),s++}return e}function Hr(o){if(!window.speechSynthesis)return;J(),et(!0),ge=!0;const e=Dr(o);Gt(e,0)}function Gt(o,e){if(!ge||e>=o.length){xt();return}const t=o[e];Fr(t.highlightIdx);const s=new SpeechSynthesisUtterance(t.text);s.rate=.82,s.lang="en-GB";const r=t.text.startsWith("Puff")?600:380;s.onend=()=>{ge&&setTimeout(()=>Gt(o,e+1),r)},s.onerror=()=>xt(),window.speechSynthesis.speak(s)}function Fr(o){B==null||B.querySelectorAll(".sline--active").forEach(t=>t.classList.remove("sline--active"));const e=B==null?void 0:B.querySelector(`[data-line="${o}"]`);e&&(e.classList.add("sline--active"),e.scrollIntoView({behavior:"smooth",block:"nearest"}))}function J(){var o;ge=!1,(o=window.speechSynthesis)==null||o.cancel(),B==null||B.querySelectorAll(".sline--active").forEach(e=>e.classList.remove("sline--active")),et(!1)}function xt(){ge=!1,B==null||B.querySelectorAll(".sline--active").forEach(o=>o.classList.remove("sline--active")),et(!1)}function et(o){const e=document.getElementById("btn-story-play"),t=document.getElementById("btn-story-stop");e&&(e.style.display=o?"none":""),t&&(t.style.display=o?"":"none")}const St=o=>new Promise(e=>setTimeout(e,o)),he={c:{label:"Consonants",short:"Con",color:"#3b82f6",bg:"#dbeafe",order:1},sv:{label:"Short Vowels",short:"Short",color:"#ef4444",bg:"#fee2e2",order:2},lv:{label:"Long Vowels",short:"Long",color:"#22c55e",bg:"#dcfce7",order:3},d:{label:"Digraphs",short:"Digrph",color:"#a855f7",bg:"#f3e8ff",order:4},bl:{label:"Blends",short:"Blend",color:"#f97316",bg:"#ffedd5",order:5},rc:{label:"R-Controlled",short:"R-Ctrl",color:"#ec4899",bg:"#fce7f3",order:6},dp:{label:"Diphthongs",short:"Dipth",color:"#0d9488",bg:"#ccfbf1",order:7},se:{label:"Silent-E",short:"Sil-E",color:"#94a3b8",bg:"#f1f5f9",order:8},sfx:{label:"Suffixes",short:"Suffix",color:"#d97706",bg:"#fef3c7",order:9}};function Or(){const o=new Map;for(const e of V)for(let t=0;t<e.graphemes.length;t++){const s=e.graphemes[t],r=e.types[t],n=`${s}::${r}`;o.has(n)||o.set(n,{grapheme:s,type:r,examples:[]});const a=o.get(n);a.examples.length<3&&a.examples.push({word:e.word,emoji:e.emoji})}return[...o.values()].sort((e,t)=>{var n,a;const s=((n=he[e.type])==null?void 0:n.order)??99,r=((a=he[t.type])==null?void 0:a.order)??99;return s!==r?s-r:e.grapheme.localeCompare(t.grapheme)})}let ue=null,oe="all",Ie=null;const $e=Or();function Nr(o,e){ue=o,oe="all",Dt()}function qr(){ue=null,oe="all"}function Dt(){const o=["all",...Object.keys(he)],e=o.map(r=>{const n=r==="all"?{label:"All Sounds",color:"#6c63ff"}:he[r];return n?`<button class="ls-tab${r===oe?" active":""}" data-type="${r}" style="--tab-color:${n.color}">${n.label}</button>`:""}).join(""),t=oe==="all"?$e:$e.filter(r=>r.type===oe),s=t.map(r=>{const n=he[r.type]||{color:"#6c63ff",bg:"#e0e7ff",label:""},a=r.examples[0],i=`${r.grapheme}::${r.type}`;return`
      <button
        class="ls-card"
        data-grapheme="${r.grapheme}"
        data-type="${r.type}"
        data-key="${i}"
        style="--card-color:${n.color};--card-bg:${n.bg}"
        aria-label="Hear the sound for ${r.grapheme}"
      >
        <span class="ls-grapheme">${r.grapheme}</span>
        ${a?`
          <span class="ls-ex-emoji" aria-hidden="true">${a.emoji}</span>
          <span class="ls-ex-word">${a.word}</span>
        `:""}
        <span class="ls-type-tag">${n.short??n.label}</span>
      </button>
    `}).join("");o.map(r=>{if(r==="all")return"";const n=$e.filter(a=>a.type===r).length;return`<span data-count-type="${r}">${n}</span>`}).join(""),ue.innerHTML=`
    <div class="ls-browser">
      <div class="ls-intro">
        <p class="ls-intro-text">
          Tap any card to hear the sound. Each card shows an example word.
        </p>
      </div>
      <div class="ls-tabs" role="tablist" aria-label="Sound types">
        ${e}
      </div>
      <div class="ls-count" aria-live="polite">
        ${t.length} sound${t.length!==1?"s":""}
      </div>
      <div class="ls-grid" role="list">
        ${s}
      </div>
    </div>
  `,ue.querySelectorAll(".ls-tab").forEach(r=>{r.addEventListener("click",()=>{oe=r.dataset.type,Dt()})}),ue.querySelectorAll(".ls-card").forEach(r=>{r.addEventListener("click",()=>Ur(r))})}async function Ur(o){const e=o.dataset.key;Ie!==e&&(Ie=e,o.classList.add("ls-playing"),o.style.transform="scale(0.93)",setTimeout(()=>o.style.transform="",120),await S.speakPhoneme(o.dataset.grapheme,o.dataset.type),o.classList.remove("ls-playing"),Ie=null)}class zr{constructor(){this._screen="screen-home",this._mode="blend",this._currentWord=null,this._els={}}init(){this._cacheElements(),this._bindEvents(),this._applySettings(),ne.init(),P.init();const e=document.getElementById("spin-wheel");e&&Me.init(e);const t=document.getElementById("btn-mic");t&&!ae.supported&&t.classList.add("hidden"),this._applyTheme(u.get("theme")||"default"),console.log("[PhonicsQuest] App initialized")}_cacheElements(){this._els={screenHome:document.getElementById("screen-home"),screenGame:document.getElementById("screen-game"),screenResult:document.getElementById("screen-result"),wordDisplay:document.getElementById("word-display"),wordEmoji:document.getElementById("word-emoji"),phonemeRow:document.getElementById("phoneme-row"),modeInstruction:document.getElementById("mode-instruction"),modeArea:document.getElementById("mode-area"),btnCheck:document.getElementById("btn-check"),btnSayIt:document.getElementById("btn-say-it"),btnSkip:document.getElementById("btn-skip"),btnBack:document.getElementById("btn-back"),btnNext:document.getElementById("btn-next"),btnMic:document.getElementById("btn-mic"),resultBadge:document.getElementById("result-badge"),resultMessage:document.getElementById("result-message"),resultWord:document.getElementById("result-word-display"),resultXp:document.getElementById("result-xp"),resultMascot:document.getElementById("result-mascot"),speechBubble:document.getElementById("speech-bubble"),toastContainer:document.getElementById("toast-container")}}_bindEvents(){var e,t,s,r,n,a,i,c,p,h,g,_,k;document.querySelectorAll(".mode-card").forEach(E=>{E.addEventListener("click",()=>{this._mode=E.dataset.mode,u.set("currentMode",this._mode),this._startGame()})}),(e=document.getElementById("spin-btn"))==null||e.addEventListener("click",async()=>{const E=document.getElementById("spin-btn");if(!(!E||Me.isSpinning)){E.disabled=!0;try{const W=await Me.spin();u.set("currentGroup",W),S.playSfx("correct"),this._mode="blend",setTimeout(()=>this._startGame(W),500)}catch{}E.disabled=!1}}),(t=this._els.btnBack)==null||t.addEventListener("click",()=>{this._cleanupMode(),this._showScreen("screen-home"),P.setHomeState("holdCard")}),(s=document.getElementById("btn-stories"))==null||s.addEventListener("click",()=>{$r(document.getElementById("stories-content")),Vr(),this._showScreen("screen-stories"),P.setState("celebrate")}),(r=document.getElementById("btn-stories-back"))==null||r.addEventListener("click",()=>{Ar(),this._showScreen("screen-home"),P.setHomeState("holdCard")}),(n=document.getElementById("btn-letter-sounds"))==null||n.addEventListener("click",()=>{Nr(document.getElementById("ls-content")),this._showScreen("screen-letter-sounds"),P.setState("whiteboard")}),(a=document.getElementById("btn-ls-back"))==null||a.addEventListener("click",()=>{qr(),this._showScreen("screen-home"),P.setHomeState("holdCard")}),(i=this._els.btnNext)==null||i.addEventListener("click",()=>{this._nextWord()}),(c=this._els.btnSayIt)==null||c.addEventListener("click",()=>{this._currentWord&&S.speakWord(this._currentWord.word)}),(p=this._els.btnSkip)==null||p.addEventListener("click",()=>{this._cleanupMode(),this._nextWord()}),(h=this._els.btnMic)==null||h.addEventListener("click",()=>{this._handleSpeechRecognition()}),(g=document.getElementById("settings-btn"))==null||g.addEventListener("click",()=>{this._openModal("modal-settings")}),(_=document.getElementById("dashboard-btn"))==null||_.addEventListener("click",()=>{this._openModal("modal-pin"),setTimeout(()=>{var E;return(E=document.querySelector(".pin-digit"))==null?void 0:E.focus()},200)}),document.querySelectorAll(".modal-close").forEach(E=>{E.addEventListener("click",()=>{const W=E.dataset.close;W&&this._closeModal(W)})}),document.querySelectorAll(".modal-overlay").forEach(E=>{E.addEventListener("click",W=>{W.target===E&&this._closeModal(E.id)})}),this._bindSettings(),this._bindPinGate(),document.addEventListener("keydown",E=>this._handleKeyboard(E)),(k=document.getElementById("mascot-trigger"))==null||k.addEventListener("click",()=>{P.clap(),this._showToast(P.getCheer(),"success"),S.playSfx("pop")})}_startGame(e){const t={maxLevel:u.get("difficulty")||1};e&&(t.group=e),this._currentWord=ce.getNextWord(t),S.preloadWord(this._currentWord),this._showScreen("screen-game"),P.think();const s=yt[this._mode];s&&s.setup(this._currentWord,{...this._els,onResult:(r,n)=>this._handleResult(r,n),onGroupChange:r=>{this._cleanupMode(),this._startGame(r||void 0)}})}_nextWord(){this._cleanupMode(),this._startGame(u.get("currentGroup"))}_handleResult(e,t){const s=this._currentWord;if(!s)return;const r=ce.isNewWord(s.id);if(ce.recordAttempt(s.id,e,this._mode),e){const n=ne.recordCorrect(t,r);P.celebrate(n.levelUp),P.setResultState(n.levelUp?"trophy":"confetti"),n.levelUp?(Rs(),S.playSfx("levelUp"),this._showToast(`Level ${n.newLevel}!`,"success")):(Ws(),S.playSfx("correct")),n.dailyComplete&&(Gs(),this._showToast("Daily goal complete!","success")),this._showResultScreen(!0,s,n)}else{const n=ne.recordWrong();P.encourage(),P.setResultState("encourage"),S.playSfx("wrong"),this._showResultScreen(!1,s,null),n.gameOver&&(this._showToast("Hearts refilled! Take a break?","warning"),setTimeout(()=>ne.refillHearts(),2e3))}}_showResultScreen(e,t,s){this._showScreen("screen-result"),e?(this._els.resultBadge.textContent="ğŸŒŸ",this._els.resultMessage.textContent=P.getCheer(),this._els.resultMessage.style.color="var(--color-success)",this._els.resultXp.textContent=s?`+${s.xpEarned} XP`:"+10 XP",this._els.resultXp.style.display=""):(this._els.resultBadge.textContent="ğŸ’ª",this._els.resultMessage.textContent=P.getEncouragement(),this._els.resultMessage.style.color="var(--color-error)",this._els.resultXp.style.display="none"),this._els.resultWord.textContent=t.emoji+" "+t.word,this._els.btnNext.focus()}_showScreen(e){document.querySelectorAll(".screen").forEach(t=>{t.id===e?(t.classList.remove("exit"),t.classList.add("active")):t.classList.contains("active")&&(t.classList.remove("active"),t.classList.add("exit"),setTimeout(()=>t.classList.remove("exit"),400))}),this._screen=e}_cleanupMode(){const e=yt[this._mode];e==null||e.cleanup()}async _handleSpeechRecognition(){if(!this._currentWord||!ae.supported)return;const e=this._els.btnMic;if(!e)return;if(ae.isListening){ae.stop(),e.setAttribute("aria-pressed","false");return}e.setAttribute("aria-pressed","true");const t=await ae.listen(this._currentWord.word);if(e.setAttribute("aria-pressed","false"),!t){this._showSpeechBubble("I didn't hear anything. Try again!");return}t.correct?(this._showSpeechBubble(`I heard "${t.heard}" â€“ ${t.score}% match! Great job!`),setTimeout(()=>this._handleResult(!0,3e3),1200)):this._showSpeechBubble(`I heard "${t.heard}" â€“ ${t.score}% match. Try saying "${this._currentWord.word}" more clearly!`)}_showSpeechBubble(e){const t=this._els.speechBubble;t&&(t.textContent=e,t.hidden=!1,setTimeout(()=>{t.hidden=!0},4e3))}_bindSettings(){var e,t,s,r,n;document.querySelectorAll(".theme-swatch").forEach(a=>{a.addEventListener("click",()=>{const i=a.dataset.theme;this._applyTheme(i),u.set("theme",i),document.querySelectorAll(".theme-swatch").forEach(c=>{c.classList.toggle("active",c.dataset.theme===i),c.setAttribute("aria-pressed",c.dataset.theme===i)})})}),(e=document.getElementById("sfx-toggle"))==null||e.addEventListener("change",a=>{u.set("sfxEnabled",a.target.checked)}),(t=document.getElementById("autoplay-toggle"))==null||t.addEventListener("change",a=>{u.set("autoplay",a.target.checked)}),(s=document.getElementById("voice-speed"))==null||s.addEventListener("input",a=>{const i=parseFloat(a.target.value);u.set("voiceSpeed",i);const c=document.getElementById("voice-speed-display");c&&(c.textContent=`${i}Ã—`)}),document.querySelectorAll(".diff-btn").forEach(a=>{a.addEventListener("click",()=>{const i=parseInt(a.dataset.diff);u.set("difficulty",i),document.querySelectorAll(".diff-btn").forEach(c=>{c.classList.toggle("active",parseInt(c.dataset.diff)===i),c.setAttribute("aria-pressed",parseInt(c.dataset.diff)===i)})})}),(r=document.getElementById("goal-range"))==null||r.addEventListener("input",a=>{const i=parseInt(a.target.value);u.set("dailyGoal",i);const c=document.getElementById("goal-range-display");c&&(c.textContent=i),document.getElementById("goal-total").textContent=i}),(n=document.getElementById("reset-progress-btn"))==null||n.addEventListener("click",()=>{confirm("This will erase all progress. Are you sure?")&&(u.reset(),ne.init(),this._showToast("Progress reset!","warning"),this._closeModal("modal-settings"))})}_applySettings(){const e=document.getElementById("sfx-toggle");e&&(e.checked=u.get("sfxEnabled"));const t=document.getElementById("autoplay-toggle");t&&(t.checked=u.get("autoplay"));const s=document.getElementById("voice-speed");s&&(s.value=u.get("voiceSpeed"));const r=document.getElementById("voice-speed-display");r&&(r.textContent=`${u.get("voiceSpeed")}Ã—`);const n=u.get("difficulty")||1;document.querySelectorAll(".diff-btn").forEach(p=>{p.classList.toggle("active",parseInt(p.dataset.diff)===n),p.setAttribute("aria-pressed",parseInt(p.dataset.diff)===n)});const a=u.get("dailyGoal")||10,i=document.getElementById("goal-range");i&&(i.value=a);const c=document.getElementById("goal-range-display");c&&(c.textContent=a)}_applyTheme(e){document.documentElement.setAttribute("data-theme",e)}_bindPinGate(){var s,r;const e=document.querySelectorAll(".pin-digit"),t=document.getElementById("pin-hint");e.forEach((n,a)=>{n.addEventListener("input",i=>{i.target.value&&a<e.length-1&&e[a+1].focus()}),n.addEventListener("keydown",i=>{i.key==="Backspace"&&!i.target.value&&a>0&&e[a-1].focus()})}),(s=document.getElementById("pin-confirm-btn"))==null||s.addEventListener("click",()=>{const n=Array.from(e).map(i=>i.value).join("");if(n.length<4){t&&(t.textContent="Enter all 4 digits");return}const a=u.get("parentPin");a?n===a?(t&&(t.textContent=""),this._closeModal("modal-pin"),this._openDashboard()):(t&&(t.textContent="Wrong PIN. Try again."),e.forEach(i=>{i.value=""}),e[0].focus()):(u.set("parentPin",n),t&&(t.textContent=""),this._closeModal("modal-pin"),this._openDashboard())}),(r=document.getElementById("pin-cancel-btn"))==null||r.addEventListener("click",()=>{this._closeModal("modal-pin"),document.querySelectorAll(".pin-digit").forEach(n=>{n.value=""})})}_openDashboard(){this._openModal("modal-dashboard");const e=document.getElementById("dashboard-content");e&&Ms(e)}_openModal(e){const t=document.getElementById(e);if(!t)return;t.hidden=!1;const s=t.querySelectorAll("button, input, [tabindex]");s.length&&s[0].focus();const r=n=>{n.key==="Escape"&&(this._closeModal(e),document.removeEventListener("keydown",r))};document.addEventListener("keydown",r)}_closeModal(e){const t=document.getElementById(e);t&&(t.hidden=!0,e==="modal-dashboard"&&Ps())}_showToast(e,t="info"){const s=this._els.toastContainer;if(!s)return;const r=document.createElement("div");r.className=`toast toast--${t}`,r.textContent=e,s.appendChild(r),setTimeout(()=>r.remove(),3200)}_handleKeyboard(e){var t,s,r,n;if(this._screen==="screen-game")switch(e.key){case" ":case"Enter":e.preventDefault(),(t=document.getElementById("btn-reveal-next"))==null||t.click();break;case"s":(s=this._els.btnSayIt)==null||s.click();break;case"Escape":(r=this._els.btnBack)==null||r.click();break;case"n":this._screen==="screen-result"&&((n=this._els.btnNext)==null||n.click());break}}}const Yr=new zr,jt="/blending/";function Xr(){"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const o=await navigator.serviceWorker.register(`${jt}sw.js`,{scope:jt});console.log("[PWA] Service worker registered:",o.scope),o.addEventListener("updatefound",()=>{const e=o.installing;e&&e.addEventListener("statechange",()=>{e.state==="activated"&&Kr("App updated! Refresh for the latest version.","info")})})}catch(o){console.warn("[PWA] Service worker registration failed:",o)}})}function Kr(o,e="info"){const t=document.getElementById("toast-container");if(!t)return;const s=document.createElement("div");s.className=`toast toast--${e}`,s.textContent=o,t.appendChild(s),setTimeout(()=>s.remove(),3500)}document.addEventListener("DOMContentLoaded",()=>{Yr.init(),Xr()});
