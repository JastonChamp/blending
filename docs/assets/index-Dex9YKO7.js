import{g as le}from"./gsap-C8pce-KX.js";import{C as Ye,r as St}from"./chartjs-BR_H7_9u.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const $e="phonicsquest_v2",ve={xp:0,level:1,hearts:5,streak:0,bestStreak:0,lastPlayDate:null,dailyGoal:10,dailyDone:0,theme:"default",difficulty:1,sfxEnabled:!0,autoplay:!0,voiceSpeed:.8,parentPin:null,wordStats:{},groupMastery:{},currentMode:"blend",currentGroup:"short-a",wordHistory:[],mascotName:"Ollie"};class kt{constructor(){this._state=this._load(),this._listeners=new Map}_load(){try{const e=localStorage.getItem($e);if(e){const t=JSON.parse(e);return{...ve,...t}}}catch{}return{...ve}}_save(){try{localStorage.setItem($e,JSON.stringify(this._state))}catch{}}get(e){return this._state[e]}set(e,t){this._state[e]=t,this._notify(e,t),this._save()}patch(e){Object.assign(this._state,e);for(const[t,r]of Object.entries(e))this._notify(t,r);this._save()}subscribe(e,t){return this._listeners.has(e)||this._listeners.set(e,new Set),this._listeners.get(e).add(t),()=>{var r;return(r=this._listeners.get(e))==null?void 0:r.delete(t)}}_notify(e,t){var r,s;(r=this._listeners.get(e))==null||r.forEach(o=>o(t,e)),(s=this._listeners.get("*"))==null||s.forEach(o=>o(t,e))}reset(){const e=this._state.parentPin;this._state={...ve,parentPin:e},this._save(),this._notify("*",this._state)}snapshot(){return{...this._state}}recordWordAttempt(e,t){const r={...this._state.wordStats},s=r[e]??{attempts:0,correct:0};r[e]={attempts:s.attempts+1,correct:s.correct+(t?1:0),lastSeen:new Date().toISOString()},this.set("wordStats",r)}addWordHistory(e){const t=[e,...this._state.wordHistory].slice(0,100);this.set("wordHistory",t)}updateGroupMastery(e,t){const r={...this._state.groupMastery,[e]:t};this.set("groupMastery",r)}checkDailyReset(){const e=new Date().toDateString();this._state.lastPlayDate!==e&&this.patch({dailyDone:0,lastPlayDate:e})}incrementDailyDone(){this.set("dailyDone",this._state.dailyDone+1)}}const p=new kt,Xe="/blending/",Re=`${Xe}audio/phonemes/`,Mt=`${Xe}audio/sfx/`,De={b:"b",c:"c",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",m:"m",n:"n",p:"p",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",y:"y",z:"z",sh:"sh",ch:"ch",th:"th",ng:"ng",a:"a",e:"e",i:"i",o:"o",u:"u",long_a:"long_a",long_e:"long_e",long_i:"long_i",long_o:"long_o",long_u:"long_u",oi:"oi",ow:"ow",aw:"aw"},xt={b:"buh",c:"kuh",d:"duh",f:"fff",g:"guh",h:"huh",j:"juh",k:"kuh",l:"lll",m:"mmm",n:"nnn",p:"puh",r:"rrr",s:"sss",t:"tuh",v:"vvv",w:"wuh",x:"ks",y:"yuh",z:"zzz",sh:"shh",ch:"chuh",th:"thuh",ng:"ing",a:"ah",e:"eh",i:"ih",o:"aw",u:"uh",long_a:"ay",long_e:"ee",long_i:"eye",long_o:"oh",long_u:"you",oi:"oy",ow:"ow",aw:"aw"};class It{constructor(){this._ctx=null,this._buffers=new Map,this._elements=new Map,this._ttsVoice=null,this._initTTS()}_ensureCtx(){return this._ctx||(this._ctx=new(window.AudioContext||window.webkitAudioContext)),this._ctx.state==="suspended"&&this._ctx.resume().catch(()=>{}),this._ctx}_initTTS(){const e=()=>{const t=speechSynthesis.getVoices(),r=["Google US English","Microsoft Aria Online","Karen","Samantha","Daniel"];for(const s of r){const o=t.find(n=>n.name.includes(s));if(o){this._ttsVoice=o;return}}this._ttsVoice=t.find(s=>s.lang==="en-US")??t[0]??null};speechSynthesis.getVoices().length?e():speechSynthesis.addEventListener("voiceschanged",e,{once:!0})}async speakPhoneme(e,t){if(!p.get("sfxEnabled"))return;let r=e.toLowerCase();if(t==="lv"&&(r=`long_${e.toLowerCase().replace("ee","e").replace("ay","a")}`),t!=="se"){if(t==="dp")return r={oy:"oi",ou:"ow",au:"aw"}[e.toLowerCase()]??e.toLowerCase(),this._playPhonemeAudio(r);if(t==="bl"&&e.length===2){await this._playPhonemeAudio(e[0]),await this._delay(80),await this._playPhonemeAudio(e[1]);return}return this._playPhonemeAudio(r)}}async _playPhonemeAudio(e){if(this._buffers.has(e))return this._playBuffer(this._buffers.get(e));const t=De[e];if(t)try{const s=await this._loadBuffer(`${Re}${t}.mp3`);return this._buffers.set(e,s),this._playBuffer(s)}catch{}const r=xt[e]??e;return this._speak(r,.9)}speakWord(e){return p.get("sfxEnabled")?this._speak(e,p.get("voiceSpeed")??.8):Promise.resolve()}async revealPhonemes(e,t){for(let r=0;r<e.graphemes.length;r++){const s=e.graphemes[r],o=e.types[r];t==null||t(r),await this.speakPhoneme(s,o),await this._delay(350)}await this._delay(200),await this.speakWord(e.word)}async playSfx(e){if(!p.get("sfxEnabled"))return;const t=this._ensureCtx();switch(e){case"correct":this._playTone(t,880,.15,"sine"),await this._delay(80),this._playTone(t,1108,.12,"sine");break;case"wrong":this._playTone(t,200,.2,"sawtooth");break;case"pop":this._playTone(t,660,.08,"sine",.05);break;case"levelUp":for(const[r,s]of[[523,0],[659,.1],[784,.2],[1047,.3]])setTimeout(()=>this._playTone(t,r,.15,"sine"),s*1e3);break;case"spin":this._playTone(t,440,.05,"triangle",.08);break;case"reveal":try{const r=await this._loadBuffer(`${Mt}reveal-sound.mp3`);this._playBuffer(r,.4)}catch{this._playTone(t,523,.1,"sine")}break}}_speak(e,t=.8){return new Promise(r=>{if(!window.speechSynthesis){r();return}speechSynthesis.cancel();const s=new SpeechSynthesisUtterance(e);s.rate=t,s.pitch=1.1,s.volume=1,this._ttsVoice&&(s.voice=this._ttsVoice);let o=!1;const n=()=>{o||(o=!0,clearTimeout(d),clearInterval(h),r())};s.onend=n,s.onerror=n;const c=Math.max(1500,Math.ceil(e.length*80/t))+800,d=setTimeout(n,c),h=setInterval(()=>{if(o){clearInterval(h);return}window.speechSynthesis.paused&&window.speechSynthesis.resume()},250);speechSynthesis.speak(s)})}async _loadBuffer(e){const t=this._ensureCtx(),r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch ${e}`);const s=await r.arrayBuffer();return t.decodeAudioData(s)}_playBuffer(e,t=.8){return new Promise(r=>{const s=this._ensureCtx(),o=s.createBufferSource(),n=s.createGain();o.buffer=e,n.gain.value=t,o.connect(n),n.connect(s.destination),o.onended=()=>r(),o.start(0)})}_playTone(e,t,r=.1,s="sine",o=.15){const n=e.createOscillator(),c=e.createGain();n.type=s,n.frequency.value=t,c.gain.setValueAtTime(r,e.currentTime),c.gain.exponentialRampToValueAtTime(.001,e.currentTime+o),n.connect(c),c.connect(e.destination),n.start(e.currentTime),n.stop(e.currentTime+o)}_delay(e){return new Promise(t=>setTimeout(t,e))}preloadWord(e){for(let t=0;t<e.graphemes.length;t++){const r=e.graphemes[t],s=e.types[t];let o=r.toLowerCase();if(s==="lv"&&(o=`long_${r.toLowerCase()}`),s==="dp"&&(o={oy:"oi",ou:"ow",au:"aw"}[r.toLowerCase()]??r.toLowerCase()),s==="se"||this._buffers.has(o))continue;const n=De[o];n&&this._loadBuffer(`${Re}${n}.mp3`).then(c=>this._buffers.set(o,c)).catch(()=>{})}}}const M=new It,Lt=.8,Oe=6,ye=[{id:"stage-1",name:"Starter Sounds",description:"Short vowels A, E, I",icon:"ðŸŒ±",groups:["short-a","short-e","short-i"],level:1,requiredMastery:0},{id:"stage-2",name:"More Vowels",description:"Short vowels O and U",icon:"ðŸŒ¿",groups:["short-o","short-u"],level:1,requiredMastery:.7,prerequisite:"stage-1"},{id:"stage-3",name:"Magic E",description:"Long vowels A and I with silent e",icon:"âœ¨",groups:["long-a","long-i"],level:2,requiredMastery:.75,prerequisite:"stage-2"},{id:"stage-4",name:"More Magic E",description:"Long vowels E, O and U",icon:"ðŸŒŸ",groups:["long-e","long-o","long-u"],level:2,requiredMastery:.75,prerequisite:"stage-3"},{id:"stage-5",name:"Team Sounds",description:"Digraphs: sh, ch, th, wh",icon:"ðŸ¤",groups:["digraphs"],level:2,requiredMastery:.7,prerequisite:"stage-2"},{id:"stage-6",name:"Sound Blends",description:"Consonant blends: fl, bl, tr, cr, and more",icon:"ðŸš€",groups:["blends"],level:3,requiredMastery:.75,prerequisite:"stage-5"}];function Tt(a){const e=[];for(const t of ye){if(!t.prerequisite){e.push(t.id);continue}const r=ye.find(o=>o.id===t.prerequisite);if(!r||!e.includes(r.id))continue;Vt(r,a)>=t.requiredMastery&&e.push(t.id)}return e}function Vt(a,e){if(!a.groups.length)return 0;const t=a.groups.map(r=>e[r]??0);return t.reduce((r,s)=>r+s,0)/t.length}const z={correct:10,correct_fast:15,streak_5:20,streak_10:40,daily_goal:50,new_word:5},Y=[0,100,250,450,700,1e3,1400,1900,2500,3200];function Ne(a){let e=1;for(let o=0;o<Y.length&&a>=Y[o];o++)e=o+1;const t=Y[e-1]??0,r=Y[e]??Y[Y.length-1],s=r>t?(a-t)/(r-t):1;return{level:Math.min(e,Y.length),progress:s,nextXP:r}}class At{constructor(){this._sessionCorrect=0,this._sessionWrong=0}init(){p.checkDailyReset(),this._checkStreak(),this._updateUI()}_checkStreak(){const e=new Date().toDateString(),t=p.get("lastPlayDate");if(!t||t===e)return;const r=new Date(Date.now()-864e5).toDateString();t!==r&&p.set("streak",0)}recordCorrect(e=5e3,t=!1){this._sessionCorrect++;const r=[];let s=0;e<3e3?(s+=z.correct_fast,r.push("Quick answer!")):(s+=z.correct,r.push("Correct!")),t&&(s+=z.new_word,r.push("New word!"));const o=this._sessionCorrect;o===5?(s+=z.streak_5,r.push("5 in a row!")):o===10&&(s+=z.streak_10,r.push("10 in a row!"));const n=p.get("xp")+s,c=p.get("level"),{level:d,progress:h}=Ne(n);p.patch({xp:n,level:d}),p.incrementDailyDone();const g=p.get("dailyDone"),v=p.get("dailyGoal");g===v&&(s+=z.daily_goal,p.set("xp",p.get("xp")+z.daily_goal),r.push("Daily goal complete!"));const S=new Date().toDateString();if(p.get("lastPlayDate")!==S){p.patch({lastPlayDate:S,streak:p.get("streak")+1});const L=p.get("streak");L>p.get("bestStreak")&&p.set("bestStreak",L)}return this._updateUI(),{xpEarned:s,reasons:r,levelUp:d>c,newLevel:d,progress:h,dailyComplete:g===v}}recordWrong(){this._sessionCorrect=0,this._sessionWrong++;let e=p.get("hearts");return e=Math.max(0,e-1),p.set("hearts",e),this._updateUI(),{heartsLeft:e,gameOver:e<=0}}refillHearts(){p.set("hearts",5),this._updateUI()}getSessionStats(){return{correct:this._sessionCorrect,wrong:this._sessionWrong,total:this._sessionCorrect+this._sessionWrong,accuracy:this._sessionCorrect+this._sessionWrong>0?this._sessionCorrect/(this._sessionCorrect+this._sessionWrong):0}}resetSession(){this._sessionCorrect=0,this._sessionWrong=0}_updateUI(){const e=document.getElementById("hearts-val"),t=document.getElementById("streak-val"),r=document.getElementById("xp-val"),s=document.getElementById("level-val"),o=document.getElementById("level-next-val"),n=document.getElementById("level-bar-fill"),c=document.getElementById("goal-fill"),d=document.getElementById("goal-done"),h=document.getElementById("goal-total");e&&(e.textContent=p.get("hearts")),t&&(t.textContent=p.get("streak")),r&&(r.textContent=p.get("xp"));const{level:g,progress:v}=Ne(p.get("xp"));s&&(s.textContent=g),o&&(o.textContent=g+1),n&&(n.style.width=`${Math.round(v*100)}%`);const S=p.get("dailyDone"),L=p.get("dailyGoal");c&&(c.style.width=`${Math.min(100,Math.round(S/L*100))}%`),d&&(d.textContent=S),h&&(h.textContent=L)}}const ee=new At,Bt={a:{sv:"Äƒ",lv:"Ä"},e:{sv:"Ä•",lv:"Ä“"},i:{sv:"Ä­",lv:"Ä«"},o:{sv:"Å",lv:"Å"},u:{sv:"Å­",lv:"Å«"}},J={"short-a":{label:"Short A",color:"#ef4444",bg:"#fee2e2",icon:"ðŸŽ",audioFile:"a"},"short-e":{label:"Short E",color:"#f97316",bg:"#ffedd5",icon:"ðŸ¥š",audioFile:"e"},"short-i":{label:"Short I",color:"#eab308",bg:"#fef9c3",icon:"ðŸŸ",audioFile:"i"},"short-o":{label:"Short O",color:"#22c55e",bg:"#dcfce7",icon:"ðŸ™",audioFile:"o"},"short-u":{label:"Short U",color:"#3b82f6",bg:"#dbeafe",icon:"â˜‚ï¸",audioFile:"u"},"long-a":{label:"Long A",color:"#a855f7",bg:"#f3e8ff",icon:"ðŸŽ‚",audioFile:"long_a"},"long-e":{label:"Long E",color:"#ec4899",bg:"#fce7f3",icon:"ðŸ¦",audioFile:"long_e"},"long-i":{label:"Long I",color:"#14b8a6",bg:"#ccfbf1",icon:"ðŸª",audioFile:"long_i"},"long-o":{label:"Long O",color:"#f59e0b",bg:"#fef3c7",icon:"ðŸ ",audioFile:"long_o"},"long-u":{label:"Long U",color:"#6366f1",bg:"#e0e7ff",icon:"ðŸŽµ",audioFile:"long_u"},digraphs:{label:"Digraphs",color:"#8b5cf6",bg:"#ede9fe",icon:"â­",audioFile:null},blends:{label:"Blends",color:"#f97316",bg:"#ffedd5",icon:"ðŸš€",audioFile:null},diphthongs:{label:"Diphthongs",color:"#0d9488",bg:"#ccfbf1",icon:"ðŸŒ€",audioFile:null}},B=[{id:"cat",word:"cat",graphemes:["c","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ±"},{id:"hat",word:"hat",graphemes:["h","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸŽ©"},{id:"bat",word:"bat",graphemes:["b","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ¦‡"},{id:"mat",word:"mat",graphemes:["m","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ§˜"},{id:"sat",word:"sat",graphemes:["s","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ’º"},{id:"rat",word:"rat",graphemes:["r","a","t"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ€"},{id:"can",word:"can",graphemes:["c","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ¥«"},{id:"fan",word:"fan",graphemes:["f","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ’¨"},{id:"man",word:"man",graphemes:["m","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ‘¨"},{id:"pan",word:"pan",graphemes:["p","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ³"},{id:"ran",word:"ran",graphemes:["r","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸƒ"},{id:"van",word:"van",graphemes:["v","a","n"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸš"},{id:"bag",word:"bag",graphemes:["b","a","g"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ‘œ"},{id:"tag",word:"tag",graphemes:["t","a","g"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ·ï¸"},{id:"cap",word:"cap",graphemes:["c","a","p"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ§¢"},{id:"map",word:"map",graphemes:["m","a","p"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ—ºï¸"},{id:"tap",word:"tap",graphemes:["t","a","p"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸš¿"},{id:"dad",word:"dad",graphemes:["d","a","d"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ‘¨â€ðŸ‘§"},{id:"had",word:"had",graphemes:["h","a","d"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"âœ‹"},{id:"sad",word:"sad",graphemes:["s","a","d"],types:["c","sv","c"],pattern:"CVC",group:"short-a",level:1,emoji:"ðŸ˜¢"},{id:"bed",word:"bed",graphemes:["b","e","d"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ›ï¸"},{id:"fed",word:"fed",graphemes:["f","e","d"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ½ï¸"},{id:"red",word:"red",graphemes:["r","e","d"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ”´"},{id:"beg",word:"beg",graphemes:["b","e","g"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ™"},{id:"leg",word:"leg",graphemes:["l","e","g"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ¦µ"},{id:"peg",word:"peg",graphemes:["p","e","g"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ“Œ"},{id:"den",word:"den",graphemes:["d","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ¦Š"},{id:"hen",word:"hen",graphemes:["h","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ”"},{id:"men",word:"men",graphemes:["m","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ‘¨â€ðŸ‘¨â€ðŸ‘¦"},{id:"pen",word:"pen",graphemes:["p","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"âœ’ï¸"},{id:"ten",word:"ten",graphemes:["t","e","n"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ”Ÿ"},{id:"bet",word:"bet",graphemes:["b","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸŽ²"},{id:"get",word:"get",graphemes:["g","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ¤²"},{id:"jet",word:"jet",graphemes:["j","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"âœˆï¸"},{id:"let",word:"let",graphemes:["l","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ¤"},{id:"net",word:"net",graphemes:["n","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸŽ¾"},{id:"pet",word:"pet",graphemes:["p","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ•"},{id:"set",word:"set",graphemes:["s","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸŽ¯"},{id:"wet",word:"wet",graphemes:["w","e","t"],types:["c","sv","c"],pattern:"CVC",group:"short-e",level:1,emoji:"ðŸ’§"},{id:"big",word:"big",graphemes:["b","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ˜"},{id:"dig",word:"dig",graphemes:["d","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"â›ï¸"},{id:"fig",word:"fig",graphemes:["f","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ‡"},{id:"jig",word:"jig",graphemes:["j","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ’ƒ"},{id:"pig",word:"pig",graphemes:["p","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ·"},{id:"wig",word:"wig",graphemes:["w","i","g"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ‘±"},{id:"bin",word:"bin",graphemes:["b","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ—‘ï¸"},{id:"fin",word:"fin",graphemes:["f","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ¦ˆ"},{id:"pin",word:"pin",graphemes:["p","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ“"},{id:"tin",word:"tin",graphemes:["t","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ¥«"},{id:"win",word:"win",graphemes:["w","i","n"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ†"},{id:"bit",word:"bit",graphemes:["b","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸª²"},{id:"fit",word:"fit",graphemes:["f","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ’ª"},{id:"hit",word:"hit",graphemes:["h","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸŽ¯"},{id:"kit",word:"kit",graphemes:["k","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ§°"},{id:"pit",word:"pit",graphemes:["p","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ”ï¸"},{id:"sit",word:"sit",graphemes:["s","i","t"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ’º"},{id:"lid",word:"lid",graphemes:["l","i","d"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ«™"},{id:"lip",word:"lip",graphemes:["l","i","p"],types:["c","sv","c"],pattern:"CVC",group:"short-i",level:1,emoji:"ðŸ’‹"},{id:"dog",word:"dog",graphemes:["d","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ¶"},{id:"fog",word:"fog",graphemes:["f","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸŒ«ï¸"},{id:"hog",word:"hog",graphemes:["h","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ—"},{id:"jog",word:"jog",graphemes:["j","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸƒ"},{id:"log",word:"log",graphemes:["l","o","g"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸªµ"},{id:"cob",word:"cob",graphemes:["c","o","b"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸŒ½"},{id:"mob",word:"mob",graphemes:["m","o","b"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ‘¥"},{id:"rob",word:"rob",graphemes:["r","o","b"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ´â€â˜ ï¸"},{id:"cod",word:"cod",graphemes:["c","o","d"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸŸ"},{id:"nod",word:"nod",graphemes:["n","o","d"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ˜Š"},{id:"rod",word:"rod",graphemes:["r","o","d"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸŽ£"},{id:"cot",word:"cot",graphemes:["c","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ›ï¸"},{id:"dot",word:"dot",graphemes:["d","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"âš«"},{id:"got",word:"got",graphemes:["g","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸŽ"},{id:"hot",word:"hot",graphemes:["h","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸŒ¶ï¸"},{id:"lot",word:"lot",graphemes:["l","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸŽ°"},{id:"pot",word:"pot",graphemes:["p","o","t"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ²"},{id:"box",word:"box",graphemes:["b","o","x"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ“¦"},{id:"fox",word:"fox",graphemes:["f","o","x"],types:["c","sv","c"],pattern:"CVC",group:"short-o",level:1,emoji:"ðŸ¦Š"},{id:"bug",word:"bug",graphemes:["b","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ›"},{id:"dug",word:"dug",graphemes:["d","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â›ï¸"},{id:"hug",word:"hug",graphemes:["h","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ¤—"},{id:"jug",word:"jug",graphemes:["j","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ«—"},{id:"mug",word:"mug",graphemes:["m","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â˜•"},{id:"rug",word:"rug",graphemes:["r","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ¡"},{id:"tug",word:"tug",graphemes:["t","u","g"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ›¥ï¸"},{id:"bun",word:"bun",graphemes:["b","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸž"},{id:"fun",word:"fun",graphemes:["f","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸŽ‰"},{id:"gun",word:"gun",graphemes:["g","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ”«"},{id:"run",word:"run",graphemes:["r","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸƒ"},{id:"sun",word:"sun",graphemes:["s","u","n"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â˜€ï¸"},{id:"but",word:"but",graphemes:["b","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"â†•ï¸"},{id:"cut",word:"cut",graphemes:["c","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"âœ‚ï¸"},{id:"gut",word:"gut",graphemes:["g","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ’ª"},{id:"hut",word:"hut",graphemes:["h","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ›–"},{id:"nut",word:"nut",graphemes:["n","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ¥œ"},{id:"rut",word:"rut",graphemes:["r","u","t"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ›¤ï¸"},{id:"cub",word:"cub",graphemes:["c","u","b"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ»"},{id:"tub",word:"tub",graphemes:["t","u","b"],types:["c","sv","c"],pattern:"CVC",group:"short-u",level:1,emoji:"ðŸ›"},{id:"cake",word:"cake",graphemes:["c","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸŽ‚"},{id:"lake",word:"lake",graphemes:["l","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸžï¸"},{id:"make",word:"make",graphemes:["m","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ”¨"},{id:"take",word:"take",graphemes:["t","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ¤²"},{id:"bake",word:"bake",graphemes:["b","a","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ°"},{id:"came",word:"came",graphemes:["c","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ‘‹"},{id:"game",word:"game",graphemes:["g","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸŽ®"},{id:"name",word:"name",graphemes:["n","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ“›"},{id:"same",word:"same",graphemes:["s","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ”"},{id:"tame",word:"tame",graphemes:["t","a","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ¦"},{id:"cape",word:"cape",graphemes:["c","a","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ¦¸"},{id:"tape",word:"tape",graphemes:["t","a","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ©¹"},{id:"cave",word:"cave",graphemes:["c","a","v","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸ•³ï¸"},{id:"gave",word:"gave",graphemes:["g","a","v","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸŽ"},{id:"wave",word:"wave",graphemes:["w","a","v","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸŒŠ"},{id:"race",word:"race",graphemes:["r","a","c","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-a",level:2,emoji:"ðŸŽï¸"},{id:"bee",word:"bee",graphemes:["b","ee"],types:["c","lv"],pattern:"other",group:"long-e",level:2,emoji:"ðŸ"},{id:"see",word:"see",graphemes:["s","ee"],types:["c","lv"],pattern:"other",group:"long-e",level:2,emoji:"ðŸ‘€"},{id:"tree",word:"tree",graphemes:["tr","ee"],types:["bl","lv"],pattern:"blend",group:"long-e",level:2,emoji:"ðŸŒ²"},{id:"feet",word:"feet",graphemes:["f","ee","t"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸ¦¶"},{id:"meet",word:"meet",graphemes:["m","ee","t"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸ¤"},{id:"seed",word:"seed",graphemes:["s","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸŒ±"},{id:"feed",word:"feed",graphemes:["f","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸ¼"},{id:"need",word:"need",graphemes:["n","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"â¤ï¸"},{id:"weed",word:"weed",graphemes:["w","ee","d"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸŒ¿"},{id:"week",word:"week",graphemes:["w","ee","k"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸ“…"},{id:"peek",word:"peek",graphemes:["p","ee","k"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸ‘ï¸"},{id:"jeep",word:"jeep",graphemes:["j","ee","p"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸš™"},{id:"deep",word:"deep",graphemes:["d","ee","p"],types:["c","lv","c"],pattern:"other",group:"long-e",level:2,emoji:"ðŸŒŠ"},{id:"bike",word:"bike",graphemes:["b","i","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸš²"},{id:"hike",word:"hike",graphemes:["h","i","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸ¥¾"},{id:"like",word:"like",graphemes:["l","i","k","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â¤ï¸"},{id:"pine",word:"pine",graphemes:["p","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸŒ²"},{id:"mine",word:"mine",graphemes:["m","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â›ï¸"},{id:"vine",word:"vine",graphemes:["v","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸ‡"},{id:"line",word:"line",graphemes:["l","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸ“"},{id:"fine",word:"fine",graphemes:["f","i","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸ‘"},{id:"kite",word:"kite",graphemes:["k","i","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸª"},{id:"mite",word:"mite",graphemes:["m","i","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸœ"},{id:"hide",word:"hide",graphemes:["h","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸ™ˆ"},{id:"ride",word:"ride",graphemes:["r","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"ðŸ‡"},{id:"side",word:"side",graphemes:["s","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â¬…ï¸"},{id:"wide",word:"wide",graphemes:["w","i","d","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-i",level:2,emoji:"â†”ï¸"},{id:"bone",word:"bone",graphemes:["b","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ¦´"},{id:"cone",word:"cone",graphemes:["c","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ¦"},{id:"tone",word:"tone",graphemes:["t","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸŽµ"},{id:"zone",word:"zone",graphemes:["z","o","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸš«"},{id:"home",word:"home",graphemes:["h","o","m","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ "},{id:"hope",word:"hope",graphemes:["h","o","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ¤ž"},{id:"rope",word:"rope",graphemes:["r","o","p","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸª¢"},{id:"note",word:"note",graphemes:["n","o","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ“"},{id:"vote",word:"vote",graphemes:["v","o","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ—³ï¸"},{id:"hole",word:"hole",graphemes:["h","o","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ•³ï¸"},{id:"mole",word:"mole",graphemes:["m","o","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸ¦”"},{id:"pole",word:"pole",graphemes:["p","o","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-o",level:2,emoji:"ðŸŽ£"},{id:"cube",word:"cube",graphemes:["c","u","b","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ðŸ§Š"},{id:"tube",word:"tube",graphemes:["t","u","b","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ðŸ§ª"},{id:"tune",word:"tune",graphemes:["t","u","n","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ðŸŽµ"},{id:"cute",word:"cute",graphemes:["c","u","t","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ðŸ¥°"},{id:"mule",word:"mule",graphemes:["m","u","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ðŸ«"},{id:"rule",word:"rule",graphemes:["r","u","l","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ðŸ“"},{id:"huge",word:"huge",graphemes:["h","u","g","e"],types:["c","lv","c","se"],pattern:"CVCe",group:"long-u",level:2,emoji:"ðŸ‹"},{id:"ship",word:"ship",graphemes:["sh","i","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸš¢"},{id:"chip",word:"chip",graphemes:["ch","i","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸŸ"},{id:"chop",word:"chop",graphemes:["ch","o","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ”ª"},{id:"chat",word:"chat",graphemes:["ch","a","t"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ’¬"},{id:"chin",word:"chin",graphemes:["ch","i","n"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ‘¶"},{id:"shut",word:"shut",graphemes:["sh","u","t"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸšª"},{id:"shop",word:"shop",graphemes:["sh","o","p"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ›ï¸"},{id:"shed",word:"shed",graphemes:["sh","e","d"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸšï¸"},{id:"them",word:"them",graphemes:["th","e","m"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ‘¥"},{id:"then",word:"then",graphemes:["th","e","n"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"â­ï¸"},{id:"thin",word:"thin",graphemes:["th","i","n"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ’ª"},{id:"that",word:"that",graphemes:["th","a","t"],types:["d","sv","c"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ‘†"},{id:"math",word:"math",graphemes:["m","a","th"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"âž•"},{id:"bath",word:"bath",graphemes:["b","a","th"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ›"},{id:"rich",word:"rich",graphemes:["r","i","ch"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ’°"},{id:"much",word:"much",graphemes:["m","u","ch"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ“"},{id:"fish",word:"fish",graphemes:["f","i","sh"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸŸ"},{id:"dish",word:"dish",graphemes:["d","i","sh"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"ðŸ½ï¸"},{id:"wish",word:"wish",graphemes:["w","i","sh"],types:["c","sv","d"],pattern:"digraph",group:"digraphs",level:2,emoji:"â­"},{id:"flat",word:"flat",graphemes:["fl","a","t"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ“„"},{id:"flag",word:"flag",graphemes:["fl","a","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ"},{id:"flip",word:"flip",graphemes:["fl","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ”„"},{id:"flop",word:"flop",graphemes:["fl","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŸ"},{id:"slam",word:"slam",graphemes:["sl","a","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸšª"},{id:"slim",word:"slim",graphemes:["sl","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ’ª"},{id:"slap",word:"slap",graphemes:["sl","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ‘‹"},{id:"plan",word:"plan",graphemes:["pl","a","n"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ“‹"},{id:"play",word:"play",graphemes:["pl","ay"],types:["bl","lv"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŽ®"},{id:"clap",word:"clap",graphemes:["cl","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ‘"},{id:"clip",word:"clip",graphemes:["cl","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ“Ž"},{id:"clog",word:"clog",graphemes:["cl","o","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸš§"},{id:"glad",word:"glad",graphemes:["gl","a","d"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ˜Š"},{id:"glob",word:"glob",graphemes:["gl","o","b"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ’§"},{id:"trip",word:"trip",graphemes:["tr","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"âœˆï¸"},{id:"trim",word:"trim",graphemes:["tr","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"âœ‚ï¸"},{id:"trap",word:"trap",graphemes:["tr","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸª¤"},{id:"drip",word:"drip",graphemes:["dr","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ’§"},{id:"drop",word:"drop",graphemes:["dr","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ’§"},{id:"drum",word:"drum",graphemes:["dr","u","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ¥"},{id:"grip",word:"grip",graphemes:["gr","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ¤"},{id:"grin",word:"grin",graphemes:["gr","i","n"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ˜"},{id:"crab",word:"crab",graphemes:["cr","a","b"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ¦€"},{id:"crop",word:"crop",graphemes:["cr","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŒ¾"},{id:"frog",word:"frog",graphemes:["fr","o","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ¸"},{id:"fret",word:"fret",graphemes:["fr","e","t"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ˜Ÿ"},{id:"brag",word:"brag",graphemes:["br","a","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ’¬"},{id:"brim",word:"brim",graphemes:["br","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŽ©"},{id:"spin",word:"spin",graphemes:["sp","i","n"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŒ€"},{id:"spot",word:"spot",graphemes:["sp","o","t"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ”µ"},{id:"step",word:"step",graphemes:["st","e","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ‘Ÿ"},{id:"stop",word:"stop",graphemes:["st","o","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ›‘"},{id:"stem",word:"stem",graphemes:["st","e","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŒ¹"},{id:"snap",word:"snap",graphemes:["sn","a","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ“¸"},{id:"snip",word:"snip",graphemes:["sn","i","p"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"âœ‚ï¸"},{id:"swim",word:"swim",graphemes:["sw","i","m"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŠ"},{id:"sled",word:"sled",graphemes:["sl","e","d"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸ›·"},{id:"slug",word:"slug",graphemes:["sl","u","g"],types:["bl","sv","c"],pattern:"blend",group:"blends",level:3,emoji:"ðŸŒ"},{id:"oil",word:"oil",graphemes:["oi","l"],types:["dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ›¢ï¸"},{id:"coin",word:"coin",graphemes:["c","oi","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸª™"},{id:"foil",word:"foil",graphemes:["f","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ³"},{id:"soil",word:"soil",graphemes:["s","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸŒ±"},{id:"coil",word:"coil",graphemes:["c","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸŒ€"},{id:"boil",word:"boil",graphemes:["b","oi","l"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"â™¨ï¸"},{id:"boy",word:"boy",graphemes:["b","oy"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ‘¦"},{id:"toy",word:"toy",graphemes:["t","oy"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸª€"},{id:"joy",word:"joy",graphemes:["j","oy"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ˜„"},{id:"cow",word:"cow",graphemes:["c","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ„"},{id:"now",word:"now",graphemes:["n","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"â°"},{id:"how",word:"how",graphemes:["h","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"â“"},{id:"bow_dip",word:"bow",graphemes:["b","ow"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸŽ€"},{id:"town",word:"town",graphemes:["t","ow","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ˜ï¸"},{id:"gown",word:"gown",graphemes:["g","ow","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ‘—"},{id:"down",word:"down",graphemes:["d","ow","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"â¬‡ï¸"},{id:"out",word:"out",graphemes:["ou","t"],types:["dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸšª"},{id:"shout",word:"shout",graphemes:["sh","ou","t"],types:["d","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ“¢"},{id:"loud",word:"loud",graphemes:["l","ou","d"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ”Š"},{id:"cloud",word:"cloud",graphemes:["cl","ou","d"],types:["bl","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"â˜ï¸"},{id:"mouth",word:"mouth",graphemes:["m","ou","th"],types:["c","dp","d"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ‘„"},{id:"south",word:"south",graphemes:["s","ou","th"],types:["c","dp","d"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ§­"},{id:"saw",word:"saw",graphemes:["s","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ”¨"},{id:"jaw",word:"jaw",graphemes:["j","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ’ª"},{id:"paw",word:"paw",graphemes:["p","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ¾"},{id:"raw",word:"raw",graphemes:["r","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ¥©"},{id:"law",word:"law",graphemes:["l","aw"],types:["c","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"âš–ï¸"},{id:"yawn",word:"yawn",graphemes:["y","aw","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ˜´"},{id:"dawn",word:"dawn",graphemes:["d","aw","n"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸŒ…"},{id:"hawk",word:"hawk",graphemes:["h","aw","k"],types:["c","dp","c"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ¦…"},{id:"draw",word:"draw",graphemes:["dr","aw"],types:["bl","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸŽ¨"},{id:"claw",word:"claw",graphemes:["cl","aw"],types:["bl","dp"],pattern:"other",group:"diphthongs",level:3,emoji:"ðŸ¦ž"}];function Pt(a){return B.filter(e=>e.level<=a)}function Wt(a,e=3){let t=B.filter(r=>r.id!==a.id&&r.group===a.group);return t.length<e&&(t=B.filter(r=>r.id!==a.id&&r.level===a.level)),K(t).slice(0,e)}function K(a){const e=[...a];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}const he=["short-a","short-e","short-i","short-o","short-u","long-a","long-e","long-i","long-o","long-u","digraphs","blends","diphthongs"];class $t{getAdaptivePool(e=10,t={}){const r=t.maxLevel??p.get("difficulty")??1;let s=t.group?B:Pt(r);t.group&&(s=s.filter(c=>c.group===t.group)),s.length===0&&(s=B.slice(0,20));const o=p.get("wordStats")||{},n=s.map(c=>{const d=o[c.id];if(!d||d.attempts===0)return{word:c,weight:3};const h=d.correct/d.attempts;return h<.5?{word:c,weight:5}:h<.7?{word:c,weight:3}:h>.9&&d.attempts>=Oe?{word:c,weight:.5}:{word:c,weight:1}});return this._weightedSample(n,e)}getNextWord(e={}){const t=this.getAdaptivePool(20,e),s=(p.get("wordHistory")||[]).slice(0,5).map(n=>n.wordId),o=t.filter(n=>!s.includes(n.id));return o.length>0?o[0]:t[0]||B[0]}recordAttempt(e,t,r="blend"){p.recordWordAttempt(e,t),p.addWordHistory({wordId:e,correct:t,mode:r,timestamp:new Date().toISOString()});const s=B.find(o=>o.id===e);s&&this._updateGroupMastery(s.group)}_updateGroupMastery(e){const t=p.get("wordStats")||{},r=B.filter(c=>c.group===e);let s=0,o=0;for(const c of r){const d=t[c.id];d&&d.attempts>0&&(s+=d.attempts,o+=d.correct)}const n=s>0?o/s:0;p.updateGroupMastery(e,n)}getWordAccuracy(e){const r=(p.get("wordStats")||{})[e];return r?{...r,accuracy:r.attempts>0?r.correct/r.attempts:0}:null}isNewWord(e){const t=p.get("wordStats")||{};return!t[e]||t[e].attempts===0}getOverallStats(){const e=p.get("wordStats")||{},t=p.get("wordHistory")||[],r=p.get("groupMastery")||{};let s=0,o=0,n=0,c=0;for(const[,d]of Object.entries(e))d.attempts>0&&(s+=d.attempts,o+=d.correct,n++,d.attempts>=Oe&&d.correct/d.attempts>=Lt&&c++);return{totalAttempts:s,totalCorrect:o,overallAccuracy:s>0?o/s:0,wordsAttempted:n,wordsMastered:c,totalWords:B.length,groupMastery:r,recentHistory:t.slice(0,50),xp:p.get("xp"),level:p.get("level"),streak:p.get("streak"),bestStreak:p.get("bestStreak")}}exportCSV(){const e=p.get("wordStats")||{},t=["Word,Attempts,Correct,Accuracy,Last Seen"];for(const r of B){const s=e[r.id];if(s&&s.attempts>0){const o=(s.correct/s.attempts*100).toFixed(0);t.push(`${r.word},${s.attempts},${s.correct},${o}%,${s.lastSeen||""}`)}}return t.join(`
`)}_weightedSample(e,t){const r=[],s=[...e];for(let o=0;o<t&&s.length>0;o++){const n=s.reduce((d,h)=>d+h.weight,0);let c=Math.random()*n;for(let d=0;d<s.length;d++)if(c-=s[d].weight,c<=0){r.push(s[d].word),s.splice(d,1);break}}return r}}const se=new $t;class Rt{constructor(){this._recognition=null,this._listening=!1,this.supported=!!(window.SpeechRecognition||window.webkitSpeechRecognition)}listen(e){return this.supported?new Promise(t=>{const r=window.SpeechRecognition||window.webkitSpeechRecognition;this._recognition=new r,this._recognition.lang="en-US",this._recognition.continuous=!1,this._recognition.interimResults=!1,this._recognition.maxAlternatives=5;const s=setTimeout(()=>{this.stop(),t(null)},8e3);this._recognition.onresult=o=>{clearTimeout(s);const c=Array.from(o.results[0]).map(v=>({text:v.transcript.toLowerCase().trim(),confidence:v.confidence})),d=e.toLowerCase().trim(),h=c.some(v=>v.text===d);let g={text:"",score:0,confidence:0};for(const v of c){const S=this._phoneticSimilarity(v.text,d);S>g.score&&(g={text:v.text,score:S,confidence:v.confidence})}this._listening=!1,t({heard:g.text,score:Math.round(g.score*100),correct:h||g.score>=.75,confidence:g.confidence})},this._recognition.onerror=()=>{clearTimeout(s),this._listening=!1,t(null)},this._recognition.onend=()=>{clearTimeout(s),this._listening=!1},this._listening=!0,this._recognition.start()}):Promise.resolve(null)}stop(){if(this._recognition){try{this._recognition.stop()}catch{}this._recognition=null}this._listening=!1}get isListening(){return this._listening}_phoneticSimilarity(e,t){if(e===t)return 1;const r=d=>d.replace(/ph/g,"f").replace(/ck/g,"k").replace(/igh/g,"i").replace(/tion/g,"shun").replace(/ee/g,"e").replace(/oo/g,"u").replace(/th/g,"t").replace(/sh/g,"s").replace(/ch/g,"c"),s=r(e),o=r(t),n=this._levenshtein(s,o),c=Math.max(s.length,o.length,1);return 1-n/c}_levenshtein(e,t){const r=e.length,s=t.length,o=Array.from({length:r+1},()=>new Array(s+1).fill(0));for(let n=0;n<=r;n++)o[n][0]=n;for(let n=0;n<=s;n++)o[0][n]=n;for(let n=1;n<=r;n++)for(let c=1;c<=s;c++){const d=e[n-1]===t[c-1]?0:1;o[n][c]=Math.min(o[n-1][c]+1,o[n][c-1]+1,o[n-1][c-1]+d)}return o[r][s]}}const te=new Rt,R="/blending/",ie={neutral:`${R}images/mascot/giri-neutral.png`,celebrate:`${R}images/mascot/giri-celebrate.png`,confetti:`${R}images/mascot/giri-celebrate-confetti.png`,clap:`${R}images/mascot/giri-clap-frame.png`,encourage:`${R}images/mascot/giri-encourage.png`,holdCard:`${R}images/mascot/giri-hold-card.png`,pointLeft:`${R}images/mascot/giri-point-left.png`,pointRight:`${R}images/mascot/giri-point-right.png`,thinking:`${R}images/mascot/giri-thinking.png`,trophy:`${R}images/mascot/giri-trophy.png`,whiteboard:`${R}images/mascot/giri-whiteboard.png`},Fe=["You're doing great!","Amazing!","Keep going!","Super reader!","You rock!","Fantastic!","Way to go!","Brilliant!","Wow!","You're a star!","Nice work!","So proud of you!"],qe=["Almost there!","Try again!","You can do it!","Keep trying!","So close!","Let's try once more!"];class Dt{constructor(){this._state="neutral",this._preloaded=!1}preload(){if(!this._preloaded){for(const e of Object.values(ie)){const t=new Image;t.src=e}this._preloaded=!0}}init(){this.preload(),this._render("mascot-mini","neutral",28),this._render("mascot-home","holdCard",100),this._render("mascot","neutral",80)}setState(e){ie[e]&&(this._state=e,this._render("mascot",e,80),this._render("mascot-mini",e==="neutral"?"neutral":e,28))}setHomeState(e="holdCard"){this._render("mascot-home",e,100)}setResultState(e="celebrate"){this._render("result-mascot",e,140)}celebrate(e=!1){const t=e?"trophy":"celebrate";this.setState(t);const r=document.getElementById("mascot");r&&(r.classList.add("celebrate"),setTimeout(()=>r.classList.remove("celebrate"),2e3))}encourage(){this.setState("encourage");const e=document.getElementById("mascot");e&&(e.classList.add("peek"),setTimeout(()=>{e.classList.remove("peek"),this.setState("neutral")},2500))}think(){this.setState("thinking")}point(e="right"){this.setState(e==="left"?"pointLeft":"pointRight")}clap(){this.setState("clap"),setTimeout(()=>this.setState("neutral"),2e3)}getCheer(){return Fe[Math.floor(Math.random()*Fe.length)]}getEncouragement(){return qe[Math.floor(Math.random()*qe.length)]}_render(e,t,r){const s=document.getElementById(e);if(!s)return;const o=ie[t]||ie.neutral;let n=s.querySelector("img");n||(n=document.createElement("img"),n.alt="Giri the mascot",n.draggable=!1,n.style.cssText=`width:${r}px; height:${r}px; object-fit:contain; user-select:none; pointer-events:none;`,s.innerHTML="",s.appendChild(n)),n.src=o,n.style.width=`${r}px`,n.style.height=`${r}px`}}const D=new Dt,Ot=he.slice(0,10);class Nt{constructor(){this._canvas=null,this._ctx=null,this._angle=0,this._spinning=!1,this._segments=[],this._onLand=null}init(e){this._canvas=e,this._ctx=e.getContext("2d"),this._segments=Ot.map(t=>({key:t,...J[t]})),this._draw()}spin(){return this._spinning?Promise.reject("already spinning"):(this._spinning=!0,new Promise(e=>{const t=this._angle+(Math.random()*3+4)*Math.PI*2;le.to(this,{_angle:t,duration:3.5,ease:"power4.out",onUpdate:()=>{this._draw();const r=this._getSelectedIndex();this._lastSegIndex!==r&&(this._lastSegIndex=r,M.playSfx("spin"))},onComplete:()=>{this._spinning=!1;const r=this._getSelectedIndex(),s=this._segments[r];this._flashSegment(r),e(s.key)}})}))}get isSpinning(){return this._spinning}_getSelectedIndex(){const e=Math.PI*2/this._segments.length,t=(this._angle%(Math.PI*2)+Math.PI*2)%(Math.PI*2),r=Math.floor(t/e)%this._segments.length;return this._segments.length-1-r}_draw(){const e=this._ctx,t=this._canvas;if(!e||!t)return;const r=t.width/2,s=t.height/2,o=Math.min(r,s)-6,n=Math.PI*2/this._segments.length;e.clearRect(0,0,t.width,t.height),e.save(),e.translate(r,s),e.rotate(this._angle);for(let c=0;c<this._segments.length;c++){const d=this._segments[c],h=c*n,g=h+n;e.beginPath(),e.moveTo(0,0),e.arc(0,0,o,h,g),e.closePath(),e.fillStyle=d.color,e.fill(),e.strokeStyle="rgba(255,255,255,0.4)",e.lineWidth=2,e.stroke(),e.save(),e.rotate(h+n/2),e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(d.icon,o*.58,0),e.font="bold 10px Nunito, sans-serif",e.fillStyle="#fff",e.fillText(d.label,o*.38,0),e.restore()}e.restore(),e.beginPath(),e.arc(r,s,28,0,Math.PI*2),e.fillStyle="#fff",e.fill(),e.strokeStyle="rgba(0,0,0,0.1)",e.lineWidth=2,e.stroke(),e.save(),e.fillStyle="#fff",e.strokeStyle="#333",e.lineWidth=2,e.beginPath(),e.moveTo(r,4),e.lineTo(r-10,-4),e.lineTo(r+10,-4),e.closePath(),e.fill(),e.stroke(),e.restore()}_flashSegment(e){if(!this._ctx)return;let r=0;const s=setInterval(()=>{r++,this._draw(),r>=4&&clearInterval(s)},150)}}function ae(a,e,t){e.innerHTML="";const r={c:"consonant",sv:"short-vowel",lv:"long-vowel",d:"digraph",bl:"blend",se:"silent-e",rc:"r-control"},s=a.graphemes.map((o,n)=>{const c=document.createElement("div");return c.className=`letter-tile letter-tile--${r[a.types[n]]||"consonant"}`,c.textContent=o,c.setAttribute("role","listitem"),c.setAttribute("aria-label",`${o}, ${r[a.types[n]]||"consonant"}`),e.appendChild(c),c});return le.set(s,{opacity:0,scale:.3,y:-60,rotation:()=>le.utils.random(-30,30)}),le.to(s,{opacity:1,scale:1,y:0,rotation:0,duration:.45,stagger:.12,ease:"back.out(1.7)",onComplete:()=>{s.forEach(o=>o.classList.add("letter-tile--revealed"))},onUpdate:function(){const o=this.progress(),n=.12;s.forEach((c,d)=>{const h=d*n/(s.length*n+.45);o>=h+.3&&!s[d].dataset.landed&&(s[d].dataset.landed="true",t==null||t(d))})}}),s}const fe=new Nt;Ye.register(...St);let X=null;function Ft(a){const e=se.getOverallStats();a.innerHTML=`
    <!-- Summary Stats -->
    <div class="dash-stats-grid">
      <div class="dash-stat-card">
        <span class="dash-stat-value">${e.wordsAttempted}</span>
        <span class="dash-stat-label">Words practiced</span>
      </div>
      <div class="dash-stat-card">
        <span class="dash-stat-value">${e.wordsMastered}</span>
        <span class="dash-stat-label">Words mastered</span>
      </div>
      <div class="dash-stat-card">
        <span class="dash-stat-value">${Math.round(e.overallAccuracy*100)}%</span>
        <span class="dash-stat-label">Accuracy</span>
      </div>
      <div class="dash-stat-card">
        <span class="dash-stat-value">${e.bestStreak}</span>
        <span class="dash-stat-label">Best streak</span>
      </div>
    </div>

    <!-- Accuracy Chart -->
    <h3 class="dash-section-title">Group Mastery</h3>
    <div class="dash-chart-wrap">
      <canvas id="chart-mastery" aria-label="Group mastery chart"></canvas>
    </div>

    <!-- Mastery Bars -->
    <div class="mastery-bar-list" id="mastery-bars"></div>

    <!-- Learning Path -->
    <h3 class="dash-section-title" style="margin-top:24px">Learning Path</h3>
    <div id="learning-path"></div>

    <!-- Recent Words -->
    <h3 class="dash-section-title" style="margin-top:24px">Recent Words</h3>
    <div style="overflow-x:auto;">
      <table class="word-history-table">
        <thead><tr><th>Word</th><th>Mode</th><th>Result</th><th>When</th></tr></thead>
        <tbody id="word-history-body"></tbody>
      </table>
    </div>

    <!-- Actions -->
    <div class="dash-actions">
      <button class="btn btn--ghost" id="btn-export-csv">Export CSV</button>
      <button class="btn btn--ghost" id="btn-add-words">Custom Words</button>
    </div>
  `,qt(e),Ht(e),Gt(e),Ut(e),zt()}function qt(a){const e=document.getElementById("chart-mastery");if(!e)return;X&&(X.destroy(),X=null);const t=he.filter(n=>J[n]),r=t.map(n=>J[n].label),s=t.map(n=>Math.round((a.groupMastery[n]??0)*100)),o=t.map(n=>J[n].color);X=new Ye(e,{type:"bar",data:{labels:r,datasets:[{label:"Mastery %",data:s,backgroundColor:o.map(n=>n+"80"),borderColor:o,borderWidth:2,borderRadius:6,barPercentage:.7}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:n=>n+"%",font:{size:11}},grid:{display:!1}},x:{ticks:{font:{size:10},maxRotation:45},grid:{display:!1}}}}})}function Ht(a){const e=document.getElementById("mastery-bars");e&&(e.innerHTML=he.map(t=>{const r=J[t];if(!r)return"";const s=Math.round((a.groupMastery[t]??0)*100);return`
      <div class="mastery-bar-item">
        <span class="mastery-bar-label">${r.icon} ${r.label}</span>
        <div class="mastery-bar-track">
          <div class="mastery-bar-fill" style="width:${s}%; background:${r.color}"></div>
        </div>
        <span class="mastery-bar-pct">${s}%</span>
      </div>
    `}).join(""))}function Gt(a){const e=document.getElementById("learning-path");if(!e)return;const t=Tt(a.groupMastery);e.innerHTML=ye.map(r=>{const s=t.includes(r.id),o=r.groups.map(c=>a.groupMastery[c]??0),n=o.length?Math.round(o.reduce((c,d)=>c+d,0)/o.length*100):0;return`
      <div class="mastery-bar-item" style="opacity:${s?1:.4}">
        <span class="mastery-bar-label">${r.icon} ${r.name}</span>
        <div class="mastery-bar-track">
          <div class="mastery-bar-fill" style="width:${n}%"></div>
        </div>
        <span class="mastery-bar-pct">${s?n+"%":"ðŸ”’"}</span>
      </div>
    `}).join("")}function Ut(a){const e=document.getElementById("word-history-body");if(!e)return;const t=a.recentHistory.slice(0,30).map(r=>{const s=B.find(d=>d.id===r.wordId),o=(s==null?void 0:s.emoji)||"",n=Yt(r.timestamp),c=r.correct?'<span style="color:var(--color-success)">âœ“</span>':'<span style="color:var(--color-error)">âœ—</span>';return`<tr>
      <td>${o} ${r.wordId}</td>
      <td>${r.mode}</td>
      <td>${c}</td>
      <td>${n}</td>
    </tr>`});e.innerHTML=t.join("")||'<tr><td colspan="4" style="text-align:center;color:var(--text-muted)">No history yet</td></tr>'}function zt(){var a,e;(a=document.getElementById("btn-export-csv"))==null||a.addEventListener("click",()=>{const t=se.exportCSV(),r=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="phonicsquest-progress.csv",o.click(),URL.revokeObjectURL(s)}),(e=document.getElementById("btn-add-words"))==null||e.addEventListener("click",()=>{alert(`Custom words feature coming soon! You can add words via the browser console:

store.set("customWords", [...])`)})}function Yt(a){if(!a)return"";const e=Date.now()-new Date(a).getTime(),t=Math.floor(e/6e4);if(t<1)return"just now";if(t<60)return`${t}m ago`;const r=Math.floor(t/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}function Xt(){X&&(X.destroy(),X=null)}var _e={};(function a(e,t,r,s){var o=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),n=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!e.OffscreenCanvas)return!1;try{var l=new OffscreenCanvas(1,1),i=l.getContext("2d");i.fillRect(0,0,1,1);var u=l.transferToImageBitmap();i.createPattern(u,"no-repeat")}catch{return!1}return!0}();function d(){}function h(l){var i=t.exports.Promise,u=i!==void 0?i:e.Promise;return typeof u=="function"?new u(l):(l(d,d),null)}var g=function(l,i){return{transform:function(u){if(l)return u;if(i.has(u))return i.get(u);var f=new OffscreenCanvas(u.width,u.height),y=f.getContext("2d");return y.drawImage(u,0,0),i.set(u,f),f},clear:function(){i.clear()}}}(c,new Map),v=function(){var l=Math.floor(16.666666666666668),i,u,f={},y=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(i=function(b){var w=Math.random();return f[w]=requestAnimationFrame(function m(C){y===C||y+l-1<C?(y=C,delete f[w],b()):f[w]=requestAnimationFrame(m)}),w},u=function(b){f[b]&&cancelAnimationFrame(f[b])}):(i=function(b){return setTimeout(b,l)},u=function(b){return clearTimeout(b)}),{frame:i,cancel:u}}(),S=function(){var l,i,u={};function f(y){function b(w,m){y.postMessage({options:w||{},callback:m})}y.init=function(m){var C=m.transferControlToOffscreen();y.postMessage({canvas:C},[C])},y.fire=function(m,C,E){if(i)return b(m,null),i;var x=Math.random().toString(36).slice(2);return i=h(function(k){function I(T){T.data.callback===x&&(delete u[x],y.removeEventListener("message",I),i=null,g.clear(),E(),k())}y.addEventListener("message",I),b(m,x),u[x]=I.bind(null,{data:{callback:x}})}),i},y.reset=function(){y.postMessage({reset:!0});for(var m in u)u[m](),delete u[m]}}return function(){if(l)return l;if(!r&&o){var y=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{l=new Worker(URL.createObjectURL(new Blob([y])))}catch(b){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",b),null}f(l)}return l}}(),L={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function G(l,i){return i?i(l):l}function Q(l){return l!=null}function j(l,i,u){return G(l&&Q(l[i])?l[i]:L[i],u)}function rt(l){return l<0?0:Math.floor(l)}function st(l,i){return Math.floor(Math.random()*(i-l))+l}function ge(l){return parseInt(l,16)}function ot(l){return l.map(nt)}function nt(l){var i=String(l).replace(/[^0-9a-f]/gi,"");return i.length<6&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),{r:ge(i.substring(0,2)),g:ge(i.substring(2,4)),b:ge(i.substring(4,6))}}function at(l){var i=j(l,"origin",Object);return i.x=j(i,"x",Number),i.y=j(i,"y",Number),i}function it(l){l.width=document.documentElement.clientWidth,l.height=document.documentElement.clientHeight}function lt(l){var i=l.getBoundingClientRect();l.width=i.width,l.height=i.height}function ct(l){var i=document.createElement("canvas");return i.style.position="fixed",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",i.style.zIndex=l,i}function dt(l,i,u,f,y,b,w,m,C){l.save(),l.translate(i,u),l.rotate(b),l.scale(f,y),l.arc(0,0,1,w,m,C),l.restore()}function pt(l){var i=l.angle*(Math.PI/180),u=l.spread*(Math.PI/180);return{x:l.x,y:l.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:l.startVelocity*.5+Math.random()*l.startVelocity,angle2D:-i+(.5*u-Math.random()*u),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:l.color,shape:l.shape,tick:0,totalTicks:l.ticks,decay:l.decay,drift:l.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:l.gravity*3,ovalScalar:.6,scalar:l.scalar,flat:l.flat}}function ht(l,i){i.x+=Math.cos(i.angle2D)*i.velocity+i.drift,i.y+=Math.sin(i.angle2D)*i.velocity+i.gravity,i.velocity*=i.decay,i.flat?(i.wobble=0,i.wobbleX=i.x+10*i.scalar,i.wobbleY=i.y+10*i.scalar,i.tiltSin=0,i.tiltCos=0,i.random=1):(i.wobble+=i.wobbleSpeed,i.wobbleX=i.x+10*i.scalar*Math.cos(i.wobble),i.wobbleY=i.y+10*i.scalar*Math.sin(i.wobble),i.tiltAngle+=.1,i.tiltSin=Math.sin(i.tiltAngle),i.tiltCos=Math.cos(i.tiltAngle),i.random=Math.random()+2);var u=i.tick++/i.totalTicks,f=i.x+i.random*i.tiltCos,y=i.y+i.random*i.tiltSin,b=i.wobbleX+i.random*i.tiltCos,w=i.wobbleY+i.random*i.tiltSin;if(l.fillStyle="rgba("+i.color.r+", "+i.color.g+", "+i.color.b+", "+(1-u)+")",l.beginPath(),n&&i.shape.type==="path"&&typeof i.shape.path=="string"&&Array.isArray(i.shape.matrix))l.fill(ut(i.shape.path,i.shape.matrix,i.x,i.y,Math.abs(b-f)*.1,Math.abs(w-y)*.1,Math.PI/10*i.wobble));else if(i.shape.type==="bitmap"){var m=Math.PI/10*i.wobble,C=Math.abs(b-f)*.1,E=Math.abs(w-y)*.1,x=i.shape.bitmap.width*i.scalar,k=i.shape.bitmap.height*i.scalar,I=new DOMMatrix([Math.cos(m)*C,Math.sin(m)*C,-Math.sin(m)*E,Math.cos(m)*E,i.x,i.y]);I.multiplySelf(new DOMMatrix(i.shape.matrix));var T=l.createPattern(g.transform(i.shape.bitmap),"no-repeat");T.setTransform(I),l.globalAlpha=1-u,l.fillStyle=T,l.fillRect(i.x-x/2,i.y-k/2,x,k),l.globalAlpha=1}else if(i.shape==="circle")l.ellipse?l.ellipse(i.x,i.y,Math.abs(b-f)*i.ovalScalar,Math.abs(w-y)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI):dt(l,i.x,i.y,Math.abs(b-f)*i.ovalScalar,Math.abs(w-y)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI);else if(i.shape==="star")for(var _=Math.PI/2*3,V=4*i.scalar,W=8*i.scalar,$=i.x,N=i.y,U=5,O=Math.PI/U;U--;)$=i.x+Math.cos(_)*W,N=i.y+Math.sin(_)*W,l.lineTo($,N),_+=O,$=i.x+Math.cos(_)*V,N=i.y+Math.sin(_)*V,l.lineTo($,N),_+=O;else l.moveTo(Math.floor(i.x),Math.floor(i.y)),l.lineTo(Math.floor(i.wobbleX),Math.floor(y)),l.lineTo(Math.floor(b),Math.floor(w)),l.lineTo(Math.floor(f),Math.floor(i.wobbleY));return l.closePath(),l.fill(),i.tick<i.totalTicks}function gt(l,i,u,f,y){var b=i.slice(),w=l.getContext("2d"),m,C,E=h(function(x){function k(){m=C=null,w.clearRect(0,0,f.width,f.height),g.clear(),y(),x()}function I(){r&&!(f.width===s.width&&f.height===s.height)&&(f.width=l.width=s.width,f.height=l.height=s.height),!f.width&&!f.height&&(u(l),f.width=l.width,f.height=l.height),w.clearRect(0,0,f.width,f.height),b=b.filter(function(T){return ht(w,T)}),b.length?m=v.frame(I):k()}m=v.frame(I),C=k});return{addFettis:function(x){return b=b.concat(x),E},canvas:l,promise:E,reset:function(){m&&v.cancel(m),C&&C()}}}function Te(l,i){var u=!l,f=!!j(i||{},"resize"),y=!1,b=j(i,"disableForReducedMotion",Boolean),w=o&&!!j(i||{},"useWorker"),m=w?S():null,C=u?it:lt,E=l&&m?!!l.__confetti_initialized:!1,x=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,k;function I(_,V,W){for(var $=j(_,"particleCount",rt),N=j(_,"angle",Number),U=j(_,"spread",Number),O=j(_,"startVelocity",Number),ft=j(_,"decay",Number),yt=j(_,"gravity",Number),bt=j(_,"drift",Number),Ae=j(_,"colors",ot),wt=j(_,"ticks",Number),Be=j(_,"shapes"),Ct=j(_,"scalar"),_t=!!j(_,"flat"),Pe=at(_),We=$,me=[],jt=l.width*Pe.x,Et=l.height*Pe.y;We--;)me.push(pt({x:jt,y:Et,angle:N,spread:U,startVelocity:O,color:Ae[We%Ae.length],shape:Be[st(0,Be.length)],ticks:wt,decay:ft,gravity:yt,drift:bt,scalar:Ct,flat:_t}));return k?k.addFettis(me):(k=gt(l,me,C,V,W),k.promise)}function T(_){var V=b||j(_,"disableForReducedMotion",Boolean),W=j(_,"zIndex",Number);if(V&&x)return h(function(O){O()});u&&k?l=k.canvas:u&&!l&&(l=ct(W),document.body.appendChild(l)),f&&!E&&C(l);var $={width:l.width,height:l.height};m&&!E&&m.init(l),E=!0,m&&(l.__confetti_initialized=!0);function N(){if(m){var O={getBoundingClientRect:function(){if(!u)return l.getBoundingClientRect()}};C(O),m.postMessage({resize:{width:O.width,height:O.height}});return}$.width=$.height=null}function U(){k=null,f&&(y=!1,e.removeEventListener("resize",N)),u&&l&&(document.body.contains(l)&&document.body.removeChild(l),l=null,E=!1)}return f&&!y&&(y=!0,e.addEventListener("resize",N,!1)),m?m.fire(_,$,U):I(_,$,U)}return T.reset=function(){m&&m.reset(),k&&k.reset()},T}var ue;function Ve(){return ue||(ue=Te(null,{useWorker:!0,resize:!0})),ue}function ut(l,i,u,f,y,b,w){var m=new Path2D(l),C=new Path2D;C.addPath(m,new DOMMatrix(i));var E=new Path2D;return E.addPath(C,new DOMMatrix([Math.cos(w)*y,Math.sin(w)*y,-Math.sin(w)*b,Math.cos(w)*b,u,f])),E}function mt(l){if(!n)throw new Error("path confetti are not supported in this browser");var i,u;typeof l=="string"?i=l:(i=l.path,u=l.matrix);var f=new Path2D(i),y=document.createElement("canvas"),b=y.getContext("2d");if(!u){for(var w=1e3,m=w,C=w,E=0,x=0,k,I,T=0;T<w;T+=2)for(var _=0;_<w;_+=2)b.isPointInPath(f,T,_,"nonzero")&&(m=Math.min(m,T),C=Math.min(C,_),E=Math.max(E,T),x=Math.max(x,_));k=E-m,I=x-C;var V=10,W=Math.min(V/k,V/I);u=[W,0,0,W,-Math.round(k/2+m)*W,-Math.round(I/2+C)*W]}return{type:"path",path:i,matrix:u}}function vt(l){var i,u=1,f="#000000",y='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof l=="string"?i=l:(i=l.text,u="scalar"in l?l.scalar:u,y="fontFamily"in l?l.fontFamily:y,f="color"in l?l.color:f);var b=10*u,w=""+b+"px "+y,m=new OffscreenCanvas(b,b),C=m.getContext("2d");C.font=w;var E=C.measureText(i),x=Math.ceil(E.actualBoundingBoxRight+E.actualBoundingBoxLeft),k=Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent),I=2,T=E.actualBoundingBoxLeft+I,_=E.actualBoundingBoxAscent+I;x+=I+I,k+=I+I,m=new OffscreenCanvas(x,k),C=m.getContext("2d"),C.font=w,C.fillStyle=f,C.fillText(i,T,_);var V=1/u;return{type:"bitmap",bitmap:m.transferToImageBitmap(),matrix:[V,0,0,V,-x*V/2,-k*V/2]}}t.exports=function(){return Ve().apply(this,arguments)},t.exports.reset=function(){Ve().reset()},t.exports.create=Te,t.exports.shapeFromPath=mt,t.exports.shapeFromText=vt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),_e,!1);const je=_e.exports;_e.exports.create;const Ee=()=>document.getElementById("confetti-canvas");function Kt(){const a=Ee();if(!a)return;je.create(a,{resize:!0,useWorker:!0})({particleCount:60,spread:70,origin:{y:.6},colors:["#6c63ff","#ff6b8a","#22c55e","#f59e0b","#3b82f6"],shapes:["circle","square"],gravity:1.2,scalar:.9})}function Zt(){const a=Ee();if(!a)return;const e=je.create(a,{resize:!0,useWorker:!0}),r=Date.now()+2e3,s=()=>{e({particleCount:4,angle:60,spread:55,origin:{x:0},colors:["#6c63ff","#ff6b8a","#f59e0b"]}),e({particleCount:4,angle:120,spread:55,origin:{x:1},colors:["#22c55e","#3b82f6","#a855f7"]}),Date.now()<r&&requestAnimationFrame(s)};s()}function Jt(){const a=Ee();if(!a)return;const e=je.create(a,{resize:!0,useWorker:!0});for(let t=0;t<3;t++)setTimeout(()=>{e({particleCount:40,startVelocity:30,spread:360,origin:{x:.2+Math.random()*.6,y:.9},colors:["#6c63ff","#ff6b8a","#22c55e","#f59e0b"],gravity:.8})},t*400)}const Qt={c:"consonant",sv:"short-vowel",lv:"long-vowel",d:"digraph",bl:"blend",se:"silent-e",rc:"r-control",dp:"diphthong"},He={c:"consonant",sv:"short vowel",lv:"long vowel",d:"digraph",bl:"blend",se:"silent e",rc:"r-controlled",dp:"diphthong"};function q(a,e,t={}){const{showDiacritics:r=!0,showLabels:s=!1,hiddenIndices:o=[],revealedIndices:n=null}=t;e.innerHTML="";for(let c=0;c<a.graphemes.length;c++){const d=a.graphemes[c],h=a.types[c],g=o.includes(c),v=n===null||n.includes(c),S=document.createElement("div");S.className="phoneme-tile",S.setAttribute("role","listitem");const L=document.createElement("span");if(L.className=`phoneme-symbol phoneme-symbol--${Qt[h]||"consonant"}`,g?(L.textContent="?",L.classList.add("phoneme-symbol--hidden"),L.setAttribute("aria-label","missing sound")):v?(L.textContent=d,L.setAttribute("aria-label",`${d}, ${He[h]||h}`)):(L.textContent="â€¢",L.classList.add("phoneme-symbol--unrevealed"),L.setAttribute("aria-label","unrevealed sound")),S.appendChild(L),r&&v&&!g){const G=d.toLowerCase().replace("ee","e").replace("ay","a"),Q=Bt[G];if(Q){const j=document.createElement("span");j.className="phoneme-diacritic",h==="sv"?j.textContent=Q.sv:h==="lv"&&(j.textContent=Q.lv),j.textContent&&S.appendChild(j)}}if(s&&v&&!g){const G=document.createElement("span");G.className="phoneme-label",G.textContent=He[h]||"",S.appendChild(G)}v&&!g&&(S.style.animationDelay=`${c*100}ms`),e.appendChild(S)}}function Z(a,e,t=!0){if(!e)return;e.textContent=t?a.emoji:"";const r=e.closest(".word-image-wrap");r&&(r.style.display=t?"":"none")}let Se=null,F=0,re=0,oe=!1;function er(a,e){var t;Se=a,F=0,re=Date.now(),oe=!1,Z(a,e.wordEmoji,!0),e.modeInstruction.textContent="Listen to each sound, then blend them together!",q(a,e.phonemeRow,{showDiacritics:!0,revealedIndices:[]}),e.modeArea.innerHTML=`
    <div style="display:flex; flex-direction:column; align-items:center; gap:var(--space-4);">
      <button class="btn btn--primary btn--xl" id="btn-reveal-next" aria-label="Reveal next sound">
        Reveal Sound ðŸ”Š
      </button>
      <div class="blend-progress" aria-live="polite" id="blend-progress">
        Sound 0 of ${a.graphemes.length}
      </div>
    </div>
  `,e.btnCheck.style.display="none",e.btnSayIt.style.display="none",e.btnSkip.style.display="",(t=document.getElementById("btn-reveal-next"))==null||t.addEventListener("click",()=>{be(a,e)}),p.get("autoplay")&&setTimeout(()=>be(a,e),600)}async function be(a,e){if(oe||F>=a.graphemes.length)return;oe=!0,F++;const t=Array.from({length:F},(o,n)=>n);q(a,e.phonemeRow,{showDiacritics:!0,revealedIndices:t});const r=F-1;await M.speakPhoneme(a.graphemes[r],a.types[r]);const s=document.getElementById("blend-progress");s&&(s.textContent=`Sound ${F} of ${a.graphemes.length}`),F>=a.graphemes.length&&await tr(a,e),oe=!1,p.get("autoplay")&&F<a.graphemes.length&&setTimeout(()=>be(a,e),400)}async function tr(a,e){var t,r;ae(a,e.wordDisplay,s=>{M.playSfx("pop")}),q(a,e.phonemeRow,{showDiacritics:!0,showLabels:!0,revealedIndices:null}),await new Promise(s=>setTimeout(s,600)),await M.speakWord(a.word),e.modeArea.innerHTML=`
    <div style="display:flex; flex-direction:column; align-items:center; gap:var(--space-4);">
      <p style="font-size:var(--font-size-lg); font-weight:700; color:var(--text);">
        Did you blend it right?
      </p>
      <div style="display:flex; gap:var(--space-4);">
        <button class="btn btn--success btn--xl" id="btn-self-yes" aria-label="Yes, I got it!">
          Yes! âœ“
        </button>
        <button class="btn btn--ghost btn--xl" id="btn-self-no" aria-label="Not quite, try again">
          Not yet
        </button>
      </div>
    </div>
  `,e.btnSayIt.style.display="",re=Date.now()-re,(t=document.getElementById("btn-self-yes"))==null||t.addEventListener("click",()=>{e.onResult(!0,re)}),(r=document.getElementById("btn-self-no"))==null||r.addEventListener("click",()=>{e.onResult(!1,re)})}function rr(){return Se}function sr(){Se=null,F=0,oe=!1}let ke=null,ne=!1,we=0;function or(a,e){ke=a,ne=!1,we=Date.now(),Z(a,e.wordEmoji,!0),e.modeInstruction.textContent="Listen to each sound â€” then blend!",q(a,e.phonemeRow,{showDiacritics:!0,showLabels:!0,revealedIndices:null}),Ke(e,a),e.btnCheck.style.display="none",e.btnSayIt.style.display="none",e.btnSkip.style.display="",p.get("autoplay")&&setTimeout(()=>Ce(a,e),500)}function nr(){const a=p.get("currentGroup")||"",t=[`<option value="" ${a?"":"selected"}>ðŸ”¤ All Words</option>`];for(const r of he){const s=J[r],o=a===r?"selected":"";t.push(`<option value="${r}" ${o}>${s.icon} ${s.label}</option>`)}return t.join("")}function Ke(a,e,t=!1){var r,s,o,n,c;a.modeArea.innerHTML=`
    <div class="classic-blend-wrap">

      <!-- Category selector -->
      <div class="category-row">
        <label class="category-label" for="classic-group-select">Category:</label>
        <select id="classic-group-select" class="category-select" aria-label="Choose word category">
          ${nr()}
        </select>
      </div>

      <!-- Play buttons -->
      <div class="classic-btn-row">
        <button class="btn btn--primary btn--xl" id="btn-classic-play" aria-label="Play all sounds">
          â–¶ Play Sounds
        </button>
        ${t?`
        <button class="btn btn--ghost btn--xl" id="btn-classic-again" aria-label="Play again">
          ðŸ” Again
        </button>
        `:""}
      </div>

      <!-- Self-assessment (after first play) -->
      ${t?`
      <div class="classic-assess-row">
        <button class="btn btn--success btn--xl" id="btn-self-yes" aria-label="Yes, I blended it!">
          Yes! âœ“
        </button>
        <button class="btn btn--ghost btn--xl" id="btn-self-no" aria-label="Not quite yet">
          Not yet
        </button>
      </div>
      `:""}

    </div>
  `,(r=document.getElementById("classic-group-select"))==null||r.addEventListener("change",d=>{var g;const h=d.target.value||null;p.set("currentGroup",h),(g=a.onGroupChange)==null||g.call(a,h)}),(s=document.getElementById("btn-classic-play"))==null||s.addEventListener("click",()=>{Ce(e,a)}),(o=document.getElementById("btn-classic-again"))==null||o.addEventListener("click",()=>{Ce(e,a)}),(n=document.getElementById("btn-self-yes"))==null||n.addEventListener("click",()=>{a.onResult(!0,Date.now()-we)}),(c=document.getElementById("btn-self-no"))==null||c.addEventListener("click",()=>{a.onResult(!1,Date.now()-we)})}async function Ce(a,e){if(ne)return;ne=!0;const t=e.phonemeRow.querySelectorAll(".phoneme-tile");for(let r=0;r<a.graphemes.length;r++)t.forEach((s,o)=>s.classList.toggle("active",o===r)),await M.speakPhoneme(a.graphemes[r],a.types[r]),await Ge(300);t.forEach(r=>r.classList.remove("active")),await Ge(300),await M.speakWord(a.word),ne=!1,Ke(e,a,!0),e.btnSayIt.style.display=""}const Ge=a=>new Promise(e=>setTimeout(e,a));function ar(){return ke}function ir(){ke=null,ne=!1}let Me=null,ce=!1,Ze=0;function lr(a,e){Me=a,ce=!1,Ze=Date.now(),Z(a,e.wordEmoji,!1),e.wordDisplay.innerHTML="",e.phonemeRow.innerHTML="",e.modeInstruction.textContent="Listen to the word, then pick the right one!";const t=Wt(a,3),r=K([a,...t]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const s=e.modeArea.querySelector(".choice-grid");for(const o of r){const n=document.createElement("button");n.className="choice-btn",n.textContent=o.word,n.dataset.wordId=o.id,n.setAttribute("aria-label",`Choose ${o.word}`),n.addEventListener("click",()=>cr(o,n,a,e,s)),s.appendChild(n)}e.btnSayIt.style.display="",e.btnCheck.style.display="none",e.btnSkip.style.display="",setTimeout(()=>M.speakWord(a.word),400)}function cr(a,e,t,r,s){if(ce)return;ce=!0;const o=Date.now()-Ze,n=a.id===t.id;s.querySelectorAll(".choice-btn").forEach(c=>{c.disabled=!0,c.dataset.wordId===t.id&&c.classList.add("correct")}),n||e.classList.add("wrong"),Z(t,r.wordEmoji,!0),ae(t,r.wordDisplay),q(t,r.phonemeRow,{showDiacritics:!0}),setTimeout(()=>M.speakWord(t.word),500),setTimeout(()=>{r.onResult(n,o)},n?800:1500)}function dr(){return Me}function pr(){Me=null,ce=!1}let xe=null,A=[],H=[],Je=0;function hr(a,e){xe=a,A=[],H=[],Je=Date.now(),Z(a,e.wordEmoji,!0),ae(a,e.wordDisplay),e.phonemeRow.innerHTML="",e.modeInstruction.textContent="Tap letters that go together to make each sound!";const t=a.word.split("");e.modeArea.innerHTML=`
    <div class="segment-word" id="segment-letters" aria-label="Tap letters to group them into sounds"></div>
    <div class="segment-targets" id="segment-targets" aria-label="Sound groups found"></div>
  `;const r=document.getElementById("segment-letters"),s=document.getElementById("segment-targets");for(let o=0;o<a.graphemes.length;o++){const n=document.createElement("div");n.className="segment-slot",n.dataset.index=o,n.setAttribute("aria-label",`Sound ${o+1}`),s.appendChild(n)}t.forEach((o,n)=>{const c=document.createElement("button");c.className="segment-btn",c.textContent=o,c.dataset.index=n,c.setAttribute("aria-label",`Letter ${o}`),c.addEventListener("click",()=>gr(n,o,c,a,e)),r.appendChild(c)}),e.btnCheck.style.display="",e.btnCheck.onclick=()=>ur(a,e),e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>M.speakWord(a.word),400)}function gr(a,e,t,r,s){t.classList.contains("selected")?(t.classList.remove("selected"),A=A.filter(c=>c.index!==a)):(t.classList.add("selected"),A.push({index:a,letter:e}),A.sort((c,d)=>c.index-d.index));const o=A.map(c=>c.letter).join(""),n=r.graphemes[H.length];n&&o===n&&Qe(r,s)}function Qe(a,e){if(A.length===0)return;const t=A.map(s=>s.letter).join(""),r=a.graphemes[H.length];if(t===r){H.push(t);const s=document.getElementById("segment-letters");A.forEach(d=>{const h=s.querySelectorAll(".segment-btn");h[d.index].classList.remove("selected"),h[d.index].classList.add("matched"),h[d.index].disabled=!0});const n=document.querySelectorAll(".segment-slot")[H.length-1];n&&(n.textContent=t,n.classList.add("filled"));const c=H.length-1;M.speakPhoneme(a.graphemes[c],a.types[c]),A=[],H.length===a.graphemes.length&&mr(a,e)}else{const s=document.getElementById("segment-letters");A.forEach(o=>{const n=s.querySelectorAll(".segment-btn");n[o.index].classList.add("wrong"),n[o.index].classList.remove("selected"),setTimeout(()=>n[o.index].classList.remove("wrong"),500)}),A=[]}}function ur(a,e){A.length>0&&Qe(a,e)}function mr(a,e){const t=Date.now()-Je;q(a,e.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(()=>M.speakWord(a.word),300),setTimeout(()=>{e.onResult(!0,t)},1e3)}function vr(){return xe}function fr(){xe=null,A=[],H=[]}let Ie=null,P=-1,de=!1,et=0;function yr(a,e){Ie=a,de=!1,et=Date.now();const t=a.types.map((g,v)=>g==="sv"||g==="lv"?v:-1).filter(g=>g>=0);t.length>0?P=t[Math.floor(Math.random()*t.length)]:P=Math.floor(Math.random()*a.graphemes.length),a.types[P]==="se"&&a.graphemes.length>1&&(P=0),Z(a,e.wordEmoji,!0);const r=e.wordDisplay;r.innerHTML="",a.graphemes.forEach((g,v)=>{const S=document.createElement("div"),L={c:"consonant",sv:"short-vowel",lv:"long-vowel",d:"digraph",bl:"blend",se:"silent-e",rc:"r-control"}[a.types[v]]||"consonant";S.className=`letter-tile letter-tile--${L}`,S.textContent=v===P?"?":g,v===P&&(S.style.background="var(--border)",S.style.color="var(--text-muted)",S.style.fontSize="var(--font-size-3xl)"),r.appendChild(S)}),q(a,e.phonemeRow,{showDiacritics:!0,hiddenIndices:[P]}),e.modeInstruction.textContent="Which sound is missing?";const s=a.graphemes[P],o=a.types[P],n=wr(s,o),c=K(n).slice(0,3),d=K([{grapheme:s,type:o,correct:!0},...c.map(g=>({grapheme:g,type:o,correct:!1}))]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const h=e.modeArea.querySelector(".choice-grid");for(const g of d){const v=document.createElement("button");v.className="choice-btn",v.textContent=g.grapheme,v.dataset.correct=g.correct,v.setAttribute("aria-label",`Choose ${g.grapheme}`),v.addEventListener("click",()=>br(g,v,a,e,h)),h.appendChild(v)}e.btnCheck.style.display="none",e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>M.speakWord(a.word),400)}function br(a,e,t,r,s){if(de)return;de=!0;const o=Date.now()-et;s.querySelectorAll(".choice-btn").forEach(n=>{n.disabled=!0,n.dataset.correct==="true"&&n.classList.add("correct")}),a.correct||e.classList.add("wrong"),ae(t,r.wordDisplay),q(t,r.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(async()=>{await M.speakPhoneme(t.graphemes[P],t.types[P]),await new Promise(n=>setTimeout(n,300)),await M.speakWord(t.word)},300),setTimeout(()=>{r.onResult(a.correct,o)},a.correct?800:1500)}function wr(a,e){const t=new Set;for(const r of B)for(let s=0;s<r.graphemes.length;s++)r.types[s]===e&&r.graphemes[s]!==a&&t.add(r.graphemes[s]);return Array.from(t)}function Cr(){return Ie}function _r(){Ie=null,P=-1,de=!1}let Le=null,pe=!1,tt=0;function jr(a,e){Le=a,pe=!1,tt=Date.now(),Z(a,e.wordEmoji,!0),e.wordDisplay.innerHTML="",e.phonemeRow.innerHTML="",e.modeInstruction.textContent="What sound does this word start with?";const t=a.graphemes[0],r=a.types[0],s=Sr(t),o=K(s).slice(0,3),n=K([{grapheme:t,type:r,correct:!0},...o.map(d=>({grapheme:d.grapheme,type:d.type,correct:!1}))]);e.modeArea.innerHTML='<div class="choice-grid"></div>';const c=e.modeArea.querySelector(".choice-grid");for(const d of n){const h=document.createElement("button");h.className="choice-btn",h.textContent=d.grapheme.toUpperCase(),h.dataset.correct=d.correct,h.setAttribute("aria-label",`Choose ${d.grapheme}`),h.addEventListener("mouseenter",()=>{M.speakPhoneme(d.grapheme,d.type)}),h.addEventListener("click",()=>Er(d,h,a,e,c)),c.appendChild(h)}e.btnCheck.style.display="none",e.btnSayIt.style.display="",e.btnSkip.style.display="",setTimeout(()=>M.speakWord(a.word),400)}function Er(a,e,t,r,s){if(pe)return;pe=!0;const o=Date.now()-tt;s.querySelectorAll(".choice-btn").forEach(n=>{n.disabled=!0,n.dataset.correct==="true"&&n.classList.add("correct")}),a.correct||e.classList.add("wrong"),ae(t,r.wordDisplay),q(t,r.phonemeRow,{showDiacritics:!0,showLabels:!0}),setTimeout(async()=>{await M.speakPhoneme(t.graphemes[0],t.types[0]),await new Promise(n=>setTimeout(n,300)),await M.speakWord(t.word)},300),setTimeout(()=>{r.onResult(a.correct,o)},a.correct?800:1500)}function Sr(a,e){const t=new Set([a]),r=[];for(const s of K(B)){const o=s.graphemes[0],n=s.types[0];if(!t.has(o)&&(t.add(o),r.push({grapheme:o,type:n}),r.length>=6))break}return r}function kr(){return Le}function Mr(){Le=null,pe=!1}const Ue={blend:{key:"blend",name:"Blend It!",icon:"ðŸŽ¯",setup:er,cleanup:sr,getCurrentWord:rr},classicBlend:{key:"classicBlend",name:"Listen & Blend",icon:"ðŸ”Š",setup:or,cleanup:ir,getCurrentWord:ar},hear:{key:"hear",name:"Hear & Choose",icon:"ðŸ‘‚",setup:lr,cleanup:pr,getCurrentWord:dr},segment:{key:"segment",name:"Segment It",icon:"âœ‚ï¸",setup:hr,cleanup:fr,getCurrentWord:vr},missing:{key:"missing",name:"Missing Sound",icon:"ðŸ”",setup:yr,cleanup:_r,getCurrentWord:Cr},first:{key:"first",name:"First Sound",icon:"ðŸš€",setup:jr,cleanup:Mr,getCurrentWord:kr}};class xr{constructor(){this._screen="screen-home",this._mode="blend",this._currentWord=null,this._els={}}init(){this._cacheElements(),this._bindEvents(),this._applySettings(),ee.init(),D.init();const e=document.getElementById("spin-wheel");e&&fe.init(e);const t=document.getElementById("btn-mic");t&&!te.supported&&t.classList.add("hidden"),this._applyTheme(p.get("theme")||"default"),console.log("[PhonicsQuest] App initialized")}_cacheElements(){this._els={screenHome:document.getElementById("screen-home"),screenGame:document.getElementById("screen-game"),screenResult:document.getElementById("screen-result"),wordDisplay:document.getElementById("word-display"),wordEmoji:document.getElementById("word-emoji"),phonemeRow:document.getElementById("phoneme-row"),modeInstruction:document.getElementById("mode-instruction"),modeArea:document.getElementById("mode-area"),btnCheck:document.getElementById("btn-check"),btnSayIt:document.getElementById("btn-say-it"),btnSkip:document.getElementById("btn-skip"),btnBack:document.getElementById("btn-back"),btnNext:document.getElementById("btn-next"),btnMic:document.getElementById("btn-mic"),resultBadge:document.getElementById("result-badge"),resultMessage:document.getElementById("result-message"),resultWord:document.getElementById("result-word-display"),resultXp:document.getElementById("result-xp"),resultMascot:document.getElementById("result-mascot"),speechBubble:document.getElementById("speech-bubble"),toastContainer:document.getElementById("toast-container")}}_bindEvents(){var e,t,r,s,o,n,c,d,h;document.querySelectorAll(".mode-card").forEach(g=>{g.addEventListener("click",()=>{this._mode=g.dataset.mode,p.set("currentMode",this._mode),this._startGame()})}),(e=document.getElementById("spin-btn"))==null||e.addEventListener("click",async()=>{const g=document.getElementById("spin-btn");if(!(!g||fe.isSpinning)){g.disabled=!0;try{const v=await fe.spin();p.set("currentGroup",v),M.playSfx("correct"),this._mode="blend",setTimeout(()=>this._startGame(v),500)}catch{}g.disabled=!1}}),(t=this._els.btnBack)==null||t.addEventListener("click",()=>{this._cleanupMode(),this._showScreen("screen-home"),D.setHomeState("holdCard")}),(r=this._els.btnNext)==null||r.addEventListener("click",()=>{this._nextWord()}),(s=this._els.btnSayIt)==null||s.addEventListener("click",()=>{this._currentWord&&M.speakWord(this._currentWord.word)}),(o=this._els.btnSkip)==null||o.addEventListener("click",()=>{this._cleanupMode(),this._nextWord()}),(n=this._els.btnMic)==null||n.addEventListener("click",()=>{this._handleSpeechRecognition()}),(c=document.getElementById("settings-btn"))==null||c.addEventListener("click",()=>{this._openModal("modal-settings")}),(d=document.getElementById("dashboard-btn"))==null||d.addEventListener("click",()=>{this._openModal("modal-pin"),setTimeout(()=>{var g;return(g=document.querySelector(".pin-digit"))==null?void 0:g.focus()},200)}),document.querySelectorAll(".modal-close").forEach(g=>{g.addEventListener("click",()=>{const v=g.dataset.close;v&&this._closeModal(v)})}),document.querySelectorAll(".modal-overlay").forEach(g=>{g.addEventListener("click",v=>{v.target===g&&this._closeModal(g.id)})}),this._bindSettings(),this._bindPinGate(),document.addEventListener("keydown",g=>this._handleKeyboard(g)),(h=document.getElementById("mascot-trigger"))==null||h.addEventListener("click",()=>{D.clap(),this._showToast(D.getCheer(),"success"),M.playSfx("pop")})}_startGame(e){const t={maxLevel:p.get("difficulty")||1};e&&(t.group=e),this._currentWord=se.getNextWord(t),M.preloadWord(this._currentWord),this._showScreen("screen-game"),D.think();const r=Ue[this._mode];r&&r.setup(this._currentWord,{...this._els,onResult:(s,o)=>this._handleResult(s,o),onGroupChange:s=>{this._cleanupMode(),this._startGame(s||void 0)}})}_nextWord(){this._cleanupMode(),this._startGame(p.get("currentGroup"))}_handleResult(e,t){const r=this._currentWord;if(!r)return;const s=se.isNewWord(r.id);if(se.recordAttempt(r.id,e,this._mode),e){const o=ee.recordCorrect(t,s);D.celebrate(o.levelUp),D.setResultState(o.levelUp?"trophy":"confetti"),o.levelUp?(Zt(),M.playSfx("levelUp"),this._showToast(`Level ${o.newLevel}!`,"success")):(Kt(),M.playSfx("correct")),o.dailyComplete&&(Jt(),this._showToast("Daily goal complete!","success")),this._showResultScreen(!0,r,o)}else{const o=ee.recordWrong();D.encourage(),D.setResultState("encourage"),M.playSfx("wrong"),this._showResultScreen(!1,r,null),o.gameOver&&(this._showToast("Hearts refilled! Take a break?","warning"),setTimeout(()=>ee.refillHearts(),2e3))}}_showResultScreen(e,t,r){this._showScreen("screen-result"),e?(this._els.resultBadge.textContent="ðŸŒŸ",this._els.resultMessage.textContent=D.getCheer(),this._els.resultMessage.style.color="var(--color-success)",this._els.resultXp.textContent=r?`+${r.xpEarned} XP`:"+10 XP",this._els.resultXp.style.display=""):(this._els.resultBadge.textContent="ðŸ’ª",this._els.resultMessage.textContent=D.getEncouragement(),this._els.resultMessage.style.color="var(--color-error)",this._els.resultXp.style.display="none"),this._els.resultWord.textContent=t.emoji+" "+t.word,this._els.btnNext.focus()}_showScreen(e){document.querySelectorAll(".screen").forEach(t=>{t.id===e?(t.classList.remove("exit"),t.classList.add("active")):t.classList.contains("active")&&(t.classList.remove("active"),t.classList.add("exit"),setTimeout(()=>t.classList.remove("exit"),400))}),this._screen=e}_cleanupMode(){const e=Ue[this._mode];e==null||e.cleanup()}async _handleSpeechRecognition(){if(!this._currentWord||!te.supported)return;const e=this._els.btnMic;if(!e)return;if(te.isListening){te.stop(),e.setAttribute("aria-pressed","false");return}e.setAttribute("aria-pressed","true");const t=await te.listen(this._currentWord.word);if(e.setAttribute("aria-pressed","false"),!t){this._showSpeechBubble("I didn't hear anything. Try again!");return}t.correct?(this._showSpeechBubble(`I heard "${t.heard}" â€“ ${t.score}% match! Great job!`),setTimeout(()=>this._handleResult(!0,3e3),1200)):this._showSpeechBubble(`I heard "${t.heard}" â€“ ${t.score}% match. Try saying "${this._currentWord.word}" more clearly!`)}_showSpeechBubble(e){const t=this._els.speechBubble;t&&(t.textContent=e,t.hidden=!1,setTimeout(()=>{t.hidden=!0},4e3))}_bindSettings(){var e,t,r,s,o;document.querySelectorAll(".theme-swatch").forEach(n=>{n.addEventListener("click",()=>{const c=n.dataset.theme;this._applyTheme(c),p.set("theme",c),document.querySelectorAll(".theme-swatch").forEach(d=>{d.classList.toggle("active",d.dataset.theme===c),d.setAttribute("aria-pressed",d.dataset.theme===c)})})}),(e=document.getElementById("sfx-toggle"))==null||e.addEventListener("change",n=>{p.set("sfxEnabled",n.target.checked)}),(t=document.getElementById("autoplay-toggle"))==null||t.addEventListener("change",n=>{p.set("autoplay",n.target.checked)}),(r=document.getElementById("voice-speed"))==null||r.addEventListener("input",n=>{const c=parseFloat(n.target.value);p.set("voiceSpeed",c);const d=document.getElementById("voice-speed-display");d&&(d.textContent=`${c}Ã—`)}),document.querySelectorAll(".diff-btn").forEach(n=>{n.addEventListener("click",()=>{const c=parseInt(n.dataset.diff);p.set("difficulty",c),document.querySelectorAll(".diff-btn").forEach(d=>{d.classList.toggle("active",parseInt(d.dataset.diff)===c),d.setAttribute("aria-pressed",parseInt(d.dataset.diff)===c)})})}),(s=document.getElementById("goal-range"))==null||s.addEventListener("input",n=>{const c=parseInt(n.target.value);p.set("dailyGoal",c);const d=document.getElementById("goal-range-display");d&&(d.textContent=c),document.getElementById("goal-total").textContent=c}),(o=document.getElementById("reset-progress-btn"))==null||o.addEventListener("click",()=>{confirm("This will erase all progress. Are you sure?")&&(p.reset(),ee.init(),this._showToast("Progress reset!","warning"),this._closeModal("modal-settings"))})}_applySettings(){const e=document.getElementById("sfx-toggle");e&&(e.checked=p.get("sfxEnabled"));const t=document.getElementById("autoplay-toggle");t&&(t.checked=p.get("autoplay"));const r=document.getElementById("voice-speed");r&&(r.value=p.get("voiceSpeed"));const s=document.getElementById("voice-speed-display");s&&(s.textContent=`${p.get("voiceSpeed")}Ã—`);const o=p.get("difficulty")||1;document.querySelectorAll(".diff-btn").forEach(h=>{h.classList.toggle("active",parseInt(h.dataset.diff)===o),h.setAttribute("aria-pressed",parseInt(h.dataset.diff)===o)});const n=p.get("dailyGoal")||10,c=document.getElementById("goal-range");c&&(c.value=n);const d=document.getElementById("goal-range-display");d&&(d.textContent=n)}_applyTheme(e){document.documentElement.setAttribute("data-theme",e)}_bindPinGate(){var r,s;const e=document.querySelectorAll(".pin-digit"),t=document.getElementById("pin-hint");e.forEach((o,n)=>{o.addEventListener("input",c=>{c.target.value&&n<e.length-1&&e[n+1].focus()}),o.addEventListener("keydown",c=>{c.key==="Backspace"&&!c.target.value&&n>0&&e[n-1].focus()})}),(r=document.getElementById("pin-confirm-btn"))==null||r.addEventListener("click",()=>{const o=Array.from(e).map(c=>c.value).join("");if(o.length<4){t&&(t.textContent="Enter all 4 digits");return}const n=p.get("parentPin");n?o===n?(t&&(t.textContent=""),this._closeModal("modal-pin"),this._openDashboard()):(t&&(t.textContent="Wrong PIN. Try again."),e.forEach(c=>{c.value=""}),e[0].focus()):(p.set("parentPin",o),t&&(t.textContent=""),this._closeModal("modal-pin"),this._openDashboard())}),(s=document.getElementById("pin-cancel-btn"))==null||s.addEventListener("click",()=>{this._closeModal("modal-pin"),document.querySelectorAll(".pin-digit").forEach(o=>{o.value=""})})}_openDashboard(){this._openModal("modal-dashboard");const e=document.getElementById("dashboard-content");e&&Ft(e)}_openModal(e){const t=document.getElementById(e);if(!t)return;t.hidden=!1;const r=t.querySelectorAll("button, input, [tabindex]");r.length&&r[0].focus();const s=o=>{o.key==="Escape"&&(this._closeModal(e),document.removeEventListener("keydown",s))};document.addEventListener("keydown",s)}_closeModal(e){const t=document.getElementById(e);t&&(t.hidden=!0,e==="modal-dashboard"&&Xt())}_showToast(e,t="info"){const r=this._els.toastContainer;if(!r)return;const s=document.createElement("div");s.className=`toast toast--${t}`,s.textContent=e,r.appendChild(s),setTimeout(()=>s.remove(),3200)}_handleKeyboard(e){var t,r,s,o;if(this._screen==="screen-game")switch(e.key){case" ":case"Enter":e.preventDefault(),(t=document.getElementById("btn-reveal-next"))==null||t.click();break;case"s":(r=this._els.btnSayIt)==null||r.click();break;case"Escape":(s=this._els.btnBack)==null||s.click();break;case"n":this._screen==="screen-result"&&((o=this._els.btnNext)==null||o.click());break}}}const Ir=new xr,ze="/blending/";function Lr(){"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const a=await navigator.serviceWorker.register(`${ze}sw.js`,{scope:ze});console.log("[PWA] Service worker registered:",a.scope),a.addEventListener("updatefound",()=>{const e=a.installing;e&&e.addEventListener("statechange",()=>{e.state==="activated"&&Tr("App updated! Refresh for the latest version.","info")})})}catch(a){console.warn("[PWA] Service worker registration failed:",a)}})}function Tr(a,e="info"){const t=document.getElementById("toast-container");if(!t)return;const r=document.createElement("div");r.className=`toast toast--${e}`,r.textContent=a,t.appendChild(r),setTimeout(()=>r.remove(),3500)}document.addEventListener("DOMContentLoaded",()=>{Ir.init(),Lr()});
